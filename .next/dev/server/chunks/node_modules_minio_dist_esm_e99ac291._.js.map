{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/errors.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference lib=\"ES2022.Error\" />\n\nclass ExtendableError extends Error {\n  constructor(message?: string, opt?: ErrorOptions) {\n    // error Option {cause?: unknown} is a 'nice to have',\n    // don't use it internally\n    super(message, opt)\n    // set error name, otherwise it's always 'Error'\n    this.name = this.constructor.name\n  }\n}\n\n/**\n * AnonymousRequestError is generated for anonymous keys on specific\n * APIs. NOTE: PresignedURL generation always requires access keys.\n */\nexport class AnonymousRequestError extends ExtendableError {}\n\n/**\n * InvalidArgumentError is generated for all invalid arguments.\n */\nexport class InvalidArgumentError extends ExtendableError {}\n\n/**\n * InvalidPortError is generated when a non integer value is provided\n * for ports.\n */\nexport class InvalidPortError extends ExtendableError {}\n\n/**\n * InvalidEndpointError is generated when an invalid end point value is\n * provided which does not follow domain standards.\n */\nexport class InvalidEndpointError extends ExtendableError {}\n\n/**\n * InvalidBucketNameError is generated when an invalid bucket name is\n * provided which does not follow AWS S3 specifications.\n * http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html\n */\nexport class InvalidBucketNameError extends ExtendableError {}\n\n/**\n * InvalidObjectNameError is generated when an invalid object name is\n * provided which does not follow AWS S3 specifications.\n * http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html\n */\nexport class InvalidObjectNameError extends ExtendableError {}\n\n/**\n * AccessKeyRequiredError generated by signature methods when access\n * key is not found.\n */\nexport class AccessKeyRequiredError extends ExtendableError {}\n\n/**\n * SecretKeyRequiredError generated by signature methods when secret\n * key is not found.\n */\nexport class SecretKeyRequiredError extends ExtendableError {}\n\n/**\n * ExpiresParamError generated when expires parameter value is not\n * well within stipulated limits.\n */\nexport class ExpiresParamError extends ExtendableError {}\n\n/**\n * InvalidDateError generated when invalid date is found.\n */\nexport class InvalidDateError extends ExtendableError {}\n\n/**\n * InvalidPrefixError generated when object prefix provided is invalid\n * or does not conform to AWS S3 object key restrictions.\n */\nexport class InvalidPrefixError extends ExtendableError {}\n\n/**\n * InvalidBucketPolicyError generated when the given bucket policy is invalid.\n */\nexport class InvalidBucketPolicyError extends ExtendableError {}\n\n/**\n * IncorrectSizeError generated when total data read mismatches with\n * the input size.\n */\nexport class IncorrectSizeError extends ExtendableError {}\n\n/**\n * InvalidXMLError generated when an unknown XML is found.\n */\nexport class InvalidXMLError extends ExtendableError {}\n\n/**\n * S3Error is generated for errors returned from S3 server.\n * see getErrorTransformer for details\n */\nexport class S3Error extends ExtendableError {\n  code?: string\n  region?: string\n}\n\nexport class IsValidBucketNameError extends ExtendableError {}\n"],"names":["ExtendableError","Error","constructor","message","opt","name","AnonymousRequestError","InvalidArgumentError","InvalidPortError","InvalidEndpointError","InvalidBucketNameError","InvalidObjectNameError","AccessKeyRequiredError","SecretKeyRequiredError","ExpiresParamError","InvalidDateError","InvalidPrefixError","InvalidBucketPolicyError","IncorrectSizeError","InvalidXMLError","S3Error","IsValidBucketNameError"],"mappings":"AAAA;;;;;;;;;;;;;;CAcA,GAEA,oCAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAMA,eAAe,SAASC,KAAK,CAAC;IAClCC,WAAWA,CAACC,OAAgB,EAAEC,GAAkB,CAAE;QAChD,sDAAA;QACA,0BAAA;QACA,KAAK,CAACD,OAAO,EAAEC,GAAG,CAAC;QACnB,gDAAA;QACA,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,WAAW,CAACG,IAAI;IACnC;AACF;AAMO,MAAMC,qBAAqB,SAASN,eAAe,CAAC;AAAA;AAKpD,MAAMO,oBAAoB,SAASP,eAAe,CAAC;AAAA;AAMnD,MAAMQ,gBAAgB,SAASR,eAAe,CAAC;AAAA;AAM/C,MAAMS,oBAAoB,SAAST,eAAe,CAAC;AAAA;AAOnD,MAAMU,sBAAsB,SAASV,eAAe,CAAC;AAAA;AAOrD,MAAMW,sBAAsB,SAASX,eAAe,CAAC;AAAA;AAMrD,MAAMY,sBAAsB,SAASZ,eAAe,CAAC;AAAA;AAMrD,MAAMa,sBAAsB,SAASb,eAAe,CAAC;AAAA;AAMrD,MAAMc,iBAAiB,SAASd,eAAe,CAAC;AAAA;AAKhD,MAAMe,gBAAgB,SAASf,eAAe,CAAC;AAAA;AAM/C,MAAMgB,kBAAkB,SAAShB,eAAe,CAAC;AAAA;AAKjD,MAAMiB,wBAAwB,SAASjB,eAAe,CAAC;AAAA;AAMvD,MAAMkB,kBAAkB,SAASlB,eAAe,CAAC;AAAA;AAKjD,MAAMmB,eAAe,SAASnB,eAAe,CAAC;AAAA;AAM9C,MAAMoB,OAAO,SAASpB,eAAe,CAAC;AAAA;AAKtC,MAAMqB,sBAAsB,SAASrB,eAAe,CAAC;AAAA"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/callbackify.js"],"sourcesContent":["// wrapper an async function that support callback style API.\n// It will preserve 'this'.\nexport function callbackify(fn) {\n  return function () {\n    const args = [...arguments]\n    const callback = args.pop()\n\n    // If the last argument is a function, assume it's the callback.\n    if (typeof callback === 'function') {\n      return fn.apply(this, args).then(\n        (result) => callback(null, result),\n        (err) => callback(err),\n      )\n    }\n\n    return fn.apply(this, arguments)\n  }\n}\n"],"names":["callbackify","fn","args","arguments","callback","pop","apply","then","result","err"],"mappings":"AAAA,6DAAA;AACA,2BAAA;;;;;AACO,SAASA,WAAWA,CAACC,EAAE,EAAE;IAC9B,OAAO,YAAY;QACjB,MAAMC,IAAI,GAAG,CAAC;eAAGC,SAAS;SAAC;QAC3B,MAAMC,QAAQ,GAAGF,IAAI,CAACG,GAAG,CAAC,CAAC;QAE3B,gEAAA;QACA,IAAI,OAAOD,QAAQ,KAAK,UAAU,EAAE;YAClC,OAAOH,EAAE,CAACK,KAAK,CAAC,IAAI,EAAEJ,IAAI,CAAC,CAACK,IAAI,EAC7BC,MAAM,GAAKJ,QAAQ,CAAC,IAAI,EAAEI,MAAM,CAAC,GACjCC,GAAG,GAAKL,QAAQ,CAACK,GAAG,CACvB,CAAC;QACH;QAEA,OAAOR,EAAE,CAACK,KAAK,CAAC,IAAI,EAAEH,SAAS,CAAC;IAClC,CAAC;AACH"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/Credentials.ts"],"sourcesContent":["export class Credentials {\n  public accessKey: string\n  public secretKey: string\n  public sessionToken?: string\n\n  constructor({ accessKey, secretKey, sessionToken }: { accessKey: string; secretKey: string; sessionToken?: string }) {\n    this.accessKey = accessKey\n    this.secretKey = secretKey\n    this.sessionToken = sessionToken\n  }\n\n  setAccessKey(accessKey: string) {\n    this.accessKey = accessKey\n  }\n\n  getAccessKey() {\n    return this.accessKey\n  }\n\n  setSecretKey(secretKey: string) {\n    this.secretKey = secretKey\n  }\n\n  getSecretKey() {\n    return this.secretKey\n  }\n\n  setSessionToken(sessionToken: string) {\n    this.sessionToken = sessionToken\n  }\n\n  getSessionToken() {\n    return this.sessionToken\n  }\n\n  get(): Credentials {\n    return this\n  }\n}\n\n// deprecated default export, please use named exports.\n// keep for backward compatibility.\n// eslint-disable-next-line import/no-default-export\nexport default Credentials\n"],"names":["Credentials","constructor","accessKey","secretKey","sessionToken","setAccessKey","getAccessKey","setSecretKey","getSecretKey","setSessionToken","getSessionToken","get"],"mappings":";;;;;;AAAO,MAAMA,WAAW,CAAC;IAKvBC,WAAWA,CAAC,EAAEC,SAAS,EAAEC,SAAS,EAAEC,YAAAA,EAA+E,CAAE;QACnH,IAAI,CAACF,SAAS,GAAGA,SAAS;QAC1B,IAAI,CAACC,SAAS,GAAGA,SAAS;QAC1B,IAAI,CAACC,YAAY,GAAGA,YAAY;IAClC;IAEAC,YAAYA,CAACH,SAAiB,EAAE;QAC9B,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC5B;IAEAI,YAAYA,CAAA,EAAG;QACb,OAAO,IAAI,CAACJ,SAAS;IACvB;IAEAK,YAAYA,CAACJ,SAAiB,EAAE;QAC9B,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC5B;IAEAK,YAAYA,CAAA,EAAG;QACb,OAAO,IAAI,CAACL,SAAS;IACvB;IAEAM,eAAeA,CAACL,YAAoB,EAAE;QACpC,IAAI,CAACA,YAAY,GAAGA,YAAY;IAClC;IAEAM,eAAeA,CAAA,EAAG;QAChB,OAAO,IAAI,CAACN,YAAY;IAC1B;IAEAO,GAAGA,CAAA,EAAgB;QACjB,OAAO,IAAI;IACb;AACF;uCAKeX,WAAW"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/CredentialProvider.ts"],"sourcesContent":["import { Credentials } from './Credentials.ts'\n\nexport class CredentialProvider {\n  private credentials: Credentials\n\n  constructor({ accessKey, secretKey, sessionToken }: { accessKey: string; secretKey: string; sessionToken?: string }) {\n    this.credentials = new Credentials({\n      accessKey,\n      secretKey,\n      sessionToken,\n    })\n  }\n\n  async getCredentials(): Promise<Credentials> {\n    return this.credentials.get()\n  }\n\n  setCredentials(credentials: Credentials) {\n    if (credentials instanceof Credentials) {\n      this.credentials = credentials\n    } else {\n      throw new Error('Unable to set Credentials. it should be an instance of Credentials class')\n    }\n  }\n\n  setAccessKey(accessKey: string) {\n    this.credentials.setAccessKey(accessKey)\n  }\n\n  getAccessKey() {\n    return this.credentials.getAccessKey()\n  }\n\n  setSecretKey(secretKey: string) {\n    this.credentials.setSecretKey(secretKey)\n  }\n\n  getSecretKey() {\n    return this.credentials.getSecretKey()\n  }\n\n  setSessionToken(sessionToken: string) {\n    this.credentials.setSessionToken(sessionToken)\n  }\n\n  getSessionToken() {\n    return this.credentials.getSessionToken()\n  }\n}\n\n// deprecated default export, please use named exports.\n// keep for backward compatibility.\n// eslint-disable-next-line import/no-default-export\nexport default CredentialProvider\n"],"names":["Credentials","CredentialProvider","constructor","accessKey","secretKey","sessionToken","credentials","getCredentials","get","setCredentials","Error","setAccessKey","getAccessKey","setSecretKey","getSecretKey","setSessionToken","getSessionToken"],"mappings":";;;;;;AAAA,SAASA,WAAW,QAAQ,mBAAkB;;AAEvC,MAAMC,kBAAkB,CAAC;IAG9BC,WAAWA,CAAC,EAAEC,SAAS,EAAEC,SAAS,EAAEC,YAAAA,EAA+E,CAAE;QACnH,IAAI,CAACC,WAAW,GAAG,IAAIN,qKAAW,CAAC;YACjCG,SAAS;YACTC,SAAS;YACTC;QACF,CAAC,CAAC;IACJ;IAEA,MAAME,cAAcA,CAAA,EAAyB;QAC3C,OAAO,IAAI,CAACD,WAAW,CAACE,GAAG,CAAC,CAAC;IAC/B;IAEAC,cAAcA,CAACH,WAAwB,EAAE;QACvC,IAAIA,WAAW,YAAYN,qKAAW,EAAE;YACtC,IAAI,CAACM,WAAW,GAAGA,WAAW;QAChC,CAAC,MAAM;YACL,MAAM,IAAII,KAAK,CAAC,0EAA0E,CAAC;QAC7F;IACF;IAEAC,YAAYA,CAACR,SAAiB,EAAE;QAC9B,IAAI,CAACG,WAAW,CAACK,YAAY,CAACR,SAAS,CAAC;IAC1C;IAEAS,YAAYA,CAAA,EAAG;QACb,OAAO,IAAI,CAACN,WAAW,CAACM,YAAY,CAAC,CAAC;IACxC;IAEAC,YAAYA,CAACT,SAAiB,EAAE;QAC9B,IAAI,CAACE,WAAW,CAACO,YAAY,CAACT,SAAS,CAAC;IAC1C;IAEAU,YAAYA,CAAA,EAAG;QACb,OAAO,IAAI,CAACR,WAAW,CAACQ,YAAY,CAAC,CAAC;IACxC;IAEAC,eAAeA,CAACV,YAAoB,EAAE;QACpC,IAAI,CAACC,WAAW,CAACS,eAAe,CAACV,YAAY,CAAC;IAChD;IAEAW,eAAeA,CAAA,EAAG;QAChB,OAAO,IAAI,CAACV,WAAW,CAACU,eAAe,CAAC,CAAC;IAC3C;AACF;uCAKef,kBAAkB"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/async.ts"],"sourcesContent":["// promise helper for stdlib\n\nimport * as fs from 'node:fs'\nimport * as stream from 'node:stream'\nimport { promisify } from 'node:util'\n\n// TODO: use \"node:fs/promise\" directly after we stop testing on nodejs 12\nexport { promises as fsp } from 'node:fs'\nexport const streamPromise = {\n  // node:stream/promises Added in: v15.0.0\n  pipeline: promisify(stream.pipeline),\n}\n\nexport const fstat = promisify(fs.fstat)\n"],"names":["fs","stream","promisify","promises","fsp","streamPromise","pipeline","fstat"],"mappings":"AAAA,4BAAA;;;;;;;AAEA,OAAO,KAAKA,EAAE;AACd,OAAO,KAAKC,MAAM;AAClB,SAASC,SAAS;AAElB,0EAAA;AACA,SAASC,QAAQ,IAAIC,GAAG,QAAQ,SAAS;;;;;AAClC,MAAMC,aAAa,GAAG;IAC3B,yCAAA;IACAC,QAAQ,MAAEJ,8GAAS,EAACD,MAAM,CAACK,0GAAQ;AACrC,CAAC;AAEM,MAAMC,KAAK,OAAGL,8GAAS,EAACF,EAAE,CAACO,mGAAK,CAAC"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/type.ts"],"sourcesContent":["import type * as http from 'node:http'\nimport type { Readable as ReadableStream } from 'node:stream'\n\nimport type { CopyDestinationOptions, CopySourceOptions } from '../helpers.ts'\nimport type { CopyConditions } from './copy-conditions.ts'\n\nexport type VersionIdentificator = {\n  versionId?: string\n}\n\nexport type GetObjectOpts = VersionIdentificator & {\n  SSECustomerAlgorithm?: string\n  SSECustomerKey?: string\n  SSECustomerKeyMD5?: string\n}\n\nexport type Binary = string | Buffer\n\n// nodejs IncomingHttpHeaders is Record<string, string | string[]>, but it's actually this:\nexport type ResponseHeader = Record<string, string>\n\nexport type ObjectMetaData = Record<string, string | number>\n\nexport type RequestHeaders = Record<string, string | boolean | number | undefined>\nexport type EnabledOrDisabledStatus = 'Enabled' | 'Disabled'\n\nexport const ENCRYPTION_TYPES = {\n  SSEC: 'SSE-C',\n  KMS: 'KMS',\n} as const\n\nexport type ENCRYPTION_TYPES = (typeof ENCRYPTION_TYPES)[keyof typeof ENCRYPTION_TYPES]\n\nexport type Encryption =\n  | {\n      type: typeof ENCRYPTION_TYPES.SSEC\n    }\n  | {\n      type: typeof ENCRYPTION_TYPES.KMS\n      SSEAlgorithm?: string\n      KMSMasterKeyID?: string\n    }\n\nexport const RETENTION_MODES = {\n  GOVERNANCE: 'GOVERNANCE',\n  COMPLIANCE: 'COMPLIANCE',\n} as const\nexport type RETENTION_MODES = (typeof RETENTION_MODES)[keyof typeof RETENTION_MODES]\n\nexport const RETENTION_VALIDITY_UNITS = {\n  DAYS: 'Days',\n  YEARS: 'Years',\n} as const\nexport type RETENTION_VALIDITY_UNITS = (typeof RETENTION_VALIDITY_UNITS)[keyof typeof RETENTION_VALIDITY_UNITS]\n\nexport const LEGAL_HOLD_STATUS = {\n  ENABLED: 'ON',\n  DISABLED: 'OFF',\n} as const\nexport type LEGAL_HOLD_STATUS = (typeof LEGAL_HOLD_STATUS)[keyof typeof LEGAL_HOLD_STATUS]\n\nexport type Transport = Pick<typeof http, 'request'>\n\nexport interface IRequest {\n  protocol: string\n  port?: number | string\n  method: string\n  path: string\n  headers: RequestHeaders\n}\n\nexport type ICanonicalRequest = string\n\nexport interface IncompleteUploadedBucketItem {\n  key: string\n  uploadId: string\n  size: number\n}\n\nexport interface MetadataItem {\n  Key: string\n  Value: string\n}\n\nexport interface ItemBucketMetadataList {\n  Items: MetadataItem[]\n}\n\nexport interface ItemBucketMetadata {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any\n}\nexport interface ItemBucketTags {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any\n}\n\nexport interface BucketItemFromList {\n  name: string\n  creationDate: Date\n}\n\nexport interface BucketItemCopy {\n  etag: string\n  lastModified: Date\n}\n\nexport type BucketItem =\n  | {\n      name: string\n      size: number\n      etag: string\n      prefix?: never\n      lastModified: Date\n    }\n  | {\n      name?: never\n      etag?: never\n      lastModified?: never\n      prefix: string\n      size: 0\n    }\n\nexport type BucketItemWithMetadata = BucketItem & {\n  metadata?: ItemBucketMetadata | ItemBucketMetadataList\n  tags?: ItemBucketTags\n}\n\nexport interface BucketStream<T> extends ReadableStream {\n  on(event: 'data', listener: (item: T) => void): this\n\n  on(event: 'end' | 'pause' | 'readable' | 'resume' | 'close', listener: () => void): this\n\n  on(event: 'error', listener: (err: Error) => void): this\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event: string | symbol, listener: (...args: any[]) => void): this\n}\n\nexport interface BucketItemStat {\n  size: number\n  etag: string\n  lastModified: Date\n  metaData: ItemBucketMetadata\n  versionId?: string | null\n}\n\nexport type StatObjectOpts = {\n  versionId?: string\n}\n\n/* Replication Config types */\nexport type ReplicationRuleStatus = {\n  Status: EnabledOrDisabledStatus\n}\n\nexport type Tag = {\n  Key: string\n  Value: string\n}\n\nexport type Tags = Record<string, string>\n\nexport type ReplicationRuleDestination = {\n  Bucket: string\n  StorageClass: string\n}\nexport type ReplicationRuleAnd = {\n  Prefix: string\n  Tags: Tag[]\n}\n\nexport type ReplicationRuleFilter = {\n  Prefix: string\n  And: ReplicationRuleAnd\n  Tag: Tag\n}\n\nexport type ReplicaModifications = {\n  Status: ReplicationRuleStatus\n}\n\nexport type SourceSelectionCriteria = {\n  ReplicaModifications: ReplicaModifications\n}\n\nexport type ExistingObjectReplication = {\n  Status: ReplicationRuleStatus\n}\n\nexport type ReplicationRule = {\n  ID: string\n  Status: ReplicationRuleStatus\n  Priority: number\n  DeleteMarkerReplication: ReplicationRuleStatus // should be set to \"Disabled\" by default\n  DeleteReplication: ReplicationRuleStatus\n  Destination: ReplicationRuleDestination\n  Filter: ReplicationRuleFilter\n  SourceSelectionCriteria: SourceSelectionCriteria\n  ExistingObjectReplication: ExistingObjectReplication\n}\n\nexport type ReplicationConfigOpts = {\n  role: string\n  rules: ReplicationRule[]\n}\n\nexport type ReplicationConfig = {\n  ReplicationConfiguration: ReplicationConfigOpts\n}\n/* Replication Config types */\n\nexport type ResultCallback<T> = (error: Error | null, result: T) => void\n\nexport type GetObjectLegalHoldOptions = {\n  versionId: string\n}\n/**\n * @deprecated keep for backward compatible, use `LEGAL_HOLD_STATUS` instead\n */\nexport type LegalHoldStatus = LEGAL_HOLD_STATUS\n\nexport type PutObjectLegalHoldOptions = {\n  versionId?: string\n  status: LEGAL_HOLD_STATUS\n}\n\nexport interface UploadedObjectInfo {\n  etag: string\n  versionId: string | null\n}\n\nexport interface RetentionOptions {\n  versionId: string\n  mode?: RETENTION_MODES\n  retainUntilDate?: IsoDate\n  governanceBypass?: boolean\n}\nexport type Retention = RetentionOptions | EmptyObject\nexport type IsoDate = string\nexport type EmptyObject = Record<string, never>\n\nexport type ObjectLockInfo =\n  | {\n      objectLockEnabled: EnabledOrDisabledStatus\n      mode: RETENTION_MODES\n      unit: RETENTION_VALIDITY_UNITS\n      validity: number\n    }\n  | EmptyObject\n\nexport type ObjectLockConfigParam = {\n  ObjectLockEnabled?: 'Enabled' | undefined\n  Rule?:\n    | {\n        DefaultRetention:\n          | {\n              Mode: RETENTION_MODES\n              Days: number\n              Years: number\n            }\n          | EmptyObject\n      }\n    | EmptyObject\n}\n\nexport type VersioningEnabled = 'Enabled'\nexport type VersioningSuspended = 'Suspended'\n\nexport type TaggingOpts = {\n  versionId: string\n}\n\nexport type PutTaggingParams = {\n  bucketName: string\n  objectName?: string\n  tags: Tags\n  putOpts?: TaggingOpts\n}\n\nexport type RemoveTaggingParams = {\n  bucketName: string\n  objectName?: string\n  removeOpts?: TaggingOpts\n}\n\nexport type InputSerialization = {\n  CompressionType?: 'NONE' | 'GZIP' | 'BZIP2'\n  CSV?: {\n    AllowQuotedRecordDelimiter?: boolean\n    Comments?: string\n    FieldDelimiter?: string\n    FileHeaderInfo?: 'NONE' | 'IGNORE' | 'USE'\n    QuoteCharacter?: string\n    QuoteEscapeCharacter?: string\n    RecordDelimiter?: string\n  }\n  JSON?: {\n    Type: 'DOCUMENT' | 'LINES'\n  }\n  Parquet?: EmptyObject\n}\n\nexport type OutputSerialization = {\n  CSV?: {\n    FieldDelimiter?: string\n    QuoteCharacter?: string\n    QuoteEscapeCharacter?: string\n    QuoteFields?: string\n    RecordDelimiter?: string\n  }\n  JSON?: {\n    RecordDelimiter?: string\n  }\n}\n\nexport type SelectProgress = { Enabled: boolean }\nexport type ScanRange = { Start: number; End: number }\nexport type SelectOptions = {\n  expression: string\n  expressionType?: string\n  inputSerialization: InputSerialization\n  outputSerialization: OutputSerialization\n  requestProgress?: SelectProgress\n  scanRange?: ScanRange\n}\nexport type Expiration = {\n  Date?: string\n  Days: number\n  DeleteMarker?: boolean\n  DeleteAll?: boolean\n}\n\nexport type RuleFilterAnd = {\n  Prefix: string\n  Tags: Tag[]\n}\nexport type RuleFilter = {\n  And?: RuleFilterAnd\n  Prefix: string\n  Tag?: Tag[]\n}\n\nexport type NoncurrentVersionExpiration = {\n  NoncurrentDays: number\n  NewerNoncurrentVersions?: number\n}\n\nexport type NoncurrentVersionTransition = {\n  StorageClass: string\n  NoncurrentDays?: number\n  NewerNoncurrentVersions?: number\n}\n\nexport type Transition = {\n  Date?: string\n  StorageClass: string\n  Days: number\n}\nexport type AbortIncompleteMultipartUpload = {\n  DaysAfterInitiation: number\n}\nexport type LifecycleRule = {\n  AbortIncompleteMultipartUpload?: AbortIncompleteMultipartUpload\n  ID: string\n  Prefix?: string\n  Status?: string\n  Expiration?: Expiration\n  Filter?: RuleFilter\n  NoncurrentVersionExpiration?: NoncurrentVersionExpiration\n  NoncurrentVersionTransition?: NoncurrentVersionTransition\n  Transition?: Transition\n}\n\nexport type LifecycleConfig = {\n  Rule: LifecycleRule[]\n}\n\nexport type LifeCycleConfigParam = LifecycleConfig | null | undefined | ''\n\nexport type ApplySSEByDefault = {\n  KmsMasterKeyID?: string\n  SSEAlgorithm: string\n}\n\nexport type EncryptionRule = {\n  ApplyServerSideEncryptionByDefault?: ApplySSEByDefault\n}\n\nexport type EncryptionConfig = {\n  Rule: EncryptionRule[]\n}\n\nexport type GetObjectRetentionOpts = {\n  versionId: string\n}\n\nexport type ObjectRetentionInfo = {\n  mode: RETENTION_MODES\n  retainUntilDate: string\n}\n\nexport type RemoveObjectsEntry = {\n  name: string\n  versionId?: string\n}\nexport type ObjectName = string\n\nexport type RemoveObjectsParam = ObjectName[] | RemoveObjectsEntry[]\n\nexport type RemoveObjectsRequestEntry = {\n  Key: string\n  VersionId?: string\n}\n\nexport type RemoveObjectsResponse =\n  | null\n  | undefined\n  | {\n      Error?: {\n        Code?: string\n        Message?: string\n        Key?: string\n        VersionId?: string\n      }\n    }\n\nexport type CopyObjectResultV1 = {\n  etag: string\n  lastModified: string | Date\n}\nexport type CopyObjectResultV2 = {\n  Bucket?: string\n  Key?: string\n  LastModified: string | Date\n  MetaData?: ResponseHeader\n  VersionId?: string | null\n  SourceVersionId?: string | null\n  Etag?: string\n  Size?: number\n}\n\nexport type CopyObjectResult = CopyObjectResultV1 | CopyObjectResultV2\nexport type CopyObjectParams = [CopySourceOptions, CopyDestinationOptions] | [string, string, string, CopyConditions?]\n\nexport type ExcludedPrefix = {\n  Prefix: string\n}\nexport type BucketVersioningConfiguration = {\n  Status: VersioningEnabled | VersioningSuspended\n  /* Below are minio only extensions */\n  MFADelete?: string\n  ExcludedPrefixes?: ExcludedPrefix[]\n  ExcludeFolders?: boolean\n}\n\nexport type UploadPartConfig = {\n  bucketName: string\n  objectName: string\n  uploadID: string\n  partNumber: number\n  headers: RequestHeaders\n  sourceObj: string\n}\n\nexport type PreSignRequestParams = { [key: string]: string }\n\n/** List object api types **/\n\n// Common types\nexport type CommonPrefix = {\n  Prefix: string\n}\n\nexport type Owner = {\n  ID: string\n  DisplayName: string\n}\n\nexport type Metadata = {\n  Items: MetadataItem[]\n}\n\nexport type ObjectInfo = {\n  key?: string\n  name?: string\n  lastModified?: Date // time string of format \"2006-01-02T15:04:05.000Z\"\n  etag?: string\n  owner?: Owner\n  storageClass?: string\n  userMetadata?: Metadata\n  userTags?: string\n  prefix?: string\n  size?: number\n}\n\nexport type ListObjectQueryRes = {\n  isTruncated?: boolean\n  nextMarker?: string\n  objects?: ObjectInfo[]\n  // version listing\n  keyMarker?: string\n  versionIdMarker?: string\n}\n\nexport type ListObjectQueryOpts = {\n  Delimiter?: string\n  MaxKeys?: number\n  IncludeVersion?: boolean\n  // version listing\n  keyMarker?: string\n  versionIdMarker?: string\n}\n/** List object api types **/\n\nexport type ObjectVersionEntry = {\n  IsLatest?: string\n  VersionId?: string\n}\n\nexport type ObjectRowEntry = ObjectVersionEntry & {\n  Key: string\n  LastModified?: Date | undefined\n  ETag?: string\n  Size?: string\n  Owner?: Owner\n  StorageClass?: string\n}\n\nexport interface ListBucketResultV1 {\n  Name?: string\n  Prefix?: string\n  ContinuationToken?: string\n  KeyCount?: string\n  Marker?: string\n  MaxKeys?: string\n  Delimiter?: string\n  IsTruncated?: boolean\n  Contents?: ObjectRowEntry[]\n  NextKeyMarker?: string\n  CommonPrefixes?: CommonPrefix[]\n  Version?: ObjectRowEntry[]\n  DeleteMarker?: ObjectRowEntry[]\n  VersionIdMarker?: string\n  NextVersionIdMarker?: string\n  NextMarker?: string\n}\n"],"names":["ENCRYPTION_TYPES","SSEC","KMS","RETENTION_MODES","GOVERNANCE","COMPLIANCE","RETENTION_VALIDITY_UNITS","DAYS","YEARS","LEGAL_HOLD_STATUS","ENABLED","DISABLED"],"mappings":"AAkBA,2FAAA;;;;;;;;;;;AAQO,MAAMA,gBAAgB,GAAG;IAC9BC,IAAI,EAAE,OAAO;IACbC,GAAG,EAAE;AACP,CAAU;AAcH,MAAMC,eAAe,GAAG;IAC7BC,UAAU,EAAE,YAAY;IACxBC,UAAU,EAAE;AACd,CAAU;AAGH,MAAMC,wBAAwB,GAAG;IACtCC,IAAI,EAAE,MAAM;IACZC,KAAK,EAAE;AACT,CAAU;AAGH,MAAMC,iBAAiB,GAAG;IAC/BC,OAAO,EAAE,IAAI;IACbC,QAAQ,EAAE;AACZ,CAAU,EA6FV,4BAAA,IA2DA,4BAAA,IAOA;;CAEA,IAwPA,2BAAA,IAEA,eAAA;CA4CA,2BAAA"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/helper.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as crypto from 'node:crypto'\nimport * as stream from 'node:stream'\n\nimport { XMLParser } from 'fast-xml-parser'\nimport ipaddr from 'ipaddr.js'\nimport _ from 'lodash'\nimport * as mime from 'mime-types'\n\nimport { fsp, fstat } from './async.ts'\nimport type { Binary, Encryption, ObjectMetaData, RequestHeaders, ResponseHeader } from './type.ts'\nimport { ENCRYPTION_TYPES } from './type.ts'\n\nconst MetaDataHeaderPrefix = 'x-amz-meta-'\n\nexport function hashBinary(buf: Buffer, enableSHA256: boolean) {\n  let sha256sum = ''\n  if (enableSHA256) {\n    sha256sum = crypto.createHash('sha256').update(buf).digest('hex')\n  }\n  const md5sum = crypto.createHash('md5').update(buf).digest('base64')\n\n  return { md5sum, sha256sum }\n}\n\n// S3 percent-encodes some extra non-standard characters in a URI . So comply with S3.\nconst encodeAsHex = (c: string) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\nexport function uriEscape(uriStr: string): string {\n  return encodeURIComponent(uriStr).replace(/[!'()*]/g, encodeAsHex)\n}\n\nexport function uriResourceEscape(string: string) {\n  return uriEscape(string).replace(/%2F/g, '/')\n}\n\nexport function getScope(region: string, date: Date, serviceName = 's3') {\n  return `${makeDateShort(date)}/${region}/${serviceName}/aws4_request`\n}\n\n/**\n * isAmazonEndpoint - true if endpoint is 's3.amazonaws.com' or 's3.cn-north-1.amazonaws.com.cn'\n */\nexport function isAmazonEndpoint(endpoint: string) {\n  return endpoint === 's3.amazonaws.com' || endpoint === 's3.cn-north-1.amazonaws.com.cn'\n}\n\n/**\n * isVirtualHostStyle - verify if bucket name is support with virtual\n * hosts. bucketNames with periods should be always treated as path\n * style if the protocol is 'https:', this is due to SSL wildcard\n * limitation. For all other buckets and Amazon S3 endpoint we will\n * default to virtual host style.\n */\nexport function isVirtualHostStyle(endpoint: string, protocol: string, bucket: string, pathStyle: boolean) {\n  if (protocol === 'https:' && bucket.includes('.')) {\n    return false\n  }\n  return isAmazonEndpoint(endpoint) || !pathStyle\n}\n\nexport function isValidIP(ip: string) {\n  return ipaddr.isValid(ip)\n}\n\n/**\n * @returns if endpoint is valid domain.\n */\nexport function isValidEndpoint(endpoint: string) {\n  return isValidDomain(endpoint) || isValidIP(endpoint)\n}\n\n/**\n * @returns if input host is a valid domain.\n */\nexport function isValidDomain(host: string) {\n  if (!isString(host)) {\n    return false\n  }\n  // See RFC 1035, RFC 3696.\n  if (host.length === 0 || host.length > 255) {\n    return false\n  }\n  // Host cannot start or end with a '-'\n  if (host[0] === '-' || host.slice(-1) === '-') {\n    return false\n  }\n  // Host cannot start or end with a '_'\n  if (host[0] === '_' || host.slice(-1) === '_') {\n    return false\n  }\n  // Host cannot start with a '.'\n  if (host[0] === '.') {\n    return false\n  }\n\n  const nonAlphaNumerics = '`~!@#$%^&*()+={}[]|\\\\\"\\';:><?/'\n  // All non alphanumeric characters are invalid.\n  for (const char of nonAlphaNumerics) {\n    if (host.includes(char)) {\n      return false\n    }\n  }\n  // No need to regexp match, since the list is non-exhaustive.\n  // We let it be valid and fail later.\n  return true\n}\n\n/**\n * Probes contentType using file extensions.\n *\n * @example\n * ```\n * // return 'image/png'\n * probeContentType('file.png')\n * ```\n */\nexport function probeContentType(path: string) {\n  let contentType = mime.lookup(path)\n  if (!contentType) {\n    contentType = 'application/octet-stream'\n  }\n  return contentType\n}\n\n/**\n * is input port valid.\n */\nexport function isValidPort(port: unknown): port is number {\n  // Convert string port to number if needed\n  const portNum = typeof port === 'string' ? parseInt(port, 10) : port\n\n  // verify if port is a valid number\n  if (!isNumber(portNum) || isNaN(portNum)) {\n    return false\n  }\n\n  // port `0` is valid and special case\n  return 0 <= portNum && portNum <= 65535\n}\n\nexport function isValidBucketName(bucket: unknown) {\n  if (!isString(bucket)) {\n    return false\n  }\n\n  // bucket length should be less than and no more than 63\n  // characters long.\n  if (bucket.length < 3 || bucket.length > 63) {\n    return false\n  }\n  // bucket with successive periods is invalid.\n  if (bucket.includes('..')) {\n    return false\n  }\n  // bucket cannot have ip address style.\n  if (/[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+/.test(bucket)) {\n    return false\n  }\n  // bucket should begin with alphabet/number and end with alphabet/number,\n  // with alphabet/number/.- in the middle.\n  if (/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(bucket)) {\n    return true\n  }\n  return false\n}\n\n/**\n * check if objectName is a valid object name\n */\nexport function isValidObjectName(objectName: unknown) {\n  if (!isValidPrefix(objectName)) {\n    return false\n  }\n\n  return objectName.length !== 0\n}\n\n/**\n * check if prefix is valid\n */\nexport function isValidPrefix(prefix: unknown): prefix is string {\n  if (!isString(prefix)) {\n    return false\n  }\n  if (prefix.length > 1024) {\n    return false\n  }\n  return true\n}\n\n/**\n * check if typeof arg number\n */\nexport function isNumber(arg: unknown): arg is number {\n  return typeof arg === 'number'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type AnyFunction = (...args: any[]) => any\n\n/**\n * check if typeof arg function\n */\nexport function isFunction(arg: unknown): arg is AnyFunction {\n  return typeof arg === 'function'\n}\n\n/**\n * check if typeof arg string\n */\nexport function isString(arg: unknown): arg is string {\n  return typeof arg === 'string'\n}\n\n/**\n * check if typeof arg object\n */\nexport function isObject(arg: unknown): arg is object {\n  return typeof arg === 'object' && arg !== null\n}\n/**\n * check if typeof arg is plain object\n */\nexport function isPlainObject(arg: unknown): arg is Record<string, unknown> {\n  return Object.prototype.toString.call(arg) === '[object Object]'\n}\n/**\n * check if object is readable stream\n */\nexport function isReadableStream(arg: unknown): arg is stream.Readable {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  return isObject(arg) && isFunction((arg as stream.Readable)._read)\n}\n\n/**\n * check if arg is boolean\n */\nexport function isBoolean(arg: unknown): arg is boolean {\n  return typeof arg === 'boolean'\n}\n\nexport function isEmpty(o: unknown): o is null | undefined {\n  return _.isEmpty(o)\n}\n\nexport function isEmptyObject(o: Record<string, unknown>): boolean {\n  return Object.values(o).filter((x) => x !== undefined).length !== 0\n}\n\nexport function isDefined<T>(o: T): o is Exclude<T, null | undefined> {\n  return o !== null && o !== undefined\n}\n\n/**\n * check if arg is a valid date\n */\nexport function isValidDate(arg: unknown): arg is Date {\n  // @ts-expect-error checknew Date(Math.NaN)\n  return arg instanceof Date && !isNaN(arg)\n}\n\n/**\n * Create a Date string with format: 'YYYYMMDDTHHmmss' + Z\n */\nexport function makeDateLong(date?: Date): string {\n  date = date || new Date()\n\n  // Gives format like: '2017-08-07T16:28:59.889Z'\n  const s = date.toISOString()\n\n  return s.slice(0, 4) + s.slice(5, 7) + s.slice(8, 13) + s.slice(14, 16) + s.slice(17, 19) + 'Z'\n}\n\n/**\n * Create a Date string with format: 'YYYYMMDD'\n */\nexport function makeDateShort(date?: Date) {\n  date = date || new Date()\n\n  // Gives format like: '2017-08-07T16:28:59.889Z'\n  const s = date.toISOString()\n\n  return s.slice(0, 4) + s.slice(5, 7) + s.slice(8, 10)\n}\n\n/**\n * pipesetup sets up pipe() from left to right os streams array\n * pipesetup will also make sure that error emitted at any of the upstream Stream\n * will be emitted at the last stream. This makes error handling simple\n */\nexport function pipesetup(...streams: [stream.Readable, ...stream.Duplex[], stream.Writable]) {\n  // @ts-expect-error ts can't narrow this\n  return streams.reduce((src: stream.Readable, dst: stream.Writable) => {\n    src.on('error', (err) => dst.emit('error', err))\n    return src.pipe(dst)\n  })\n}\n\n/**\n * return a Readable stream that emits data\n */\nexport function readableStream(data: unknown): stream.Readable {\n  const s = new stream.Readable()\n  s._read = () => {}\n  s.push(data)\n  s.push(null)\n  return s\n}\n\n/**\n * Process metadata to insert appropriate value to `content-type` attribute\n */\nexport function insertContentType(metaData: ObjectMetaData, filePath: string): ObjectMetaData {\n  // check if content-type attribute present in metaData\n  for (const key in metaData) {\n    if (key.toLowerCase() === 'content-type') {\n      return metaData\n    }\n  }\n\n  // if `content-type` attribute is not present in metadata, then infer it from the extension in filePath\n  return {\n    ...metaData,\n    'content-type': probeContentType(filePath),\n  }\n}\n\n/**\n * Function prepends metadata with the appropriate prefix if it is not already on\n */\nexport function prependXAMZMeta(metaData?: ObjectMetaData): RequestHeaders {\n  if (!metaData) {\n    return {}\n  }\n\n  return _.mapKeys(metaData, (value, key) => {\n    if (isAmzHeader(key) || isSupportedHeader(key) || isStorageClassHeader(key)) {\n      return key\n    }\n\n    return MetaDataHeaderPrefix + key\n  })\n}\n\n/**\n * Checks if it is a valid header according to the AmazonS3 API\n */\nexport function isAmzHeader(key: string) {\n  const temp = key.toLowerCase()\n  return (\n    temp.startsWith(MetaDataHeaderPrefix) ||\n    temp === 'x-amz-acl' ||\n    temp.startsWith('x-amz-server-side-encryption-') ||\n    temp === 'x-amz-server-side-encryption'\n  )\n}\n\n/**\n * Checks if it is a supported Header\n */\nexport function isSupportedHeader(key: string) {\n  const supported_headers = [\n    'content-type',\n    'cache-control',\n    'content-encoding',\n    'content-disposition',\n    'content-language',\n    'x-amz-website-redirect-location',\n    'if-none-match',\n    'if-match',\n  ]\n  return supported_headers.includes(key.toLowerCase())\n}\n\n/**\n * Checks if it is a storage header\n */\nexport function isStorageClassHeader(key: string) {\n  return key.toLowerCase() === 'x-amz-storage-class'\n}\n\nexport function extractMetadata(headers: ResponseHeader) {\n  return _.mapKeys(\n    _.pickBy(headers, (value, key) => isSupportedHeader(key) || isStorageClassHeader(key) || isAmzHeader(key)),\n    (value, key) => {\n      const lower = key.toLowerCase()\n      if (lower.startsWith(MetaDataHeaderPrefix)) {\n        return lower.slice(MetaDataHeaderPrefix.length)\n      }\n\n      return key\n    },\n  )\n}\n\nexport function getVersionId(headers: ResponseHeader = {}) {\n  return headers['x-amz-version-id'] || null\n}\n\nexport function getSourceVersionId(headers: ResponseHeader = {}) {\n  return headers['x-amz-copy-source-version-id'] || null\n}\n\nexport function sanitizeETag(etag = ''): string {\n  const replaceChars: Record<string, string> = {\n    '\"': '',\n    '&quot;': '',\n    '&#34;': '',\n    '&QUOT;': '',\n    '&#x00022': '',\n  }\n  return etag.replace(/^(\"|&quot;|&#34;)|(\"|&quot;|&#34;)$/g, (m) => replaceChars[m] as string)\n}\n\nexport function toMd5(payload: Binary): string {\n  // use string from browser and buffer from nodejs\n  // browser support is tested only against minio server\n  return crypto.createHash('md5').update(Buffer.from(payload)).digest().toString('base64')\n}\n\nexport function toSha256(payload: Binary): string {\n  return crypto.createHash('sha256').update(payload).digest('hex')\n}\n\n/**\n * toArray returns a single element array with param being the element,\n * if param is just a string, and returns 'param' back if it is an array\n * So, it makes sure param is always an array\n */\nexport function toArray<T = unknown>(param: T | T[]): Array<T> {\n  if (!Array.isArray(param)) {\n    return [param] as T[]\n  }\n  return param\n}\n\nexport function sanitizeObjectKey(objectName: string): string {\n  // + symbol characters are not decoded as spaces in JS. so replace them first and decode to get the correct result.\n  const asStrName = (objectName ? objectName.toString() : '').replace(/\\+/g, ' ')\n  return decodeURIComponent(asStrName)\n}\n\nexport function sanitizeSize(size?: string): number | undefined {\n  return size ? Number.parseInt(size) : undefined\n}\n\nexport const PART_CONSTRAINTS = {\n  // absMinPartSize - absolute minimum part size (5 MiB)\n  ABS_MIN_PART_SIZE: 1024 * 1024 * 5,\n  // MIN_PART_SIZE - minimum part size 16MiB per object after which\n  MIN_PART_SIZE: 1024 * 1024 * 16,\n  // MAX_PARTS_COUNT - maximum number of parts for a single multipart session.\n  MAX_PARTS_COUNT: 10000,\n  // MAX_PART_SIZE - maximum part size 5GiB for a single multipart upload\n  // operation.\n  MAX_PART_SIZE: 1024 * 1024 * 1024 * 5,\n  // MAX_SINGLE_PUT_OBJECT_SIZE - maximum size 5GiB of object per PUT\n  // operation.\n  MAX_SINGLE_PUT_OBJECT_SIZE: 1024 * 1024 * 1024 * 5,\n  // MAX_MULTIPART_PUT_OBJECT_SIZE - maximum size 5TiB of object for\n  // Multipart operation.\n  MAX_MULTIPART_PUT_OBJECT_SIZE: 1024 * 1024 * 1024 * 1024 * 5,\n}\n\nconst GENERIC_SSE_HEADER = 'X-Amz-Server-Side-Encryption'\n\nconst ENCRYPTION_HEADERS = {\n  // sseGenericHeader is the AWS SSE header used for SSE-S3 and SSE-KMS.\n  sseGenericHeader: GENERIC_SSE_HEADER,\n  // sseKmsKeyID is the AWS SSE-KMS key id.\n  sseKmsKeyID: GENERIC_SSE_HEADER + '-Aws-Kms-Key-Id',\n} as const\n\n/**\n * Return Encryption headers\n * @param encConfig\n * @returns an object with key value pairs that can be used in headers.\n */\nexport function getEncryptionHeaders(encConfig: Encryption): RequestHeaders {\n  const encType = encConfig.type\n\n  if (!isEmpty(encType)) {\n    if (encType === ENCRYPTION_TYPES.SSEC) {\n      return {\n        [ENCRYPTION_HEADERS.sseGenericHeader]: 'AES256',\n      }\n    } else if (encType === ENCRYPTION_TYPES.KMS) {\n      return {\n        [ENCRYPTION_HEADERS.sseGenericHeader]: encConfig.SSEAlgorithm,\n        [ENCRYPTION_HEADERS.sseKmsKeyID]: encConfig.KMSMasterKeyID,\n      }\n    }\n  }\n\n  return {}\n}\n\nexport function partsRequired(size: number): number {\n  const maxPartSize = PART_CONSTRAINTS.MAX_MULTIPART_PUT_OBJECT_SIZE / (PART_CONSTRAINTS.MAX_PARTS_COUNT - 1)\n  let requiredPartSize = size / maxPartSize\n  if (size % maxPartSize > 0) {\n    requiredPartSize++\n  }\n  requiredPartSize = Math.trunc(requiredPartSize)\n  return requiredPartSize\n}\n\n/**\n * calculateEvenSplits - computes splits for a source and returns\n * start and end index slices. Splits happen evenly to be sure that no\n * part is less than 5MiB, as that could fail the multipart request if\n * it is not the last part.\n */\nexport function calculateEvenSplits<T extends { Start?: number }>(\n  size: number,\n  objInfo: T,\n): {\n  startIndex: number[]\n  objInfo: T\n  endIndex: number[]\n} | null {\n  if (size === 0) {\n    return null\n  }\n  const reqParts = partsRequired(size)\n  const startIndexParts: number[] = []\n  const endIndexParts: number[] = []\n\n  let start = objInfo.Start\n  if (isEmpty(start) || start === -1) {\n    start = 0\n  }\n  const divisorValue = Math.trunc(size / reqParts)\n\n  const reminderValue = size % reqParts\n\n  let nextStart = start\n\n  for (let i = 0; i < reqParts; i++) {\n    let curPartSize = divisorValue\n    if (i < reminderValue) {\n      curPartSize++\n    }\n\n    const currentStart = nextStart\n    const currentEnd = currentStart + curPartSize - 1\n    nextStart = currentEnd + 1\n\n    startIndexParts.push(currentStart)\n    endIndexParts.push(currentEnd)\n  }\n\n  return { startIndex: startIndexParts, endIndex: endIndexParts, objInfo: objInfo }\n}\nconst fxp = new XMLParser({ numberParseOptions: { eNotation: false, hex: true, leadingZeros: true } })\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parseXml(xml: string): any {\n  const result = fxp.parse(xml)\n  if (result.Error) {\n    throw result.Error\n  }\n\n  return result\n}\n\n/**\n * get content size of object content to upload\n */\nexport async function getContentLength(s: stream.Readable | Buffer | string): Promise<number | null> {\n  // use length property of string | Buffer\n  if (typeof s === 'string' || Buffer.isBuffer(s)) {\n    return s.length\n  }\n\n  // property of `fs.ReadStream`\n  const filePath = (s as unknown as Record<string, unknown>).path as string | undefined\n  if (filePath && typeof filePath === 'string') {\n    const stat = await fsp.lstat(filePath)\n    return stat.size\n  }\n\n  // property of `fs.ReadStream`\n  const fd = (s as unknown as Record<string, unknown>).fd as number | null | undefined\n  if (fd && typeof fd === 'number') {\n    const stat = await fstat(fd)\n    return stat.size\n  }\n\n  return null\n}\n"],"names":["crypto","stream","XMLParser","ipaddr","_","mime","fsp","fstat","ENCRYPTION_TYPES","MetaDataHeaderPrefix","hashBinary","buf","enableSHA256","sha256sum","createHash","update","digest","md5sum","encodeAsHex","c","charCodeAt","toString","toUpperCase","uriEscape","uriStr","encodeURIComponent","replace","uriResourceEscape","string","getScope","region","date","serviceName","makeDateShort","isAmazonEndpoint","endpoint","isVirtualHostStyle","protocol","bucket","pathStyle","includes","isValidIP","ip","isValid","isValidEndpoint","isValidDomain","host","isString","length","slice","nonAlphaNumerics","char","probeContentType","path","contentType","lookup","isValidPort","port","portNum","parseInt","isNumber","isNaN","isValidBucketName","test","isValidObjectName","objectName","isValidPrefix","prefix","arg","isFunction","isObject","isPlainObject","Object","prototype","call","isReadableStream","_read","isBoolean","isEmpty","o","isEmptyObject","values","filter","x","undefined","isDefined","isValidDate","Date","makeDateLong","s","toISOString","pipesetup","streams","reduce","src","dst","on","err","emit","pipe","readableStream","data","Readable","push","insertContentType","metaData","filePath","key","toLowerCase","prependXAMZMeta","mapKeys","value","isAmzHeader","isSupportedHeader","isStorageClassHeader","temp","startsWith","supported_headers","extractMetadata","headers","pickBy","lower","getVersionId","getSourceVersionId","sanitizeETag","etag","replaceChars","m","toMd5","payload","Buffer","from","toSha256","toArray","param","Array","isArray","sanitizeObjectKey","asStrName","decodeURIComponent","sanitizeSize","size","Number","PART_CONSTRAINTS","ABS_MIN_PART_SIZE","MIN_PART_SIZE","MAX_PARTS_COUNT","MAX_PART_SIZE","MAX_SINGLE_PUT_OBJECT_SIZE","MAX_MULTIPART_PUT_OBJECT_SIZE","GENERIC_SSE_HEADER","ENCRYPTION_HEADERS","sseGenericHeader","sseKmsKeyID","getEncryptionHeaders","encConfig","encType","type","SSEC","KMS","SSEAlgorithm","KMSMasterKeyID","partsRequired","maxPartSize","requiredPartSize","Math","trunc","calculateEvenSplits","objInfo","reqParts","startIndexParts","endIndexParts","start","Start","divisorValue","reminderValue","nextStart","i","curPartSize","currentStart","currentEnd","startIndex","endIndex","fxp","numberParseOptions","eNotation","hex","leadingZeros","parseXml","xml","result","parse","Error","getContentLength","isBuffer","stat","lstat","fd"],"mappings":"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"}},
    {"offset": {"line": 798, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/helpers.ts"],"sourcesContent":["import * as fs from 'node:fs'\nimport * as path from 'node:path'\n\nimport * as querystring from 'query-string'\n\nimport * as errors from './errors.ts'\nimport {\n  getEncryptionHeaders,\n  isEmpty,\n  isEmptyObject,\n  isNumber,\n  isObject,\n  isString,\n  isValidBucketName,\n  isValidObjectName,\n} from './internal/helper.ts'\nimport type { Encryption, ObjectMetaData, RequestHeaders } from './internal/type.ts'\nimport { RETENTION_MODES } from './internal/type.ts'\n\nexport { ENCRYPTION_TYPES, LEGAL_HOLD_STATUS, RETENTION_MODES, RETENTION_VALIDITY_UNITS } from './internal/type.ts'\n\nexport const DEFAULT_REGION = 'us-east-1'\n\nexport const PRESIGN_EXPIRY_DAYS_MAX = 24 * 60 * 60 * 7 // 7 days in seconds\n\nexport interface ICopySourceOptions {\n  Bucket: string\n  Object: string\n  /**\n   * Valid versionId\n   */\n  VersionID?: string\n  /**\n   * Etag to match\n   */\n  MatchETag?: string\n  /**\n   * Etag to exclude\n   */\n  NoMatchETag?: string\n  /**\n   * Modified Date of the object/part.  UTC Date in string format\n   */\n  MatchModifiedSince?: string | null\n  /**\n   * Modified Date of the object/part to exclude UTC Date in string format\n   */\n  MatchUnmodifiedSince?: string | null\n  /**\n   * true or false Object range to match\n   */\n  MatchRange?: boolean\n  Start?: number\n  End?: number\n  Encryption?: Encryption\n}\n\nexport class CopySourceOptions {\n  public readonly Bucket: string\n  public readonly Object: string\n  public readonly VersionID: string\n  public MatchETag: string\n  private readonly NoMatchETag: string\n  private readonly MatchModifiedSince: string | null\n  private readonly MatchUnmodifiedSince: string | null\n  public readonly MatchRange: boolean\n  public readonly Start: number\n  public readonly End: number\n  private readonly Encryption?: Encryption\n\n  constructor({\n    Bucket,\n    Object,\n    VersionID = '',\n    MatchETag = '',\n    NoMatchETag = '',\n    MatchModifiedSince = null,\n    MatchUnmodifiedSince = null,\n    MatchRange = false,\n    Start = 0,\n    End = 0,\n    Encryption = undefined,\n  }: ICopySourceOptions) {\n    this.Bucket = Bucket\n    this.Object = Object\n    this.VersionID = VersionID\n    this.MatchETag = MatchETag\n    this.NoMatchETag = NoMatchETag\n    this.MatchModifiedSince = MatchModifiedSince\n    this.MatchUnmodifiedSince = MatchUnmodifiedSince\n    this.MatchRange = MatchRange\n    this.Start = Start\n    this.End = End\n    this.Encryption = Encryption\n  }\n\n  validate() {\n    if (!isValidBucketName(this.Bucket)) {\n      throw new errors.InvalidBucketNameError('Invalid Source bucket name: ' + this.Bucket)\n    }\n    if (!isValidObjectName(this.Object)) {\n      throw new errors.InvalidObjectNameError(`Invalid Source object name: ${this.Object}`)\n    }\n    if ((this.MatchRange && this.Start !== -1 && this.End !== -1 && this.Start > this.End) || this.Start < 0) {\n      throw new errors.InvalidObjectNameError('Source start must be non-negative, and start must be at most end.')\n    } else if ((this.MatchRange && !isNumber(this.Start)) || !isNumber(this.End)) {\n      throw new errors.InvalidObjectNameError(\n        'MatchRange is specified. But Invalid Start and End values are specified.',\n      )\n    }\n\n    return true\n  }\n\n  getHeaders(): RequestHeaders {\n    const headerOptions: RequestHeaders = {}\n    headerOptions['x-amz-copy-source'] = encodeURI(this.Bucket + '/' + this.Object)\n\n    if (!isEmpty(this.VersionID)) {\n      headerOptions['x-amz-copy-source'] = `${encodeURI(this.Bucket + '/' + this.Object)}?versionId=${this.VersionID}`\n    }\n\n    if (!isEmpty(this.MatchETag)) {\n      headerOptions['x-amz-copy-source-if-match'] = this.MatchETag\n    }\n    if (!isEmpty(this.NoMatchETag)) {\n      headerOptions['x-amz-copy-source-if-none-match'] = this.NoMatchETag\n    }\n\n    if (!isEmpty(this.MatchModifiedSince)) {\n      headerOptions['x-amz-copy-source-if-modified-since'] = this.MatchModifiedSince\n    }\n    if (!isEmpty(this.MatchUnmodifiedSince)) {\n      headerOptions['x-amz-copy-source-if-unmodified-since'] = this.MatchUnmodifiedSince\n    }\n\n    return headerOptions\n  }\n}\n\n/**\n * @deprecated use nodejs fs module\n */\nexport function removeDirAndFiles(dirPath: string, removeSelf = true) {\n  if (removeSelf) {\n    return fs.rmSync(dirPath, { recursive: true, force: true })\n  }\n\n  fs.readdirSync(dirPath).forEach((item) => {\n    fs.rmSync(path.join(dirPath, item), { recursive: true, force: true })\n  })\n}\n\nexport interface ICopyDestinationOptions {\n  /**\n   * Bucket name\n   */\n  Bucket: string\n  /**\n   * Object Name for the destination (composed/copied) object defaults\n   */\n  Object: string\n  /**\n   * Encryption configuration defaults to {}\n   * @default {}\n   */\n  Encryption?: Encryption\n  UserMetadata?: ObjectMetaData\n  /**\n   * query-string encoded string or Record<string, string> Object\n   */\n  UserTags?: Record<string, string> | string\n  LegalHold?: 'on' | 'off'\n  /**\n   * UTC Date String\n   */\n  RetainUntilDate?: string\n  Mode?: RETENTION_MODES\n  MetadataDirective?: 'COPY' | 'REPLACE'\n  /**\n   * Extra headers for the target object\n   */\n  Headers?: Record<string, string>\n}\n\nexport class CopyDestinationOptions {\n  public readonly Bucket: string\n  public readonly Object: string\n  private readonly Encryption?: Encryption\n  private readonly UserMetadata?: ObjectMetaData\n  private readonly UserTags?: Record<string, string> | string\n  private readonly LegalHold?: 'on' | 'off'\n  private readonly RetainUntilDate?: string\n  private readonly Mode?: RETENTION_MODES\n  private readonly MetadataDirective?: string\n  private readonly Headers?: Record<string, string>\n\n  constructor({\n    Bucket,\n    Object,\n    Encryption,\n    UserMetadata,\n    UserTags,\n    LegalHold,\n    RetainUntilDate,\n    Mode,\n    MetadataDirective,\n    Headers,\n  }: ICopyDestinationOptions) {\n    this.Bucket = Bucket\n    this.Object = Object\n    this.Encryption = Encryption ?? undefined // null input will become undefined, easy for runtime assert\n    this.UserMetadata = UserMetadata\n    this.UserTags = UserTags\n    this.LegalHold = LegalHold\n    this.Mode = Mode // retention mode\n    this.RetainUntilDate = RetainUntilDate\n    this.MetadataDirective = MetadataDirective\n    this.Headers = Headers\n  }\n\n  getHeaders(): RequestHeaders {\n    const replaceDirective = 'REPLACE'\n    const headerOptions: RequestHeaders = {}\n\n    const userTags = this.UserTags\n    if (!isEmpty(userTags)) {\n      headerOptions['X-Amz-Tagging-Directive'] = replaceDirective\n      headerOptions['X-Amz-Tagging'] = isObject(userTags)\n        ? querystring.stringify(userTags)\n        : isString(userTags)\n        ? userTags\n        : ''\n    }\n\n    if (this.Mode) {\n      headerOptions['X-Amz-Object-Lock-Mode'] = this.Mode // GOVERNANCE or COMPLIANCE\n    }\n\n    if (this.RetainUntilDate) {\n      headerOptions['X-Amz-Object-Lock-Retain-Until-Date'] = this.RetainUntilDate // needs to be UTC.\n    }\n\n    if (this.LegalHold) {\n      headerOptions['X-Amz-Object-Lock-Legal-Hold'] = this.LegalHold // ON or OFF\n    }\n\n    if (this.UserMetadata) {\n      for (const [key, value] of Object.entries(this.UserMetadata)) {\n        headerOptions[`X-Amz-Meta-${key}`] = value.toString()\n      }\n    }\n\n    if (this.MetadataDirective) {\n      headerOptions[`X-Amz-Metadata-Directive`] = this.MetadataDirective\n    }\n\n    if (this.Encryption) {\n      const encryptionHeaders = getEncryptionHeaders(this.Encryption)\n      for (const [key, value] of Object.entries(encryptionHeaders)) {\n        headerOptions[key] = value\n      }\n    }\n    if (this.Headers) {\n      for (const [key, value] of Object.entries(this.Headers)) {\n        headerOptions[key] = value\n      }\n    }\n\n    return headerOptions\n  }\n\n  validate() {\n    if (!isValidBucketName(this.Bucket)) {\n      throw new errors.InvalidBucketNameError('Invalid Destination bucket name: ' + this.Bucket)\n    }\n    if (!isValidObjectName(this.Object)) {\n      throw new errors.InvalidObjectNameError(`Invalid Destination object name: ${this.Object}`)\n    }\n    if (!isEmpty(this.UserMetadata) && !isObject(this.UserMetadata)) {\n      throw new errors.InvalidObjectNameError(`Destination UserMetadata should be an object with key value pairs`)\n    }\n\n    if (!isEmpty(this.Mode) && ![RETENTION_MODES.GOVERNANCE, RETENTION_MODES.COMPLIANCE].includes(this.Mode)) {\n      throw new errors.InvalidObjectNameError(\n        `Invalid Mode specified for destination object it should be one of [GOVERNANCE,COMPLIANCE]`,\n      )\n    }\n\n    if (this.Encryption !== undefined && isEmptyObject(this.Encryption)) {\n      throw new errors.InvalidObjectNameError(`Invalid Encryption configuration for destination object `)\n    }\n    return true\n  }\n}\n\n/**\n * maybe this should be a generic type for Records, leave it for later refactor\n */\nexport class SelectResults {\n  private records?: unknown\n  private response?: unknown\n  private stats?: string\n  private progress?: unknown\n\n  constructor({\n    records, // parsed data as stream\n    response, // original response stream\n    stats, // stats as xml\n    progress, // stats as xml\n  }: {\n    records?: unknown\n    response?: unknown\n    stats?: string\n    progress?: unknown\n  }) {\n    this.records = records\n    this.response = response\n    this.stats = stats\n    this.progress = progress\n  }\n\n  setStats(stats: string) {\n    this.stats = stats\n  }\n\n  getStats() {\n    return this.stats\n  }\n\n  setProgress(progress: unknown) {\n    this.progress = progress\n  }\n\n  getProgress() {\n    return this.progress\n  }\n\n  setResponse(response: unknown) {\n    this.response = response\n  }\n\n  getResponse() {\n    return this.response\n  }\n\n  setRecords(records: unknown) {\n    this.records = records\n  }\n\n  getRecords(): unknown {\n    return this.records\n  }\n}\n"],"names":["fs","path","querystring","errors","getEncryptionHeaders","isEmpty","isEmptyObject","isNumber","isObject","isString","isValidBucketName","isValidObjectName","RETENTION_MODES","ENCRYPTION_TYPES","LEGAL_HOLD_STATUS","RETENTION_VALIDITY_UNITS","DEFAULT_REGION","PRESIGN_EXPIRY_DAYS_MAX","CopySourceOptions","constructor","Bucket","Object","VersionID","MatchETag","NoMatchETag","MatchModifiedSince","MatchUnmodifiedSince","MatchRange","Start","End","Encryption","undefined","validate","InvalidBucketNameError","InvalidObjectNameError","getHeaders","headerOptions","encodeURI","removeDirAndFiles","dirPath","removeSelf","rmSync","recursive","force","readdirSync","forEach","item","join","CopyDestinationOptions","UserMetadata","UserTags","LegalHold","RetainUntilDate","Mode","MetadataDirective","Headers","replaceDirective","userTags","stringify","key","value","entries","toString","encryptionHeaders","GOVERNANCE","COMPLIANCE","includes","SelectResults","records","response","stats","progress","setStats","getStats","setProgress","getProgress","setResponse","getResponse","setRecords","getRecords"],"mappings":"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"}},
    {"offset": {"line": 1003, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/signing.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as crypto from 'node:crypto'\n\nimport * as errors from './errors.ts'\nimport { PRESIGN_EXPIRY_DAYS_MAX } from './helpers.ts'\nimport { getScope, isNumber, isObject, isString, makeDateLong, makeDateShort, uriEscape } from './internal/helper.ts'\nimport type { ICanonicalRequest, IRequest, RequestHeaders } from './internal/type.ts'\n\nconst signV4Algorithm = 'AWS4-HMAC-SHA256'\n\n// getCanonicalRequest generate a canonical request of style.\n//\n// canonicalRequest =\n//  <HTTPMethod>\\n\n//  <CanonicalURI>\\n\n//  <CanonicalQueryString>\\n\n//  <CanonicalHeaders>\\n\n//  <SignedHeaders>\\n\n//  <HashedPayload>\n//\nfunction getCanonicalRequest(\n  method: string,\n  path: string,\n  headers: RequestHeaders,\n  signedHeaders: string[],\n  hashedPayload: string,\n): ICanonicalRequest {\n  if (!isString(method)) {\n    throw new TypeError('method should be of type \"string\"')\n  }\n  if (!isString(path)) {\n    throw new TypeError('path should be of type \"string\"')\n  }\n  if (!isObject(headers)) {\n    throw new TypeError('headers should be of type \"object\"')\n  }\n  if (!Array.isArray(signedHeaders)) {\n    throw new TypeError('signedHeaders should be of type \"array\"')\n  }\n  if (!isString(hashedPayload)) {\n    throw new TypeError('hashedPayload should be of type \"string\"')\n  }\n\n  const headersArray = signedHeaders.reduce((acc, i) => {\n    // Trim spaces from the value (required by V4 spec)\n    const val = `${headers[i]}`.replace(/ +/g, ' ')\n    acc.push(`${i.toLowerCase()}:${val}`)\n    return acc\n  }, [] as string[])\n\n  const requestResource = path.split('?')[0]\n  let requestQuery = path.split('?')[1]\n  if (!requestQuery) {\n    requestQuery = ''\n  }\n\n  if (requestQuery) {\n    requestQuery = requestQuery\n      .split('&')\n      .sort()\n      .map((element) => (!element.includes('=') ? element + '=' : element))\n      .join('&')\n  }\n\n  return [\n    method.toUpperCase(),\n    requestResource,\n    requestQuery,\n    headersArray.join('\\n') + '\\n',\n    signedHeaders.join(';').toLowerCase(),\n    hashedPayload,\n  ].join('\\n')\n}\n\n// generate a credential string\nfunction getCredential(accessKey: string, region: string, requestDate?: Date, serviceName = 's3') {\n  if (!isString(accessKey)) {\n    throw new TypeError('accessKey should be of type \"string\"')\n  }\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n  if (!isObject(requestDate)) {\n    throw new TypeError('requestDate should be of type \"object\"')\n  }\n  return `${accessKey}/${getScope(region, requestDate, serviceName)}`\n}\n\n// Returns signed headers array - alphabetically sorted\nfunction getSignedHeaders(headers: RequestHeaders): string[] {\n  if (!isObject(headers)) {\n    throw new TypeError('request should be of type \"object\"')\n  }\n  // Excerpts from @lsegal - https://github.com/aws/aws-sdk-js/issues/659#issuecomment-120477258\n  //\n  //  User-Agent:\n  //\n  //      This is ignored from signing because signing this causes problems with generating pre-signed URLs\n  //      (that are executed by other agents) or when customers pass requests through proxies, which may\n  //      modify the user-agent.\n  //\n  //  Content-Length:\n  //\n  //      This is ignored from signing because generating a pre-signed URL should not provide a content-length\n  //      constraint, specifically when vending a S3 pre-signed PUT URL. The corollary to this is that when\n  //      sending regular requests (non-pre-signed), the signature contains a checksum of the body, which\n  //      implicitly validates the payload length (since changing the number of bytes would change the checksum)\n  //      and therefore this header is not valuable in the signature.\n  //\n  //  Content-Type:\n  //\n  //      Signing this header causes quite a number of problems in browser environments, where browsers\n  //      like to modify and normalize the content-type header in different ways. There is more information\n  //      on this in https://github.com/aws/aws-sdk-js/issues/244. Avoiding this field simplifies logic\n  //      and reduces the possibility of future bugs\n  //\n  //  Authorization:\n  //\n  //      Is skipped for obvious reasons\n\n  const ignoredHeaders = ['authorization', 'content-length', 'content-type', 'user-agent']\n  return Object.keys(headers)\n    .filter((header) => !ignoredHeaders.includes(header))\n    .sort()\n}\n\n// returns the key used for calculating signature\nfunction getSigningKey(date: Date, region: string, secretKey: string, serviceName = 's3') {\n  if (!isObject(date)) {\n    throw new TypeError('date should be of type \"object\"')\n  }\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n  if (!isString(secretKey)) {\n    throw new TypeError('secretKey should be of type \"string\"')\n  }\n  const dateLine = makeDateShort(date)\n  const hmac1 = crypto\n      .createHmac('sha256', 'AWS4' + secretKey)\n      .update(dateLine)\n      .digest(),\n    hmac2 = crypto.createHmac('sha256', hmac1).update(region).digest(),\n    hmac3 = crypto.createHmac('sha256', hmac2).update(serviceName).digest()\n  return crypto.createHmac('sha256', hmac3).update('aws4_request').digest()\n}\n\n// returns the string that needs to be signed\nfunction getStringToSign(canonicalRequest: ICanonicalRequest, requestDate: Date, region: string, serviceName = 's3') {\n  if (!isString(canonicalRequest)) {\n    throw new TypeError('canonicalRequest should be of type \"string\"')\n  }\n  if (!isObject(requestDate)) {\n    throw new TypeError('requestDate should be of type \"object\"')\n  }\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n  const hash = crypto.createHash('sha256').update(canonicalRequest).digest('hex')\n  const scope = getScope(region, requestDate, serviceName)\n  const stringToSign = [signV4Algorithm, makeDateLong(requestDate), scope, hash]\n\n  return stringToSign.join('\\n')\n}\n\n// calculate the signature of the POST policy\nexport function postPresignSignatureV4(region: string, date: Date, secretKey: string, policyBase64: string): string {\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n  if (!isObject(date)) {\n    throw new TypeError('date should be of type \"object\"')\n  }\n  if (!isString(secretKey)) {\n    throw new TypeError('secretKey should be of type \"string\"')\n  }\n  if (!isString(policyBase64)) {\n    throw new TypeError('policyBase64 should be of type \"string\"')\n  }\n  const signingKey = getSigningKey(date, region, secretKey)\n  return crypto.createHmac('sha256', signingKey).update(policyBase64).digest('hex').toLowerCase()\n}\n\n// Returns the authorization header\nexport function signV4(\n  request: IRequest,\n  accessKey: string,\n  secretKey: string,\n  region: string,\n  requestDate: Date,\n  sha256sum: string,\n  serviceName = 's3',\n) {\n  if (!isObject(request)) {\n    throw new TypeError('request should be of type \"object\"')\n  }\n  if (!isString(accessKey)) {\n    throw new TypeError('accessKey should be of type \"string\"')\n  }\n  if (!isString(secretKey)) {\n    throw new TypeError('secretKey should be of type \"string\"')\n  }\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n\n  if (!accessKey) {\n    throw new errors.AccessKeyRequiredError('accessKey is required for signing')\n  }\n  if (!secretKey) {\n    throw new errors.SecretKeyRequiredError('secretKey is required for signing')\n  }\n\n  const signedHeaders = getSignedHeaders(request.headers)\n  const canonicalRequest = getCanonicalRequest(request.method, request.path, request.headers, signedHeaders, sha256sum)\n  const serviceIdentifier = serviceName || 's3'\n  const stringToSign = getStringToSign(canonicalRequest, requestDate, region, serviceIdentifier)\n  const signingKey = getSigningKey(requestDate, region, secretKey, serviceIdentifier)\n  const credential = getCredential(accessKey, region, requestDate, serviceIdentifier)\n  const signature = crypto.createHmac('sha256', signingKey).update(stringToSign).digest('hex').toLowerCase()\n\n  return `${signV4Algorithm} Credential=${credential}, SignedHeaders=${signedHeaders\n    .join(';')\n    .toLowerCase()}, Signature=${signature}`\n}\n\nexport function signV4ByServiceName(\n  request: IRequest,\n  accessKey: string,\n  secretKey: string,\n  region: string,\n  requestDate: Date,\n  contentSha256: string,\n  serviceName = 's3',\n): string {\n  return signV4(request, accessKey, secretKey, region, requestDate, contentSha256, serviceName)\n}\n\n// returns a presigned URL string\nexport function presignSignatureV4(\n  request: IRequest,\n  accessKey: string,\n  secretKey: string,\n  sessionToken: string | undefined,\n  region: string,\n  requestDate: Date,\n  expires: number | undefined,\n) {\n  if (!isObject(request)) {\n    throw new TypeError('request should be of type \"object\"')\n  }\n  if (!isString(accessKey)) {\n    throw new TypeError('accessKey should be of type \"string\"')\n  }\n  if (!isString(secretKey)) {\n    throw new TypeError('secretKey should be of type \"string\"')\n  }\n  if (!isString(region)) {\n    throw new TypeError('region should be of type \"string\"')\n  }\n\n  if (!accessKey) {\n    throw new errors.AccessKeyRequiredError('accessKey is required for presigning')\n  }\n  if (!secretKey) {\n    throw new errors.SecretKeyRequiredError('secretKey is required for presigning')\n  }\n\n  if (expires && !isNumber(expires)) {\n    throw new TypeError('expires should be of type \"number\"')\n  }\n  if (expires && expires < 1) {\n    throw new errors.ExpiresParamError('expires param cannot be less than 1 seconds')\n  }\n  if (expires && expires > PRESIGN_EXPIRY_DAYS_MAX) {\n    throw new errors.ExpiresParamError('expires param cannot be greater than 7 days')\n  }\n\n  const iso8601Date = makeDateLong(requestDate)\n  const signedHeaders = getSignedHeaders(request.headers)\n  const credential = getCredential(accessKey, region, requestDate)\n  const hashedPayload = 'UNSIGNED-PAYLOAD'\n\n  const requestQuery: string[] = []\n  requestQuery.push(`X-Amz-Algorithm=${signV4Algorithm}`)\n  requestQuery.push(`X-Amz-Credential=${uriEscape(credential)}`)\n  requestQuery.push(`X-Amz-Date=${iso8601Date}`)\n  requestQuery.push(`X-Amz-Expires=${expires}`)\n  requestQuery.push(`X-Amz-SignedHeaders=${uriEscape(signedHeaders.join(';').toLowerCase())}`)\n  if (sessionToken) {\n    requestQuery.push(`X-Amz-Security-Token=${uriEscape(sessionToken)}`)\n  }\n\n  const resource = request.path.split('?')[0]\n  let query = request.path.split('?')[1]\n  if (query) {\n    query = query + '&' + requestQuery.join('&')\n  } else {\n    query = requestQuery.join('&')\n  }\n\n  const path = resource + '?' + query\n\n  const canonicalRequest = getCanonicalRequest(request.method, path, request.headers, signedHeaders, hashedPayload)\n\n  const stringToSign = getStringToSign(canonicalRequest, requestDate, region)\n  const signingKey = getSigningKey(requestDate, region, secretKey)\n  const signature = crypto.createHmac('sha256', signingKey).update(stringToSign).digest('hex').toLowerCase()\n  return request.protocol + '//' + request.headers.host + path + `&X-Amz-Signature=${signature}`\n}\n"],"names":["crypto","errors","PRESIGN_EXPIRY_DAYS_MAX","getScope","isNumber","isObject","isString","makeDateLong","makeDateShort","uriEscape","signV4Algorithm","getCanonicalRequest","method","path","headers","signedHeaders","hashedPayload","TypeError","Array","isArray","headersArray","reduce","acc","i","val","replace","push","toLowerCase","requestResource","split","requestQuery","sort","map","element","includes","join","toUpperCase","getCredential","accessKey","region","requestDate","serviceName","getSignedHeaders","ignoredHeaders","Object","keys","filter","header","getSigningKey","date","secretKey","dateLine","hmac1","createHmac","update","digest","hmac2","hmac3","getStringToSign","canonicalRequest","hash","createHash","scope","stringToSign","postPresignSignatureV4","policyBase64","signingKey","signV4","request","sha256sum","AccessKeyRequiredError","SecretKeyRequiredError","serviceIdentifier","credential","signature","signV4ByServiceName","contentSha256","presignSignatureV4","sessionToken","expires","ExpiresParamError","iso8601Date","resource","query","protocol","host"],"mappings":"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"}},
    {"offset": {"line": 1279, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/copy-conditions.ts"],"sourcesContent":["export class CopyConditions {\n  public modified = ''\n  public unmodified = ''\n  public matchETag = ''\n  public matchETagExcept = ''\n\n  setModified(date: Date): void {\n    if (!(date instanceof Date)) {\n      throw new TypeError('date must be of type Date')\n    }\n\n    this.modified = date.toUTCString()\n  }\n\n  setUnmodified(date: Date): void {\n    if (!(date instanceof Date)) {\n      throw new TypeError('date must be of type Date')\n    }\n\n    this.unmodified = date.toUTCString()\n  }\n\n  setMatchETag(etag: string): void {\n    this.matchETag = etag\n  }\n\n  setMatchETagExcept(etag: string): void {\n    this.matchETagExcept = etag\n  }\n}\n"],"names":["CopyConditions","modified","unmodified","matchETag","matchETagExcept","setModified","date","Date","TypeError","toUTCString","setUnmodified","setMatchETag","etag","setMatchETagExcept"],"mappings":";;;;AAAO,MAAMA,cAAc,CAAC;IACnBC,QAAQ,GAAG,EAAE,CAAA;IACbC,UAAU,GAAG,EAAE,CAAA;IACfC,SAAS,GAAG,EAAE,CAAA;IACdC,eAAe,GAAG,EAAE,CAAA;IAE3BC,WAAWA,CAACC,IAAU,EAAQ;QAC5B,IAAI,CAAA,CAAEA,IAAI,YAAYC,IAAI,CAAC,EAAE;YAC3B,MAAM,IAAIC,SAAS,CAAC,2BAA2B,CAAC;QAClD;QAEA,IAAI,CAACP,QAAQ,GAAGK,IAAI,CAACG,WAAW,CAAC,CAAC;IACpC;IAEAC,aAAaA,CAACJ,IAAU,EAAQ;QAC9B,IAAI,CAAA,CAAEA,IAAI,YAAYC,IAAI,CAAC,EAAE;YAC3B,MAAM,IAAIC,SAAS,CAAC,2BAA2B,CAAC;QAClD;QAEA,IAAI,CAACN,UAAU,GAAGI,IAAI,CAACG,WAAW,CAAC,CAAC;IACtC;IAEAE,YAAYA,CAACC,IAAY,EAAQ;QAC/B,IAAI,CAACT,SAAS,GAAGS,IAAI;IACvB;IAEAC,kBAAkBA,CAACD,IAAY,EAAQ;QACrC,IAAI,CAACR,eAAe,GAAGQ,IAAI;IAC7B;AACF"}},
    {"offset": {"line": 1311, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/response.ts"],"sourcesContent":["import type http from 'node:http'\nimport type stream from 'node:stream'\n\nexport async function readAsBuffer(res: stream.Readable): Promise<Buffer> {\n  return new Promise((resolve, reject) => {\n    const body: Buffer[] = []\n    res\n      .on('data', (chunk: Buffer) => body.push(chunk))\n      .on('error', (e) => reject(e))\n      .on('end', () => resolve(Buffer.concat(body)))\n  })\n}\n\nexport async function readAsString(res: http.IncomingMessage): Promise<string> {\n  const body = await readAsBuffer(res)\n  return body.toString()\n}\n\nexport async function drainResponse(res: stream.Readable): Promise<void> {\n  return new Promise((resolve, reject) => {\n    res\n      .on('data', () => {})\n      .on('error', (e) => reject(e))\n      .on('end', () => resolve())\n  })\n}\n"],"names":["readAsBuffer","res","Promise","resolve","reject","body","on","chunk","push","e","Buffer","concat","readAsString","toString","drainResponse"],"mappings":";;;;;;;;AAGO,eAAeA,YAAYA,CAACC,GAAoB,EAAmB;IACxE,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC,MAAMC,IAAc,GAAG,EAAE;QACzBJ,GAAG,CACAK,EAAE,CAAC,MAAM,GAAGC,KAAa,GAAKF,IAAI,CAACG,IAAI,CAACD,KAAK,CAAC,CAAC,CAC/CD,EAAE,CAAC,OAAO,GAAGG,CAAC,GAAKL,MAAM,CAACK,CAAC,CAAC,CAAC,CAC7BH,EAAE,CAAC,KAAK,EAAE,IAAMH,OAAO,CAACO,MAAM,CAACC,MAAM,CAACN,IAAI,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC;AACJ;AAEO,eAAeO,YAAYA,CAACX,GAAyB,EAAmB;IAC7E,MAAMI,IAAI,GAAG,MAAML,YAAY,CAACC,GAAG,CAAC;IACpC,OAAOI,IAAI,CAACQ,QAAQ,CAAC,CAAC;AACxB;AAEO,eAAeC,aAAaA,CAACb,GAAoB,EAAiB;IACvE,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCH,GAAG,CACAK,EAAE,CAAC,MAAM,EAAE,KAAO,CAAC,AAAF,CAAG,CACpBA,EAAE,CAAC,OAAO,GAAGG,CAAC,GAAKL,MAAM,CAACK,CAAC,CAAC,CAAC,CAC7BH,EAAE,CAAC,KAAK,EAAE,IAAMH,OAAO,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;AACJ"}},
    {"offset": {"line": 1338, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/xml-parser.ts"],"sourcesContent":["import type * as http from 'node:http'\nimport type stream from 'node:stream'\n\nimport crc32 from 'buffer-crc32'\nimport { XMLParser } from 'fast-xml-parser'\n\nimport * as errors from '../errors.ts'\nimport { SelectResults } from '../helpers.ts'\nimport { isObject, parseXml, readableStream, sanitizeETag, sanitizeObjectKey, sanitizeSize, toArray } from './helper.ts'\nimport { readAsString } from './response.ts'\nimport type {\n  BucketItemFromList,\n  BucketItemWithMetadata,\n  CommonPrefix,\n  CopyObjectResultV1,\n  ListBucketResultV1,\n  ObjectInfo,\n  ObjectLockInfo,\n  ObjectRowEntry,\n  ReplicationConfig,\n  Tag,\n  Tags,\n} from './type.ts'\nimport { RETENTION_VALIDITY_UNITS } from './type.ts'\n\n// parse XML response for bucket region\nexport function parseBucketRegion(xml: string): string {\n  // return region information\n  return parseXml(xml).LocationConstraint\n}\n\nconst fxp = new XMLParser()\n\nconst fxpWithoutNumParser = new XMLParser({\n  // @ts-ignore\n  numberParseOptions: {\n    skipLike: /./,\n  },\n})\n\n// Parse XML and return information as Javascript types\n// parse error XML response\nexport function parseError(xml: string, headerInfo: Record<string, unknown>) {\n  let xmlErr = {}\n  const xmlObj = fxp.parse(xml)\n  if (xmlObj.Error) {\n    xmlErr = xmlObj.Error\n  }\n  const e = new errors.S3Error() as unknown as Record<string, unknown>\n  Object.entries(xmlErr).forEach(([key, value]) => {\n    e[key.toLowerCase()] = value\n  })\n  Object.entries(headerInfo).forEach(([key, value]) => {\n    e[key] = value\n  })\n  return e\n}\n\n// Generates an Error object depending on http statusCode and XML body\nexport async function parseResponseError(response: http.IncomingMessage): Promise<Record<string, string>> {\n  const statusCode = response.statusCode\n  let code = '',\n    message = ''\n  if (statusCode === 301) {\n    code = 'MovedPermanently'\n    message = 'Moved Permanently'\n  } else if (statusCode === 307) {\n    code = 'TemporaryRedirect'\n    message = 'Are you using the correct endpoint URL?'\n  } else if (statusCode === 403) {\n    code = 'AccessDenied'\n    message = 'Valid and authorized credentials required'\n  } else if (statusCode === 404) {\n    code = 'NotFound'\n    message = 'Not Found'\n  } else if (statusCode === 405) {\n    code = 'MethodNotAllowed'\n    message = 'Method Not Allowed'\n  } else if (statusCode === 501) {\n    code = 'MethodNotAllowed'\n    message = 'Method Not Allowed'\n  } else if (statusCode === 503) {\n    code = 'SlowDown'\n    message = 'Please reduce your request rate.'\n  } else {\n    const hErrCode = response.headers['x-minio-error-code'] as string\n    const hErrDesc = response.headers['x-minio-error-desc'] as string\n\n    if (hErrCode && hErrDesc) {\n      code = hErrCode\n      message = hErrDesc\n    }\n  }\n  const headerInfo: Record<string, string | undefined | null> = {}\n  // A value created by S3 compatible server that uniquely identifies the request.\n  headerInfo.amzRequestid = response.headers['x-amz-request-id'] as string | undefined\n  // A special token that helps troubleshoot API replies and issues.\n  headerInfo.amzId2 = response.headers['x-amz-id-2'] as string | undefined\n\n  // Region where the bucket is located. This header is returned only\n  // in HEAD bucket and ListObjects response.\n  headerInfo.amzBucketRegion = response.headers['x-amz-bucket-region'] as string | undefined\n\n  const xmlString = await readAsString(response)\n\n  if (xmlString) {\n    throw parseError(xmlString, headerInfo)\n  }\n\n  // Message should be instantiated for each S3Errors.\n  const e = new errors.S3Error(message, { cause: headerInfo })\n  // S3 Error code.\n  e.code = code\n  Object.entries(headerInfo).forEach(([key, value]) => {\n    // @ts-expect-error force set error properties\n    e[key] = value\n  })\n\n  throw e\n}\n\n/**\n * parse XML response for list objects v2 with metadata in a bucket\n */\nexport function parseListObjectsV2WithMetadata(xml: string) {\n  const result: {\n    objects: Array<BucketItemWithMetadata>\n    isTruncated: boolean\n    nextContinuationToken: string\n  } = {\n    objects: [],\n    isTruncated: false,\n    nextContinuationToken: '',\n  }\n\n  let xmlobj = parseXml(xml)\n  if (!xmlobj.ListBucketResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListBucketResult\"')\n  }\n  xmlobj = xmlobj.ListBucketResult\n  if (xmlobj.IsTruncated) {\n    result.isTruncated = xmlobj.IsTruncated\n  }\n  if (xmlobj.NextContinuationToken) {\n    result.nextContinuationToken = xmlobj.NextContinuationToken\n  }\n\n  if (xmlobj.Contents) {\n    toArray(xmlobj.Contents).forEach((content) => {\n      const name = sanitizeObjectKey(content.Key)\n      const lastModified = new Date(content.LastModified)\n      const etag = sanitizeETag(content.ETag)\n      const size = content.Size\n\n      let tags: Tags = {}\n      if (content.UserTags != null) {\n        toArray(content.UserTags.split('&')).forEach((tag) => {\n          const [key, value] = tag.split('=')\n          tags[key] = value\n        })\n      } else {\n        tags = {}\n      }\n\n      let metadata\n      if (content.UserMetadata != null) {\n        metadata = toArray(content.UserMetadata)[0]\n      } else {\n        metadata = null\n      }\n      result.objects.push({ name, lastModified, etag, size, metadata, tags })\n    })\n  }\n\n  if (xmlobj.CommonPrefixes) {\n    toArray(xmlobj.CommonPrefixes).forEach((commonPrefix) => {\n      result.objects.push({ prefix: sanitizeObjectKey(toArray(commonPrefix.Prefix)[0]), size: 0 })\n    })\n  }\n  return result\n}\n\nexport type UploadedPart = {\n  part: number\n  lastModified?: Date\n  etag: string\n  size: number\n}\n\n// parse XML response for list parts of an in progress multipart upload\nexport function parseListParts(xml: string): {\n  isTruncated: boolean\n  marker: number\n  parts: UploadedPart[]\n} {\n  let xmlobj = parseXml(xml)\n  const result: {\n    isTruncated: boolean\n    marker: number\n    parts: UploadedPart[]\n  } = {\n    isTruncated: false,\n    parts: [],\n    marker: 0,\n  }\n  if (!xmlobj.ListPartsResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListPartsResult\"')\n  }\n  xmlobj = xmlobj.ListPartsResult\n  if (xmlobj.IsTruncated) {\n    result.isTruncated = xmlobj.IsTruncated\n  }\n  if (xmlobj.NextPartNumberMarker) {\n    result.marker = toArray(xmlobj.NextPartNumberMarker)[0] || ''\n  }\n  if (xmlobj.Part) {\n    toArray(xmlobj.Part).forEach((p) => {\n      const part = parseInt(toArray(p.PartNumber)[0], 10)\n      const lastModified = new Date(p.LastModified)\n      const etag = p.ETag.replace(/^\"/g, '')\n        .replace(/\"$/g, '')\n        .replace(/^&quot;/g, '')\n        .replace(/&quot;$/g, '')\n        .replace(/^&#34;/g, '')\n        .replace(/&#34;$/g, '')\n      result.parts.push({ part, lastModified, etag, size: parseInt(p.Size, 10) })\n    })\n  }\n  return result\n}\n\nexport function parseListBucket(xml: string): BucketItemFromList[] {\n  let result: BucketItemFromList[] = []\n  const listBucketResultParser = new XMLParser({\n    parseTagValue: true, // Enable parsing of values\n    numberParseOptions: {\n      leadingZeros: false, // Disable number parsing for values with leading zeros\n      hex: false, // Disable hex number parsing - Invalid bucket name\n      skipLike: /^[0-9]+$/, // Skip number parsing if the value consists entirely of digits\n    },\n    tagValueProcessor: (tagName, tagValue = '') => {\n      // Ensure that the Name tag is always treated as a string\n      if (tagName === 'Name') {\n        return tagValue.toString()\n      }\n      return tagValue\n    },\n    ignoreAttributes: false, // Ensure that all attributes are parsed\n  })\n\n  const parsedXmlRes = listBucketResultParser.parse(xml)\n\n  if (!parsedXmlRes.ListAllMyBucketsResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListAllMyBucketsResult\"')\n  }\n\n  const { ListAllMyBucketsResult: { Buckets = {} } = {} } = parsedXmlRes\n\n  if (Buckets.Bucket) {\n    result = toArray(Buckets.Bucket).map((bucket = {}) => {\n      const { Name: bucketName, CreationDate } = bucket\n      const creationDate = new Date(CreationDate)\n\n      return { name: bucketName, creationDate }\n    })\n  }\n\n  return result\n}\n\nexport function parseInitiateMultipart(xml: string): string {\n  let xmlobj = parseXml(xml)\n\n  if (!xmlobj.InitiateMultipartUploadResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"InitiateMultipartUploadResult\"')\n  }\n  xmlobj = xmlobj.InitiateMultipartUploadResult\n\n  if (xmlobj.UploadId) {\n    return xmlobj.UploadId\n  }\n  throw new errors.InvalidXMLError('Missing tag: \"UploadId\"')\n}\n\nexport function parseReplicationConfig(xml: string): ReplicationConfig {\n  const xmlObj = parseXml(xml)\n  const { Role, Rule } = xmlObj.ReplicationConfiguration\n  return {\n    ReplicationConfiguration: {\n      role: Role,\n      rules: toArray(Rule),\n    },\n  }\n}\n\nexport function parseObjectLegalHoldConfig(xml: string) {\n  const xmlObj = parseXml(xml)\n  return xmlObj.LegalHold\n}\n\nexport function parseTagging(xml: string) {\n  const xmlObj = parseXml(xml)\n  let result: Tag[] = []\n  if (xmlObj.Tagging && xmlObj.Tagging.TagSet && xmlObj.Tagging.TagSet.Tag) {\n    const tagResult: Tag = xmlObj.Tagging.TagSet.Tag\n    // if it is a single tag convert into an array so that the return value is always an array.\n    if (Array.isArray(tagResult)) {\n      result = [...tagResult]\n    } else {\n      result.push(tagResult)\n    }\n  }\n  return result\n}\n\n// parse XML response when a multipart upload is completed\nexport function parseCompleteMultipart(xml: string) {\n  const xmlobj = parseXml(xml).CompleteMultipartUploadResult\n  if (xmlobj.Location) {\n    const location = toArray(xmlobj.Location)[0]\n    const bucket = toArray(xmlobj.Bucket)[0]\n    const key = xmlobj.Key\n    const etag = xmlobj.ETag.replace(/^\"/g, '')\n      .replace(/\"$/g, '')\n      .replace(/^&quot;/g, '')\n      .replace(/&quot;$/g, '')\n      .replace(/^&#34;/g, '')\n      .replace(/&#34;$/g, '')\n\n    return { location, bucket, key, etag }\n  }\n  // Complete Multipart can return XML Error after a 200 OK response\n  if (xmlobj.Code && xmlobj.Message) {\n    const errCode = toArray(xmlobj.Code)[0]\n    const errMessage = toArray(xmlobj.Message)[0]\n    return { errCode, errMessage }\n  }\n}\n\ntype UploadID = string\n\nexport type ListMultipartResult = {\n  uploads: {\n    key: string\n    uploadId: UploadID\n    initiator?: { id: string; displayName: string }\n    owner?: { id: string; displayName: string }\n    storageClass: unknown\n    initiated: Date\n  }[]\n  prefixes: {\n    prefix: string\n  }[]\n  isTruncated: boolean\n  nextKeyMarker: string\n  nextUploadIdMarker: string\n}\n\n// parse XML response for listing in-progress multipart uploads\nexport function parseListMultipart(xml: string): ListMultipartResult {\n  const result: ListMultipartResult = {\n    prefixes: [],\n    uploads: [],\n    isTruncated: false,\n    nextKeyMarker: '',\n    nextUploadIdMarker: '',\n  }\n\n  let xmlobj = parseXml(xml)\n\n  if (!xmlobj.ListMultipartUploadsResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListMultipartUploadsResult\"')\n  }\n  xmlobj = xmlobj.ListMultipartUploadsResult\n  if (xmlobj.IsTruncated) {\n    result.isTruncated = xmlobj.IsTruncated\n  }\n  if (xmlobj.NextKeyMarker) {\n    result.nextKeyMarker = xmlobj.NextKeyMarker\n  }\n  if (xmlobj.NextUploadIdMarker) {\n    result.nextUploadIdMarker = xmlobj.nextUploadIdMarker || ''\n  }\n\n  if (xmlobj.CommonPrefixes) {\n    toArray(xmlobj.CommonPrefixes).forEach((prefix) => {\n      // @ts-expect-error index check\n      result.prefixes.push({ prefix: sanitizeObjectKey(toArray<string>(prefix.Prefix)[0]) })\n    })\n  }\n\n  if (xmlobj.Upload) {\n    toArray(xmlobj.Upload).forEach((upload) => {\n      const uploadItem: ListMultipartResult['uploads'][number] = {\n        key: upload.Key,\n        uploadId: upload.UploadId,\n        storageClass: upload.StorageClass,\n        initiated: new Date(upload.Initiated),\n      }\n      if (upload.Initiator) {\n        uploadItem.initiator = { id: upload.Initiator.ID, displayName: upload.Initiator.DisplayName }\n      }\n      if (upload.Owner) {\n        uploadItem.owner = { id: upload.Owner.ID, displayName: upload.Owner.DisplayName }\n      }\n      result.uploads.push(uploadItem)\n    })\n  }\n  return result\n}\n\nexport function parseObjectLockConfig(xml: string): ObjectLockInfo {\n  const xmlObj = parseXml(xml)\n  let lockConfigResult = {} as ObjectLockInfo\n  if (xmlObj.ObjectLockConfiguration) {\n    lockConfigResult = {\n      objectLockEnabled: xmlObj.ObjectLockConfiguration.ObjectLockEnabled,\n    } as ObjectLockInfo\n    let retentionResp\n    if (\n      xmlObj.ObjectLockConfiguration &&\n      xmlObj.ObjectLockConfiguration.Rule &&\n      xmlObj.ObjectLockConfiguration.Rule.DefaultRetention\n    ) {\n      retentionResp = xmlObj.ObjectLockConfiguration.Rule.DefaultRetention || {}\n      lockConfigResult.mode = retentionResp.Mode\n    }\n    if (retentionResp) {\n      const isUnitYears = retentionResp.Years\n      if (isUnitYears) {\n        lockConfigResult.validity = isUnitYears\n        lockConfigResult.unit = RETENTION_VALIDITY_UNITS.YEARS\n      } else {\n        lockConfigResult.validity = retentionResp.Days\n        lockConfigResult.unit = RETENTION_VALIDITY_UNITS.DAYS\n      }\n    }\n  }\n\n  return lockConfigResult\n}\n\nexport function parseBucketVersioningConfig(xml: string) {\n  const xmlObj = parseXml(xml)\n  return xmlObj.VersioningConfiguration\n}\n\n// Used only in selectObjectContent API.\n// extractHeaderType extracts the first half of the header message, the header type.\nfunction extractHeaderType(stream: stream.Readable): string | undefined {\n  const headerNameLen = Buffer.from(stream.read(1)).readUInt8()\n  const headerNameWithSeparator = Buffer.from(stream.read(headerNameLen)).toString()\n  const splitBySeparator = (headerNameWithSeparator || '').split(':')\n  return splitBySeparator.length >= 1 ? splitBySeparator[1] : ''\n}\n\nfunction extractHeaderValue(stream: stream.Readable) {\n  const bodyLen = Buffer.from(stream.read(2)).readUInt16BE()\n  return Buffer.from(stream.read(bodyLen)).toString()\n}\n\nexport function parseSelectObjectContentResponse(res: Buffer) {\n  const selectResults = new SelectResults({}) // will be returned\n\n  const responseStream = readableStream(res) // convert byte array to a readable responseStream\n  // @ts-ignore\n  while (responseStream._readableState.length) {\n    // Top level responseStream read tracker.\n    let msgCrcAccumulator // accumulate from start of the message till the message crc start.\n\n    const totalByteLengthBuffer = Buffer.from(responseStream.read(4))\n    msgCrcAccumulator = crc32(totalByteLengthBuffer)\n\n    const headerBytesBuffer = Buffer.from(responseStream.read(4))\n    msgCrcAccumulator = crc32(headerBytesBuffer, msgCrcAccumulator)\n\n    const calculatedPreludeCrc = msgCrcAccumulator.readInt32BE() // use it to check if any CRC mismatch in header itself.\n\n    const preludeCrcBuffer = Buffer.from(responseStream.read(4)) // read 4 bytes    i.e 4+4 =8 + 4 = 12 ( prelude + prelude crc)\n    msgCrcAccumulator = crc32(preludeCrcBuffer, msgCrcAccumulator)\n\n    const totalMsgLength = totalByteLengthBuffer.readInt32BE()\n    const headerLength = headerBytesBuffer.readInt32BE()\n    const preludeCrcByteValue = preludeCrcBuffer.readInt32BE()\n\n    if (preludeCrcByteValue !== calculatedPreludeCrc) {\n      // Handle Header CRC mismatch Error\n      throw new Error(\n        `Header Checksum Mismatch, Prelude CRC of ${preludeCrcByteValue} does not equal expected CRC of ${calculatedPreludeCrc}`,\n      )\n    }\n\n    const headers: Record<string, unknown> = {}\n    if (headerLength > 0) {\n      const headerBytes = Buffer.from(responseStream.read(headerLength))\n      msgCrcAccumulator = crc32(headerBytes, msgCrcAccumulator)\n      const headerReaderStream = readableStream(headerBytes)\n      // @ts-ignore\n      while (headerReaderStream._readableState.length) {\n        const headerTypeName = extractHeaderType(headerReaderStream)\n        headerReaderStream.read(1) // just read and ignore it.\n        if (headerTypeName) {\n          headers[headerTypeName] = extractHeaderValue(headerReaderStream)\n        }\n      }\n    }\n\n    let payloadStream\n    const payLoadLength = totalMsgLength - headerLength - 16\n    if (payLoadLength > 0) {\n      const payLoadBuffer = Buffer.from(responseStream.read(payLoadLength))\n      msgCrcAccumulator = crc32(payLoadBuffer, msgCrcAccumulator)\n      // read the checksum early and detect any mismatch so we can avoid unnecessary further processing.\n      const messageCrcByteValue = Buffer.from(responseStream.read(4)).readInt32BE()\n      const calculatedCrc = msgCrcAccumulator.readInt32BE()\n      // Handle message CRC Error\n      if (messageCrcByteValue !== calculatedCrc) {\n        throw new Error(\n          `Message Checksum Mismatch, Message CRC of ${messageCrcByteValue} does not equal expected CRC of ${calculatedCrc}`,\n        )\n      }\n      payloadStream = readableStream(payLoadBuffer)\n    }\n    const messageType = headers['message-type']\n\n    switch (messageType) {\n      case 'error': {\n        const errorMessage = headers['error-code'] + ':\"' + headers['error-message'] + '\"'\n        throw new Error(errorMessage)\n      }\n      case 'event': {\n        const contentType = headers['content-type']\n        const eventType = headers['event-type']\n\n        switch (eventType) {\n          case 'End': {\n            selectResults.setResponse(res)\n            return selectResults\n          }\n\n          case 'Records': {\n            const readData = payloadStream?.read(payLoadLength)\n            selectResults.setRecords(readData)\n            break\n          }\n\n          case 'Progress':\n            {\n              switch (contentType) {\n                case 'text/xml': {\n                  const progressData = payloadStream?.read(payLoadLength)\n                  selectResults.setProgress(progressData.toString())\n                  break\n                }\n                default: {\n                  const errorMessage = `Unexpected content-type ${contentType} sent for event-type Progress`\n                  throw new Error(errorMessage)\n                }\n              }\n            }\n            break\n          case 'Stats':\n            {\n              switch (contentType) {\n                case 'text/xml': {\n                  const statsData = payloadStream?.read(payLoadLength)\n                  selectResults.setStats(statsData.toString())\n                  break\n                }\n                default: {\n                  const errorMessage = `Unexpected content-type ${contentType} sent for event-type Stats`\n                  throw new Error(errorMessage)\n                }\n              }\n            }\n            break\n          default: {\n            // Continuation message: Not sure if it is supported. did not find a reference or any message in response.\n            // It does not have a payload.\n            const warningMessage = `Un implemented event detected  ${messageType}.`\n            // eslint-disable-next-line no-console\n            console.warn(warningMessage)\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function parseLifecycleConfig(xml: string) {\n  const xmlObj = parseXml(xml)\n  return xmlObj.LifecycleConfiguration\n}\n\nexport function parseBucketEncryptionConfig(xml: string) {\n  return parseXml(xml)\n}\n\nexport function parseObjectRetentionConfig(xml: string) {\n  const xmlObj = parseXml(xml)\n  const retentionConfig = xmlObj.Retention\n  return {\n    mode: retentionConfig.Mode,\n    retainUntilDate: retentionConfig.RetainUntilDate,\n  }\n}\n\nexport function removeObjectsParser(xml: string) {\n  const xmlObj = parseXml(xml)\n  if (xmlObj.DeleteResult && xmlObj.DeleteResult.Error) {\n    // return errors as array always. as the response is object in case of single object passed in removeObjects\n    return toArray(xmlObj.DeleteResult.Error)\n  }\n  return []\n}\n\n// parse XML response for copy object\nexport function parseCopyObject(xml: string): CopyObjectResultV1 {\n  const result: CopyObjectResultV1 = {\n    etag: '',\n    lastModified: '',\n  }\n\n  let xmlobj = parseXml(xml)\n  if (!xmlobj.CopyObjectResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"CopyObjectResult\"')\n  }\n  xmlobj = xmlobj.CopyObjectResult\n  if (xmlobj.ETag) {\n    result.etag = xmlobj.ETag.replace(/^\"/g, '')\n      .replace(/\"$/g, '')\n      .replace(/^&quot;/g, '')\n      .replace(/&quot;$/g, '')\n      .replace(/^&#34;/g, '')\n      .replace(/&#34;$/g, '')\n  }\n  if (xmlobj.LastModified) {\n    result.lastModified = new Date(xmlobj.LastModified)\n  }\n\n  return result\n}\n\nconst formatObjInfo = (content: ObjectRowEntry, opts: { IsDeleteMarker?: boolean } = {}) => {\n  const { Key, LastModified, ETag, Size, VersionId, IsLatest } = content\n\n  if (!isObject(opts)) {\n    opts = {}\n  }\n\n  const name = sanitizeObjectKey(toArray(Key)[0] || '')\n  const lastModified = LastModified ? new Date(toArray(LastModified)[0] || '') : undefined\n  const etag = sanitizeETag(toArray(ETag)[0] || '')\n  const size = sanitizeSize(Size || '')\n\n  return {\n    name,\n    lastModified,\n    etag,\n    size,\n    versionId: VersionId,\n    isLatest: IsLatest,\n    isDeleteMarker: opts.IsDeleteMarker ? opts.IsDeleteMarker : false,\n  }\n}\n\n// parse XML response for list objects in a bucket\nexport function parseListObjects(xml: string) {\n  const result: {\n    objects: ObjectInfo[]\n    isTruncated?: boolean\n    nextMarker?: string\n    versionIdMarker?: string\n    keyMarker?: string\n  } = {\n    objects: [],\n    isTruncated: false,\n    nextMarker: undefined,\n    versionIdMarker: undefined,\n    keyMarker: undefined,\n  }\n  let isTruncated = false\n  let nextMarker\n  const xmlobj = fxpWithoutNumParser.parse(xml)\n\n  const parseCommonPrefixesEntity = (commonPrefixEntry: CommonPrefix[]) => {\n    if (commonPrefixEntry) {\n      toArray(commonPrefixEntry).forEach((commonPrefix) => {\n        result.objects.push({ prefix: sanitizeObjectKey(toArray(commonPrefix.Prefix)[0] || ''), size: 0 })\n      })\n    }\n  }\n\n  const listBucketResult: ListBucketResultV1 = xmlobj.ListBucketResult\n  const listVersionsResult: ListBucketResultV1 = xmlobj.ListVersionsResult\n\n  if (listBucketResult) {\n    if (listBucketResult.IsTruncated) {\n      isTruncated = listBucketResult.IsTruncated\n    }\n    if (listBucketResult.Contents) {\n      toArray(listBucketResult.Contents).forEach((content) => {\n        const name = sanitizeObjectKey(toArray(content.Key)[0] || '')\n        const lastModified = new Date(toArray(content.LastModified)[0] || '')\n        const etag = sanitizeETag(toArray(content.ETag)[0] || '')\n        const size = sanitizeSize(content.Size || '')\n        result.objects.push({ name, lastModified, etag, size })\n      })\n    }\n\n    if (listBucketResult.Marker) {\n      nextMarker = listBucketResult.Marker\n    }\n    if (listBucketResult.NextMarker) {\n      nextMarker = listBucketResult.NextMarker\n    } else if (isTruncated && result.objects.length > 0) {\n      nextMarker = result.objects[result.objects.length - 1]?.name\n    }\n    if (listBucketResult.CommonPrefixes) {\n      parseCommonPrefixesEntity(listBucketResult.CommonPrefixes)\n    }\n  }\n\n  if (listVersionsResult) {\n    if (listVersionsResult.IsTruncated) {\n      isTruncated = listVersionsResult.IsTruncated\n    }\n\n    if (listVersionsResult.Version) {\n      toArray(listVersionsResult.Version).forEach((content) => {\n        result.objects.push(formatObjInfo(content))\n      })\n    }\n    if (listVersionsResult.DeleteMarker) {\n      toArray(listVersionsResult.DeleteMarker).forEach((content) => {\n        result.objects.push(formatObjInfo(content, { IsDeleteMarker: true }))\n      })\n    }\n\n    if (listVersionsResult.NextKeyMarker) {\n      result.keyMarker = listVersionsResult.NextKeyMarker\n    }\n    if (listVersionsResult.NextVersionIdMarker) {\n      result.versionIdMarker = listVersionsResult.NextVersionIdMarker\n    }\n    if (listVersionsResult.CommonPrefixes) {\n      parseCommonPrefixesEntity(listVersionsResult.CommonPrefixes)\n    }\n  }\n\n  result.isTruncated = isTruncated\n  if (isTruncated) {\n    result.nextMarker = nextMarker\n  }\n  return result\n}\n\nexport function uploadPartParser(xml: string) {\n  const xmlObj = parseXml(xml)\n  const respEl = xmlObj.CopyPartResult\n  return respEl\n}\n"],"names":["crc32","XMLParser","errors","SelectResults","isObject","parseXml","readableStream","sanitizeETag","sanitizeObjectKey","sanitizeSize","toArray","readAsString","RETENTION_VALIDITY_UNITS","parseBucketRegion","xml","LocationConstraint","fxp","fxpWithoutNumParser","numberParseOptions","skipLike","parseError","headerInfo","xmlErr","xmlObj","parse","Error","e","S3Error","Object","entries","forEach","key","value","toLowerCase","parseResponseError","response","statusCode","code","message","hErrCode","headers","hErrDesc","amzRequestid","amzId2","amzBucketRegion","xmlString","cause","parseListObjectsV2WithMetadata","result","objects","isTruncated","nextContinuationToken","xmlobj","ListBucketResult","InvalidXMLError","IsTruncated","NextContinuationToken","Contents","content","name","Key","lastModified","Date","LastModified","etag","ETag","size","Size","tags","UserTags","split","tag","metadata","UserMetadata","push","CommonPrefixes","commonPrefix","prefix","Prefix","parseListParts","parts","marker","ListPartsResult","NextPartNumberMarker","Part","p","part","parseInt","PartNumber","replace","parseListBucket","listBucketResultParser","parseTagValue","leadingZeros","hex","tagValueProcessor","tagName","tagValue","toString","ignoreAttributes","parsedXmlRes","ListAllMyBucketsResult","Buckets","Bucket","map","bucket","Name","bucketName","CreationDate","creationDate","parseInitiateMultipart","InitiateMultipartUploadResult","UploadId","parseReplicationConfig","Role","Rule","ReplicationConfiguration","role","rules","parseObjectLegalHoldConfig","LegalHold","parseTagging","Tagging","TagSet","Tag","tagResult","Array","isArray","parseCompleteMultipart","CompleteMultipartUploadResult","Location","location","Code","Message","errCode","errMessage","parseListMultipart","prefixes","uploads","nextKeyMarker","nextUploadIdMarker","ListMultipartUploadsResult","NextKeyMarker","NextUploadIdMarker","Upload","upload","uploadItem","uploadId","storageClass","StorageClass","initiated","Initiated","Initiator","initiator","id","ID","displayName","DisplayName","Owner","owner","parseObjectLockConfig","lockConfigResult","ObjectLockConfiguration","objectLockEnabled","ObjectLockEnabled","retentionResp","DefaultRetention","mode","Mode","isUnitYears","Years","validity","unit","YEARS","Days","DAYS","parseBucketVersioningConfig","VersioningConfiguration","extractHeaderType","stream","headerNameLen","Buffer","from","read","readUInt8","headerNameWithSeparator","splitBySeparator","length","extractHeaderValue","bodyLen","readUInt16BE","parseSelectObjectContentResponse","res","selectResults","responseStream","_readableState","msgCrcAccumulator","totalByteLengthBuffer","headerBytesBuffer","calculatedPreludeCrc","readInt32BE","preludeCrcBuffer","totalMsgLength","headerLength","preludeCrcByteValue","headerBytes","headerReaderStream","headerTypeName","payloadStream","payLoadLength","payLoadBuffer","messageCrcByteValue","calculatedCrc","messageType","errorMessage","contentType","eventType","setResponse","_payloadStream","readData","setRecords","_payloadStream2","progressData","setProgress","_payloadStream3","statsData","setStats","warningMessage","console","warn","parseLifecycleConfig","LifecycleConfiguration","parseBucketEncryptionConfig","parseObjectRetentionConfig","retentionConfig","Retention","retainUntilDate","RetainUntilDate","removeObjectsParser","DeleteResult","parseCopyObject","CopyObjectResult","formatObjInfo","opts","VersionId","IsLatest","undefined","versionId","isLatest","isDeleteMarker","IsDeleteMarker","parseListObjects","nextMarker","versionIdMarker","keyMarker","parseCommonPrefixesEntity","commonPrefixEntry","listBucketResult","listVersionsResult","ListVersionsResult","Marker","NextMarker","_result$objects","Version","DeleteMarker","NextVersionIdMarker","uploadPartParser","respEl","CopyPartResult"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,OAAOA,KAAK,MAAM,cAAc;AAChC,SAASC,SAAS,QAAQ,iBAAiB;AAE3C,OAAO,KAAKC,MAAM,MAAM,eAAc;AACtC,SAASC,aAAa,QAAQ,gBAAe;AAC7C,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,YAAY,EAAEC,iBAAiB,EAAEC,YAAY,EAAEC,OAAO,QAAQ,cAAa;AACxH,SAASC,YAAY,QAAQ,gBAAe;AAc5C,SAASC,wBAAwB,QAAQ,YAAW;;;;;;;;AAG7C,SAASC,iBAAiBA,CAACC,GAAW,EAAU;IACrD,4BAAA;IACA,WAAOT,yKAAQ,EAACS,GAAG,CAAC,CAACC,kBAAkB;AACzC;AAEA,MAAMC,GAAG,GAAG,IAAIf,kKAAS,CAAC,CAAC;AAE3B,MAAMgB,mBAAmB,GAAG,IAAIhB,kKAAS,CAAC;IACxC,aAAA;IACAiB,kBAAkB,EAAE;QAClBC,QAAQ,EAAE;IACZ;AACF,CAAC,CAAC;AAIK,SAASC,UAAUA,CAACN,GAAW,EAAEO,UAAmC,EAAE;IAC3E,IAAIC,MAAM,GAAG,CAAC,CAAC;IACf,MAAMC,MAAM,GAAGP,GAAG,CAACQ,KAAK,CAACV,GAAG,CAAC;IAC7B,IAAIS,MAAM,CAACE,KAAK,EAAE;QAChBH,MAAM,GAAGC,MAAM,CAACE,KAAK;IACvB;IACA,MAAMC,CAAC,GAAG,IAAIxB,MAAM,CAACyB,qJAAO,CAAC,CAAuC;IACpEC,MAAM,CAACC,OAAO,CAACP,MAAM,CAAC,CAACQ,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;QAC/CN,CAAC,CAACK,GAAG,CAACE,WAAW,CAAC,CAAC,CAAC,GAAGD,KAAK;IAC9B,CAAC,CAAC;IACFJ,MAAM,CAACC,OAAO,CAACR,UAAU,CAAC,CAACS,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;QACnDN,CAAC,CAACK,GAAG,CAAC,GAAGC,KAAK;IAChB,CAAC,CAAC;IACF,OAAON,CAAC;AACV;AAGO,eAAeQ,kBAAkBA,CAACC,QAA8B,EAAmC;IACxG,MAAMC,UAAU,GAAGD,QAAQ,CAACC,UAAU;IACtC,IAAIC,IAAI,GAAG,EAAE,EACXC,OAAO,GAAG,EAAE;IACd,IAAIF,UAAU,KAAK,GAAG,EAAE;QACtBC,IAAI,GAAG,kBAAkB;QACzBC,OAAO,GAAG,mBAAmB;IAC/B,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,mBAAmB;QAC1BC,OAAO,GAAG,yCAAyC;IACrD,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,cAAc;QACrBC,OAAO,GAAG,2CAA2C;IACvD,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,UAAU;QACjBC,OAAO,GAAG,WAAW;IACvB,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,kBAAkB;QACzBC,OAAO,GAAG,oBAAoB;IAChC,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,kBAAkB;QACzBC,OAAO,GAAG,oBAAoB;IAChC,CAAC,MAAM,IAAIF,UAAU,KAAK,GAAG,EAAE;QAC7BC,IAAI,GAAG,UAAU;QACjBC,OAAO,GAAG,kCAAkC;IAC9C,CAAC,MAAM;QACL,MAAMC,QAAQ,GAAGJ,QAAQ,CAACK,OAAO,CAAC,oBAAoB,CAAW;QACjE,MAAMC,QAAQ,GAAGN,QAAQ,CAACK,OAAO,CAAC,oBAAoB,CAAW;QAEjE,IAAID,QAAQ,IAAIE,QAAQ,EAAE;YACxBJ,IAAI,GAAGE,QAAQ;YACfD,OAAO,GAAGG,QAAQ;QACpB;IACF;IACA,MAAMpB,UAAqD,GAAG,CAAC,CAAC;IAChE,gFAAA;IACAA,UAAU,CAACqB,YAAY,GAAGP,QAAQ,CAACK,OAAO,CAAC,kBAAkB,CAAuB;IACpF,kEAAA;IACAnB,UAAU,CAACsB,MAAM,GAAGR,QAAQ,CAACK,OAAO,CAAC,YAAY,CAAuB;IAExE,mEAAA;IACA,2CAAA;IACAnB,UAAU,CAACuB,eAAe,GAAGT,QAAQ,CAACK,OAAO,CAAC,qBAAqB,CAAuB;IAE1F,MAAMK,SAAS,GAAG,UAAMlC,+KAAY,EAACwB,QAAQ,CAAC;IAE9C,IAAIU,SAAS,EAAE;QACb,MAAMzB,UAAU,CAACyB,SAAS,EAAExB,UAAU,CAAC;IACzC;IAEA,oDAAA;IACA,MAAMK,CAAC,GAAG,IAAIxB,MAAM,CAACyB,qJAAO,CAACW,OAAO,EAAE;QAAEQ,KAAK,EAAEzB;IAAW,CAAC,CAAC;IAC5D,iBAAA;IACAK,CAAC,CAACW,IAAI,GAAGA,IAAI;IACbT,MAAM,CAACC,OAAO,CAACR,UAAU,CAAC,CAACS,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;QACnD,8CAAA;QACAN,CAAC,CAACK,GAAG,CAAC,GAAGC,KAAK;IAChB,CAAC,CAAC;IAEF,MAAMN,CAAC;AACT;AAKO,SAASqB,8BAA8BA,CAACjC,GAAW,EAAE;IAC1D,MAAMkC,MAIL,GAAG;QACFC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,KAAK;QAClBC,qBAAqB,EAAE;IACzB,CAAC;IAED,IAAIC,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC;IAC1B,IAAI,CAACsC,MAAM,CAACC,gBAAgB,EAAE;QAC5B,MAAM,IAAInD,MAAM,CAACoD,6JAAe,CAAC,iCAAiC,CAAC;IACrE;IACAF,MAAM,GAAGA,MAAM,CAACC,gBAAgB;IAChC,IAAID,MAAM,CAACG,WAAW,EAAE;QACtBP,MAAM,CAACE,WAAW,GAAGE,MAAM,CAACG,WAAW;IACzC;IACA,IAAIH,MAAM,CAACI,qBAAqB,EAAE;QAChCR,MAAM,CAACG,qBAAqB,GAAGC,MAAM,CAACI,qBAAqB;IAC7D;IAEA,IAAIJ,MAAM,CAACK,QAAQ,EAAE;YACnB/C,wKAAO,EAAC0C,MAAM,CAACK,QAAQ,CAAC,CAAC3B,OAAO,EAAE4B,OAAO,IAAK;YAC5C,MAAMC,IAAI,OAAGnD,kLAAiB,EAACkD,OAAO,CAACE,GAAG,CAAC;YAC3C,MAAMC,YAAY,GAAG,IAAIC,IAAI,CAACJ,OAAO,CAACK,YAAY,CAAC;YACnD,MAAMC,IAAI,OAAGzD,6KAAY,EAACmD,OAAO,CAACO,IAAI,CAAC;YACvC,MAAMC,IAAI,GAAGR,OAAO,CAACS,IAAI;YAEzB,IAAIC,IAAU,GAAG,CAAC,CAAC;YACnB,IAAIV,OAAO,CAACW,QAAQ,IAAI,IAAI,EAAE;oBAC5B3D,wKAAO,EAACgD,OAAO,CAACW,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAACxC,OAAO,EAAEyC,GAAG,IAAK;oBACpD,MAAM,CAACxC,GAAG,EAAEC,KAAK,CAAC,GAAGuC,GAAG,CAACD,KAAK,CAAC,GAAG,CAAC;oBACnCF,IAAI,CAACrC,GAAG,CAAC,GAAGC,KAAK;gBACnB,CAAC,CAAC;YACJ,CAAC,MAAM;gBACLoC,IAAI,GAAG,CAAC,CAAC;YACX;YAEA,IAAII,QAAQ;YACZ,IAAId,OAAO,CAACe,YAAY,IAAI,IAAI,EAAE;gBAChCD,QAAQ,OAAG9D,wKAAO,EAACgD,OAAO,CAACe,YAAY,CAAC,CAAC,CAAC,CAAC;YAC7C,CAAC,MAAM;gBACLD,QAAQ,GAAG,IAAI;YACjB;YACAxB,MAAM,CAACC,OAAO,CAACyB,IAAI,CAAC;gBAAEf,IAAI;gBAAEE,YAAY;gBAAEG,IAAI;gBAAEE,IAAI;gBAAEM,QAAQ;gBAAEJ;YAAK,CAAC,CAAC;QACzE,CAAC,CAAC;IACJ;IAEA,IAAIhB,MAAM,CAACuB,cAAc,EAAE;YACzBjE,wKAAO,EAAC0C,MAAM,CAACuB,cAAc,CAAC,CAAC7C,OAAO,EAAE8C,YAAY,IAAK;YACvD5B,MAAM,CAACC,OAAO,CAACyB,IAAI,CAAC;gBAAEG,MAAM,MAAErE,kLAAiB,MAACE,wKAAO,EAACkE,YAAY,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBAAEZ,IAAI,EAAE;YAAE,CAAC,CAAC;QAC9F,CAAC,CAAC;IACJ;IACA,OAAOlB,MAAM;AACf;AAUO,SAAS+B,cAAcA,CAACjE,GAAW,EAIxC;IACA,IAAIsC,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC;IAC1B,MAAMkC,MAIL,GAAG;QACFE,WAAW,EAAE,KAAK;QAClB8B,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE;IACV,CAAC;IACD,IAAI,CAAC7B,MAAM,CAAC8B,eAAe,EAAE;QAC3B,MAAM,IAAIhF,MAAM,CAACoD,6JAAe,CAAC,gCAAgC,CAAC;IACpE;IACAF,MAAM,GAAGA,MAAM,CAAC8B,eAAe;IAC/B,IAAI9B,MAAM,CAACG,WAAW,EAAE;QACtBP,MAAM,CAACE,WAAW,GAAGE,MAAM,CAACG,WAAW;IACzC;IACA,IAAIH,MAAM,CAAC+B,oBAAoB,EAAE;QAC/BnC,MAAM,CAACiC,MAAM,OAAGvE,wKAAO,EAAC0C,MAAM,CAAC+B,oBAAoB,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;IAC/D;IACA,IAAI/B,MAAM,CAACgC,IAAI,EAAE;YACf1E,wKAAO,EAAC0C,MAAM,CAACgC,IAAI,CAAC,CAACtD,OAAO,EAAEuD,CAAC,IAAK;YAClC,MAAMC,IAAI,GAAGC,QAAQ,KAAC7E,wKAAO,EAAC2E,CAAC,CAACG,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;YACnD,MAAM3B,YAAY,GAAG,IAAIC,IAAI,CAACuB,CAAC,CAACtB,YAAY,CAAC;YAC7C,MAAMC,IAAI,GAAGqB,CAAC,CAACpB,IAAI,CAACwB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CACnCA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAClBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CACtBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;YACzBzC,MAAM,CAACgC,KAAK,CAACN,IAAI,CAAC;gBAAEY,IAAI;gBAAEzB,YAAY;gBAAEG,IAAI;gBAAEE,IAAI,EAAEqB,QAAQ,CAACF,CAAC,CAAClB,IAAI,EAAE,EAAE;YAAE,CAAC,CAAC;QAC7E,CAAC,CAAC;IACJ;IACA,OAAOnB,MAAM;AACf;AAEO,SAAS0C,eAAeA,CAAC5E,GAAW,EAAwB;IACjE,IAAIkC,MAA4B,GAAG,EAAE;IACrC,MAAM2C,sBAAsB,GAAG,IAAI1F,kKAAS,CAAC;QAC3C2F,aAAa,EAAE,IAAI;QAAE,2BAAA;QACrB1E,kBAAkB,EAAE;YAClB2E,YAAY,EAAE,KAAK;YAAE,uDAAA;YACrBC,GAAG,EAAE,KAAK;YAAE,mDAAA;YACZ3E,QAAQ,EAAE,UAAU,CAAE,+DAAA;QACxB,CAAC;QACD4E,iBAAiB,EAAEA,CAACC,OAAO,EAAEC,QAAQ,GAAG,EAAE,KAAK;YAC7C,yDAAA;YACA,IAAID,OAAO,KAAK,MAAM,EAAE;gBACtB,OAAOC,QAAQ,CAACC,QAAQ,CAAC,CAAC;YAC5B;YACA,OAAOD,QAAQ;QACjB,CAAC;QACDE,gBAAgB,EAAE,KAAK,CAAE,wCAAA;IAC3B,CAAC,CAAC;IAEF,MAAMC,YAAY,GAAGT,sBAAsB,CAACnE,KAAK,CAACV,GAAG,CAAC;IAEtD,IAAI,CAACsF,YAAY,CAACC,sBAAsB,EAAE;QACxC,MAAM,IAAInG,MAAM,CAACoD,6JAAe,CAAC,uCAAuC,CAAC;IAC3E;IAEA,MAAM,EAAE+C,sBAAsB,EAAE,EAAEC,OAAO,GAAG,CAAC,CAAA,EAAG,GAAG,CAAC,CAAA,EAAG,GAAGF,YAAY;IAEtE,IAAIE,OAAO,CAACC,MAAM,EAAE;QAClBvD,MAAM,OAAGtC,wKAAO,EAAC4F,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,CAACC,MAAM,GAAG,CAAC,CAAC,KAAK;YACpD,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAEC,YAAAA,EAAc,GAAGH,MAAM;YACjD,MAAMI,YAAY,GAAG,IAAI/C,IAAI,CAAC8C,YAAY,CAAC;YAE3C,OAAO;gBAAEjD,IAAI,EAAEgD,UAAU;gBAAEE;YAAa,CAAC;QAC3C,CAAC,CAAC;IACJ;IAEA,OAAO7D,MAAM;AACf;AAEO,SAAS8D,sBAAsBA,CAAChG,GAAW,EAAU;IAC1D,IAAIsC,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC;IAE1B,IAAI,CAACsC,MAAM,CAAC2D,6BAA6B,EAAE;QACzC,MAAM,IAAI7G,MAAM,CAACoD,6JAAe,CAAC,8CAA8C,CAAC;IAClF;IACAF,MAAM,GAAGA,MAAM,CAAC2D,6BAA6B;IAE7C,IAAI3D,MAAM,CAAC4D,QAAQ,EAAE;QACnB,OAAO5D,MAAM,CAAC4D,QAAQ;IACxB;IACA,MAAM,IAAI9G,MAAM,CAACoD,6JAAe,CAAC,yBAAyB,CAAC;AAC7D;AAEO,SAAS2D,sBAAsBA,CAACnG,GAAW,EAAqB;IACrE,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,MAAM,EAAEoG,IAAI,EAAEC,IAAAA,EAAM,GAAG5F,MAAM,CAAC6F,wBAAwB;IACtD,OAAO;QACLA,wBAAwB,EAAE;YACxBC,IAAI,EAAEH,IAAI;YACVI,KAAK,MAAE5G,wKAAO,EAACyG,IAAI;QACrB;IACF,CAAC;AACH;AAEO,SAASI,0BAA0BA,CAACzG,GAAW,EAAE;IACtD,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,OAAOS,MAAM,CAACiG,SAAS;AACzB;AAEO,SAASC,YAAYA,CAAC3G,GAAW,EAAE;IACxC,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,IAAIkC,MAAa,GAAG,EAAE;IACtB,IAAIzB,MAAM,CAACmG,OAAO,IAAInG,MAAM,CAACmG,OAAO,CAACC,MAAM,IAAIpG,MAAM,CAACmG,OAAO,CAACC,MAAM,CAACC,GAAG,EAAE;QACxE,MAAMC,SAAc,GAAGtG,MAAM,CAACmG,OAAO,CAACC,MAAM,CAACC,GAAG;QAChD,2FAAA;QACA,IAAIE,KAAK,CAACC,OAAO,CAACF,SAAS,CAAC,EAAE;YAC5B7E,MAAM,GAAG,CAAC;mBAAG6E,SAAS;aAAC;QACzB,CAAC,MAAM;YACL7E,MAAM,CAAC0B,IAAI,CAACmD,SAAS,CAAC;QACxB;IACF;IACA,OAAO7E,MAAM;AACf;AAGO,SAASgF,sBAAsBA,CAAClH,GAAW,EAAE;IAClD,MAAMsC,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC,CAACmH,6BAA6B;IAC1D,IAAI7E,MAAM,CAAC8E,QAAQ,EAAE;QACnB,MAAMC,QAAQ,OAAGzH,wKAAO,EAAC0C,MAAM,CAAC8E,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAMzB,MAAM,OAAG/F,wKAAO,EAAC0C,MAAM,CAACmD,MAAM,CAAC,CAAC,CAAC,CAAC;QACxC,MAAMxE,GAAG,GAAGqB,MAAM,CAACQ,GAAG;QACtB,MAAMI,IAAI,GAAGZ,MAAM,CAACa,IAAI,CAACwB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CACxCA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAClBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CACtBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;QAEzB,OAAO;YAAE0C,QAAQ;YAAE1B,MAAM;YAAE1E,GAAG;YAAEiC;QAAK,CAAC;IACxC;IACA,kEAAA;IACA,IAAIZ,MAAM,CAACgF,IAAI,IAAIhF,MAAM,CAACiF,OAAO,EAAE;QACjC,MAAMC,OAAO,OAAG5H,wKAAO,EAAC0C,MAAM,CAACgF,IAAI,CAAC,CAAC,CAAC,CAAC;QACvC,MAAMG,UAAU,OAAG7H,wKAAO,EAAC0C,MAAM,CAACiF,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7C,OAAO;YAAEC,OAAO;YAAEC;QAAW,CAAC;IAChC;AACF;AAsBO,SAASC,kBAAkBA,CAAC1H,GAAW,EAAuB;IACnE,MAAMkC,MAA2B,GAAG;QAClCyF,QAAQ,EAAE,EAAE;QACZC,OAAO,EAAE,EAAE;QACXxF,WAAW,EAAE,KAAK;QAClByF,aAAa,EAAE,EAAE;QACjBC,kBAAkB,EAAE;IACtB,CAAC;IAED,IAAIxF,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC;IAE1B,IAAI,CAACsC,MAAM,CAACyF,0BAA0B,EAAE;QACtC,MAAM,IAAI3I,MAAM,CAACoD,6JAAe,CAAC,2CAA2C,CAAC;IAC/E;IACAF,MAAM,GAAGA,MAAM,CAACyF,0BAA0B;IAC1C,IAAIzF,MAAM,CAACG,WAAW,EAAE;QACtBP,MAAM,CAACE,WAAW,GAAGE,MAAM,CAACG,WAAW;IACzC;IACA,IAAIH,MAAM,CAAC0F,aAAa,EAAE;QACxB9F,MAAM,CAAC2F,aAAa,GAAGvF,MAAM,CAAC0F,aAAa;IAC7C;IACA,IAAI1F,MAAM,CAAC2F,kBAAkB,EAAE;QAC7B/F,MAAM,CAAC4F,kBAAkB,GAAGxF,MAAM,CAACwF,kBAAkB,IAAI,EAAE;IAC7D;IAEA,IAAIxF,MAAM,CAACuB,cAAc,EAAE;YACzBjE,wKAAO,EAAC0C,MAAM,CAACuB,cAAc,CAAC,CAAC7C,OAAO,EAAE+C,MAAM,IAAK;YACjD,+BAAA;YACA7B,MAAM,CAACyF,QAAQ,CAAC/D,IAAI,CAAC;gBAAEG,MAAM,MAAErE,kLAAiB,MAACE,wKAAO,EAASmE,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;YAAE,CAAC,CAAC;QACxF,CAAC,CAAC;IACJ;IAEA,IAAI1B,MAAM,CAAC4F,MAAM,EAAE;YACjBtI,wKAAO,EAAC0C,MAAM,CAAC4F,MAAM,CAAC,CAAClH,OAAO,EAAEmH,MAAM,IAAK;YACzC,MAAMC,UAAkD,GAAG;gBACzDnH,GAAG,EAAEkH,MAAM,CAACrF,GAAG;gBACfuF,QAAQ,EAAEF,MAAM,CAACjC,QAAQ;gBACzBoC,YAAY,EAAEH,MAAM,CAACI,YAAY;gBACjCC,SAAS,EAAE,IAAIxF,IAAI,CAACmF,MAAM,CAACM,SAAS;YACtC,CAAC;YACD,IAAIN,MAAM,CAACO,SAAS,EAAE;gBACpBN,UAAU,CAACO,SAAS,GAAG;oBAAEC,EAAE,EAAET,MAAM,CAACO,SAAS,CAACG,EAAE;oBAAEC,WAAW,EAAEX,MAAM,CAACO,SAAS,CAACK,WAAAA;gBAAY,CAAC;YAC/F;YACA,IAAIZ,MAAM,CAACa,KAAK,EAAE;gBAChBZ,UAAU,CAACa,KAAK,GAAG;oBAAEL,EAAE,EAAET,MAAM,CAACa,KAAK,CAACH,EAAE;oBAAEC,WAAW,EAAEX,MAAM,CAACa,KAAK,CAACD,WAAAA;gBAAY,CAAC;YACnF;YACA7G,MAAM,CAAC0F,OAAO,CAAChE,IAAI,CAACwE,UAAU,CAAC;QACjC,CAAC,CAAC;IACJ;IACA,OAAOlG,MAAM;AACf;AAEO,SAASgH,qBAAqBA,CAAClJ,GAAW,EAAkB;IACjE,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,IAAImJ,gBAAgB,GAAG,CAAC,CAAmB;IAC3C,IAAI1I,MAAM,CAAC2I,uBAAuB,EAAE;QAClCD,gBAAgB,GAAG;YACjBE,iBAAiB,EAAE5I,MAAM,CAAC2I,uBAAuB,CAACE,iBAAAA;QACpD,CAAmB;QACnB,IAAIC,aAAa;QACjB,IACE9I,MAAM,CAAC2I,uBAAuB,IAC9B3I,MAAM,CAAC2I,uBAAuB,CAAC/C,IAAI,IACnC5F,MAAM,CAAC2I,uBAAuB,CAAC/C,IAAI,CAACmD,gBAAgB,EACpD;YACAD,aAAa,GAAG9I,MAAM,CAAC2I,uBAAuB,CAAC/C,IAAI,CAACmD,gBAAgB,IAAI,CAAC,CAAC;YAC1EL,gBAAgB,CAACM,IAAI,GAAGF,aAAa,CAACG,IAAI;QAC5C;QACA,IAAIH,aAAa,EAAE;YACjB,MAAMI,WAAW,GAAGJ,aAAa,CAACK,KAAK;YACvC,IAAID,WAAW,EAAE;gBACfR,gBAAgB,CAACU,QAAQ,GAAGF,WAAW;gBACvCR,gBAAgB,CAACW,IAAI,GAAGhK,uLAAwB,CAACiK,KAAK;YACxD,CAAC,MAAM;gBACLZ,gBAAgB,CAACU,QAAQ,GAAGN,aAAa,CAACS,IAAI;gBAC9Cb,gBAAgB,CAACW,IAAI,GAAGhK,uLAAwB,CAACmK,IAAI;YACvD;QACF;IACF;IAEA,OAAOd,gBAAgB;AACzB;AAEO,SAASe,2BAA2BA,CAAClK,GAAW,EAAE;IACvD,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,OAAOS,MAAM,CAAC0J,uBAAuB;AACvC;AAEA,wCAAA;AACA,oFAAA;AACA,SAASC,iBAAiBA,CAACC,MAAuB,EAAsB;IACtE,MAAMC,aAAa,GAAGC,MAAM,CAACC,IAAI,CAACH,MAAM,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC;IAC7D,MAAMC,uBAAuB,GAAGJ,MAAM,CAACC,IAAI,CAACH,MAAM,CAACI,IAAI,CAACH,aAAa,CAAC,CAAC,CAAClF,QAAQ,CAAC,CAAC;IAClF,MAAMwF,gBAAgB,GAAG,CAACD,uBAAuB,IAAI,EAAE,EAAEnH,KAAK,CAAC,GAAG,CAAC;IACnE,OAAOoH,gBAAgB,CAACC,MAAM,IAAI,CAAC,GAAGD,gBAAgB,CAAC,CAAC,CAAC,GAAG,EAAE;AAChE;AAEA,SAASE,kBAAkBA,CAACT,MAAuB,EAAE;IACnD,MAAMU,OAAO,GAAGR,MAAM,CAACC,IAAI,CAACH,MAAM,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC,CAACO,YAAY,CAAC,CAAC;IAC1D,OAAOT,MAAM,CAACC,IAAI,CAACH,MAAM,CAACI,IAAI,CAACM,OAAO,CAAC,CAAC,CAAC3F,QAAQ,CAAC,CAAC;AACrD;AAEO,SAAS6F,gCAAgCA,CAACC,GAAW,EAAE;IAC5D,MAAMC,aAAa,GAAG,IAAI9L,mLAAa,CAAC,CAAC,CAAC,CAAC,EAAC,mBAAA;IAE5C,MAAM+L,cAAc,OAAG5L,+KAAc,EAAC0L,GAAG,CAAC,EAAC,kDAAA;IAC3C,aAAA;IACA,MAAOE,cAAc,CAACC,cAAc,CAACR,MAAM,CAAE;QAC3C,yCAAA;QACA,IAAIS,iBAAiB,EAAC,mEAAA;QAEtB,MAAMC,qBAAqB,GAAGhB,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC;QACjEa,iBAAiB,OAAGpM,8JAAK,EAACqM,qBAAqB,CAAC;QAEhD,MAAMC,iBAAiB,GAAGjB,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC;QAC7Da,iBAAiB,OAAGpM,8JAAK,EAACsM,iBAAiB,EAAEF,iBAAiB,CAAC;QAE/D,MAAMG,oBAAoB,GAAGH,iBAAiB,CAACI,WAAW,CAAC,CAAC,EAAC,wDAAA;QAE7D,MAAMC,gBAAgB,GAAGpB,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC,EAAC,+DAAA;QAC7Da,iBAAiB,OAAGpM,8JAAK,EAACyM,gBAAgB,EAAEL,iBAAiB,CAAC;QAE9D,MAAMM,cAAc,GAAGL,qBAAqB,CAACG,WAAW,CAAC,CAAC;QAC1D,MAAMG,YAAY,GAAGL,iBAAiB,CAACE,WAAW,CAAC,CAAC;QACpD,MAAMI,mBAAmB,GAAGH,gBAAgB,CAACD,WAAW,CAAC,CAAC;QAE1D,IAAII,mBAAmB,KAAKL,oBAAoB,EAAE;YAChD,mCAAA;YACA,MAAM,IAAI9K,KAAK,CACZ,CAAA,yCAAA,EAA2CmL,mBAAoB,CAAA,gCAAA,EAAkCL,oBAAqB,EACzH,CAAC;QACH;QAEA,MAAM/J,OAAgC,GAAG,CAAC,CAAC;QAC3C,IAAImK,YAAY,GAAG,CAAC,EAAE;YACpB,MAAME,WAAW,GAAGxB,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAACoB,YAAY,CAAC,CAAC;YAClEP,iBAAiB,OAAGpM,8JAAK,EAAC6M,WAAW,EAAET,iBAAiB,CAAC;YACzD,MAAMU,kBAAkB,OAAGxM,+KAAc,EAACuM,WAAW,CAAC;YACtD,aAAA;YACA,MAAOC,kBAAkB,CAACX,cAAc,CAACR,MAAM,CAAE;gBAC/C,MAAMoB,cAAc,GAAG7B,iBAAiB,CAAC4B,kBAAkB,CAAC;gBAC5DA,kBAAkB,CAACvB,IAAI,CAAC,CAAC,CAAC,EAAC,2BAAA;gBAC3B,IAAIwB,cAAc,EAAE;oBAClBvK,OAAO,CAACuK,cAAc,CAAC,GAAGnB,kBAAkB,CAACkB,kBAAkB,CAAC;gBAClE;YACF;QACF;QAEA,IAAIE,aAAa;QACjB,MAAMC,aAAa,GAAGP,cAAc,GAAGC,YAAY,GAAG,EAAE;QACxD,IAAIM,aAAa,GAAG,CAAC,EAAE;YACrB,MAAMC,aAAa,GAAG7B,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAAC0B,aAAa,CAAC,CAAC;YACrEb,iBAAiB,OAAGpM,8JAAK,EAACkN,aAAa,EAAEd,iBAAiB,CAAC;YAC3D,kGAAA;YACA,MAAMe,mBAAmB,GAAG9B,MAAM,CAACC,IAAI,CAACY,cAAc,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC,CAACiB,WAAW,CAAC,CAAC;YAC7E,MAAMY,aAAa,GAAGhB,iBAAiB,CAACI,WAAW,CAAC,CAAC;YACrD,2BAAA;YACA,IAAIW,mBAAmB,KAAKC,aAAa,EAAE;gBACzC,MAAM,IAAI3L,KAAK,CACZ,CAAA,0CAAA,EAA4C0L,mBAAoB,CAAA,gCAAA,EAAkCC,aAAc,EACnH,CAAC;YACH;YACAJ,aAAa,OAAG1M,+KAAc,EAAC4M,aAAa,CAAC;QAC/C;QACA,MAAMG,WAAW,GAAG7K,OAAO,CAAC,cAAc,CAAC;QAE3C,OAAQ6K,WAAW;YACjB,KAAK,OAAO;gBAAE;oBACZ,MAAMC,YAAY,GAAG9K,OAAO,CAAC,YAAY,CAAC,GAAG,IAAI,GAAGA,OAAO,CAAC,eAAe,CAAC,GAAG,GAAG;oBAClF,MAAM,IAAIf,KAAK,CAAC6L,YAAY,CAAC;gBAC/B;YACA,KAAK,OAAO;gBAAE;oBACZ,MAAMC,WAAW,GAAG/K,OAAO,CAAC,cAAc,CAAC;oBAC3C,MAAMgL,SAAS,GAAGhL,OAAO,CAAC,YAAY,CAAC;oBAEvC,OAAQgL,SAAS;wBACf,KAAK,KAAK;4BAAE;gCACVvB,aAAa,CAACwB,WAAW,CAACzB,GAAG,CAAC;gCAC9B,OAAOC,aAAa;4BACtB;wBAEA,KAAK,SAAS;4BAAE;gCAAA,IAAAyB,cAAA;gCACd,MAAMC,QAAQ,GAAA,CAAAD,cAAA,GAAGV,aAAa,MAAA,QAAAU,cAAA,KAAA,KAAA,IAAA,KAAA,IAAbA,cAAA,CAAenC,IAAI,CAAC0B,aAAa,CAAC;gCACnDhB,aAAa,CAAC2B,UAAU,CAACD,QAAQ,CAAC;gCAClC;4BACF;wBAEA,KAAK,UAAU;4BACb;gCACE,OAAQJ,WAAW;oCACjB,KAAK,UAAU;wCAAE;4CAAA,IAAAM,eAAA;4CACf,MAAMC,YAAY,GAAA,CAAAD,eAAA,GAAGb,aAAa,MAAA,QAAAa,eAAA,KAAA,KAAA,IAAA,KAAA,IAAbA,eAAA,CAAetC,IAAI,CAAC0B,aAAa,CAAC;4CACvDhB,aAAa,CAAC8B,WAAW,CAACD,YAAY,CAAC5H,QAAQ,CAAC,CAAC,CAAC;4CAClD;wCACF;oCACA;wCAAS;4CACP,MAAMoH,YAAY,GAAI,CAAA,wBAAA,EAA0BC,WAAY,CAAA,6BAAA,CAA8B;4CAC1F,MAAM,IAAI9L,KAAK,CAAC6L,YAAY,CAAC;wCAC/B;gCACF;4BACF;4BACA;wBACF,KAAK,OAAO;4BACV;gCACE,OAAQC,WAAW;oCACjB,KAAK,UAAU;wCAAE;4CAAA,IAAAS,eAAA;4CACf,MAAMC,SAAS,GAAA,CAAAD,eAAA,GAAGhB,aAAa,MAAA,QAAAgB,eAAA,KAAA,KAAA,IAAA,KAAA,IAAbA,eAAA,CAAezC,IAAI,CAAC0B,aAAa,CAAC;4CACpDhB,aAAa,CAACiC,QAAQ,CAACD,SAAS,CAAC/H,QAAQ,CAAC,CAAC,CAAC;4CAC5C;wCACF;oCACA;wCAAS;4CACP,MAAMoH,YAAY,GAAI,CAAA,wBAAA,EAA0BC,WAAY,CAAA,0BAAA,CAA2B;4CACvF,MAAM,IAAI9L,KAAK,CAAC6L,YAAY,CAAC;wCAC/B;gCACF;4BACF;4BACA;wBACF;4BAAS;gCACP,0GAAA;gCACA,8BAAA;gCACA,MAAMa,cAAc,GAAI,CAAA,+BAAA,EAAiCd,WAAY,CAAA,CAAA,CAAE;gCACvE,sCAAA;gCACAe,OAAO,CAACC,IAAI,CAACF,cAAc,CAAC;4BAC9B;oBACF;gBACF;QACF;IACF;AACF;AAEO,SAASG,oBAAoBA,CAACxN,GAAW,EAAE;IAChD,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,OAAOS,MAAM,CAACgN,sBAAsB;AACtC;AAEO,SAASC,2BAA2BA,CAAC1N,GAAW,EAAE;IACvD,WAAOT,yKAAQ,EAACS,GAAG,CAAC;AACtB;AAEO,SAAS2N,0BAA0BA,CAAC3N,GAAW,EAAE;IACtD,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,MAAM4N,eAAe,GAAGnN,MAAM,CAACoN,SAAS;IACxC,OAAO;QACLpE,IAAI,EAAEmE,eAAe,CAAClE,IAAI;QAC1BoE,eAAe,EAAEF,eAAe,CAACG,eAAAA;IACnC,CAAC;AACH;AAEO,SAASC,mBAAmBA,CAAChO,GAAW,EAAE;IAC/C,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,IAAIS,MAAM,CAACwN,YAAY,IAAIxN,MAAM,CAACwN,YAAY,CAACtN,KAAK,EAAE;QACpD,4GAAA;QACA,WAAOf,wKAAO,EAACa,MAAM,CAACwN,YAAY,CAACtN,KAAK,CAAC;IAC3C;IACA,OAAO,EAAE;AACX;AAGO,SAASuN,eAAeA,CAAClO,GAAW,EAAsB;IAC/D,MAAMkC,MAA0B,GAAG;QACjCgB,IAAI,EAAE,EAAE;QACRH,YAAY,EAAE;IAChB,CAAC;IAED,IAAIT,MAAM,OAAG/C,yKAAQ,EAACS,GAAG,CAAC;IAC1B,IAAI,CAACsC,MAAM,CAAC6L,gBAAgB,EAAE;QAC5B,MAAM,IAAI/O,MAAM,CAACoD,6JAAe,CAAC,iCAAiC,CAAC;IACrE;IACAF,MAAM,GAAGA,MAAM,CAAC6L,gBAAgB;IAChC,IAAI7L,MAAM,CAACa,IAAI,EAAE;QACfjB,MAAM,CAACgB,IAAI,GAAGZ,MAAM,CAACa,IAAI,CAACwB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CACzCA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAClBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CACvBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CACtBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;IAC3B;IACA,IAAIrC,MAAM,CAACW,YAAY,EAAE;QACvBf,MAAM,CAACa,YAAY,GAAG,IAAIC,IAAI,CAACV,MAAM,CAACW,YAAY,CAAC;IACrD;IAEA,OAAOf,MAAM;AACf;AAEA,MAAMkM,aAAa,GAAGA,CAACxL,OAAuB,EAAEyL,IAAkC,GAAG,CAAC,CAAC,KAAK;IAC1F,MAAM,EAAEvL,GAAG,EAAEG,YAAY,EAAEE,IAAI,EAAEE,IAAI,EAAEiL,SAAS,EAAEC,QAAAA,EAAU,GAAG3L,OAAO;IAEtE,IAAI,KAACtD,yKAAQ,EAAC+O,IAAI,CAAC,EAAE;QACnBA,IAAI,GAAG,CAAC,CAAC;IACX;IAEA,MAAMxL,IAAI,OAAGnD,kLAAiB,MAACE,wKAAO,EAACkD,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;IACrD,MAAMC,YAAY,GAAGE,YAAY,GAAG,IAAID,IAAI,KAACpD,wKAAO,EAACqD,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAGuL,SAAS;IACxF,MAAMtL,IAAI,OAAGzD,6KAAY,MAACG,wKAAO,EAACuD,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;IACjD,MAAMC,IAAI,OAAGzD,6KAAY,EAAC0D,IAAI,IAAI,EAAE,CAAC;IAErC,OAAO;QACLR,IAAI;QACJE,YAAY;QACZG,IAAI;QACJE,IAAI;QACJqL,SAAS,EAAEH,SAAS;QACpBI,QAAQ,EAAEH,QAAQ;QAClBI,cAAc,EAAEN,IAAI,CAACO,cAAc,GAAGP,IAAI,CAACO,cAAc,GAAG;IAC9D,CAAC;AACH,CAAC;AAGM,SAASC,gBAAgBA,CAAC7O,GAAW,EAAE;IAC5C,MAAMkC,MAML,GAAG;QACFC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,KAAK;QAClB0M,UAAU,EAAEN,SAAS;QACrBO,eAAe,EAAEP,SAAS;QAC1BQ,SAAS,EAAER;IACb,CAAC;IACD,IAAIpM,WAAW,GAAG,KAAK;IACvB,IAAI0M,UAAU;IACd,MAAMxM,MAAM,GAAGnC,mBAAmB,CAACO,KAAK,CAACV,GAAG,CAAC;IAE7C,MAAMiP,yBAAyB,IAAIC,iBAAiC,IAAK;QACvE,IAAIA,iBAAiB,EAAE;gBACrBtP,wKAAO,EAACsP,iBAAiB,CAAC,CAAClO,OAAO,EAAE8C,YAAY,IAAK;gBACnD5B,MAAM,CAACC,OAAO,CAACyB,IAAI,CAAC;oBAAEG,MAAM,MAAErE,kLAAiB,MAACE,wKAAO,EAACkE,YAAY,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;oBAAEZ,IAAI,EAAE;gBAAE,CAAC,CAAC;YACpG,CAAC,CAAC;QACJ;IACF,CAAC;IAED,MAAM+L,gBAAoC,GAAG7M,MAAM,CAACC,gBAAgB;IACpE,MAAM6M,kBAAsC,GAAG9M,MAAM,CAAC+M,kBAAkB;IAExE,IAAIF,gBAAgB,EAAE;QACpB,IAAIA,gBAAgB,CAAC1M,WAAW,EAAE;YAChCL,WAAW,GAAG+M,gBAAgB,CAAC1M,WAAW;QAC5C;QACA,IAAI0M,gBAAgB,CAACxM,QAAQ,EAAE;gBAC7B/C,wKAAO,EAACuP,gBAAgB,CAACxM,QAAQ,CAAC,CAAC3B,OAAO,EAAE4B,OAAO,IAAK;gBACtD,MAAMC,IAAI,OAAGnD,kLAAiB,MAACE,wKAAO,EAACgD,OAAO,CAACE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAC7D,MAAMC,YAAY,GAAG,IAAIC,IAAI,KAACpD,wKAAO,EAACgD,OAAO,CAACK,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBACrE,MAAMC,IAAI,OAAGzD,6KAAY,MAACG,wKAAO,EAACgD,OAAO,CAACO,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBACzD,MAAMC,IAAI,OAAGzD,6KAAY,EAACiD,OAAO,CAACS,IAAI,IAAI,EAAE,CAAC;gBAC7CnB,MAAM,CAACC,OAAO,CAACyB,IAAI,CAAC;oBAAEf,IAAI;oBAAEE,YAAY;oBAAEG,IAAI;oBAAEE;gBAAK,CAAC,CAAC;YACzD,CAAC,CAAC;QACJ;QAEA,IAAI+L,gBAAgB,CAACG,MAAM,EAAE;YAC3BR,UAAU,GAAGK,gBAAgB,CAACG,MAAM;QACtC;QACA,IAAIH,gBAAgB,CAACI,UAAU,EAAE;YAC/BT,UAAU,GAAGK,gBAAgB,CAACI,UAAU;QAC1C,CAAC,MAAM,IAAInN,WAAW,IAAIF,MAAM,CAACC,OAAO,CAAC0I,MAAM,GAAG,CAAC,EAAE;YAAA,IAAA2E,eAAA;YACnDV,UAAU,GAAA,CAAAU,eAAA,GAAGtN,MAAM,CAACC,OAAO,CAACD,MAAM,CAACC,OAAO,CAAC0I,MAAM,GAAG,CAAC,CAAC,MAAA,QAAA2E,eAAA,KAAA,KAAA,IAAA,KAAA,IAAzCA,eAAA,CAA2C3M,IAAI;QAC9D;QACA,IAAIsM,gBAAgB,CAACtL,cAAc,EAAE;YACnCoL,yBAAyB,CAACE,gBAAgB,CAACtL,cAAc,CAAC;QAC5D;IACF;IAEA,IAAIuL,kBAAkB,EAAE;QACtB,IAAIA,kBAAkB,CAAC3M,WAAW,EAAE;YAClCL,WAAW,GAAGgN,kBAAkB,CAAC3M,WAAW;QAC9C;QAEA,IAAI2M,kBAAkB,CAACK,OAAO,EAAE;gBAC9B7P,wKAAO,EAACwP,kBAAkB,CAACK,OAAO,CAAC,CAACzO,OAAO,EAAE4B,OAAO,IAAK;gBACvDV,MAAM,CAACC,OAAO,CAACyB,IAAI,CAACwK,aAAa,CAACxL,OAAO,CAAC,CAAC;YAC7C,CAAC,CAAC;QACJ;QACA,IAAIwM,kBAAkB,CAACM,YAAY,EAAE;gBACnC9P,wKAAO,EAACwP,kBAAkB,CAACM,YAAY,CAAC,CAAC1O,OAAO,EAAE4B,OAAO,IAAK;gBAC5DV,MAAM,CAACC,OAAO,CAACyB,IAAI,CAACwK,aAAa,CAACxL,OAAO,EAAE;oBAAEgM,cAAc,EAAE;gBAAK,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC;QACJ;QAEA,IAAIQ,kBAAkB,CAACpH,aAAa,EAAE;YACpC9F,MAAM,CAAC8M,SAAS,GAAGI,kBAAkB,CAACpH,aAAa;QACrD;QACA,IAAIoH,kBAAkB,CAACO,mBAAmB,EAAE;YAC1CzN,MAAM,CAAC6M,eAAe,GAAGK,kBAAkB,CAACO,mBAAmB;QACjE;QACA,IAAIP,kBAAkB,CAACvL,cAAc,EAAE;YACrCoL,yBAAyB,CAACG,kBAAkB,CAACvL,cAAc,CAAC;QAC9D;IACF;IAEA3B,MAAM,CAACE,WAAW,GAAGA,WAAW;IAChC,IAAIA,WAAW,EAAE;QACfF,MAAM,CAAC4M,UAAU,GAAGA,UAAU;IAChC;IACA,OAAO5M,MAAM;AACf;AAEO,SAAS0N,gBAAgBA,CAAC5P,GAAW,EAAE;IAC5C,MAAMS,MAAM,OAAGlB,yKAAQ,EAACS,GAAG,CAAC;IAC5B,MAAM6P,MAAM,GAAGpP,MAAM,CAACqP,cAAc;IACpC,OAAOD,MAAM;AACf"}},
    {"offset": {"line": 2046, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/extensions.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2020 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as stream from 'node:stream'\n\nimport * as errors from '../errors.ts'\nimport type { TypedClient } from './client.ts'\nimport { isBoolean, isString, isValidBucketName, isValidPrefix, uriEscape } from './helper.ts'\nimport { readAsString } from './response.ts'\nimport type { BucketItemWithMetadata, BucketStream } from './type.ts'\nimport { parseListObjectsV2WithMetadata } from './xml-parser.ts'\n\nexport class Extensions {\n  private readonly client: TypedClient\n\n  constructor(client: TypedClient) {\n    this.client = client\n  }\n\n  /**\n   * List the objects in the bucket using S3 ListObjects V2 With Metadata\n   *\n   * @param bucketName - name of the bucket\n   * @param prefix - the prefix of the objects that should be listed (optional, default `''`)\n   * @param recursive - `true` indicates recursive style listing and `false` indicates directory style listing delimited by '/'. (optional, default `false`)\n   * @param startAfter - Specifies the key to start after when listing objects in a bucket. (optional, default `''`)\n   * @returns stream emitting the objects in the bucket, the object is of the format:\n   */\n  public listObjectsV2WithMetadata(\n    bucketName: string,\n    prefix?: string,\n    recursive?: boolean,\n    startAfter?: string,\n  ): BucketStream<BucketItemWithMetadata> {\n    if (prefix === undefined) {\n      prefix = ''\n    }\n    if (recursive === undefined) {\n      recursive = false\n    }\n    if (startAfter === undefined) {\n      startAfter = ''\n    }\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidPrefix(prefix)) {\n      throw new errors.InvalidPrefixError(`Invalid prefix : ${prefix}`)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (!isBoolean(recursive)) {\n      throw new TypeError('recursive should be of type \"boolean\"')\n    }\n    if (!isString(startAfter)) {\n      throw new TypeError('startAfter should be of type \"string\"')\n    }\n\n    // if recursive is false set delimiter to '/'\n    const delimiter = recursive ? '' : '/'\n    return stream.Readable.from(this.listObjectsV2WithMetadataGen(bucketName, prefix, delimiter, startAfter), {\n      objectMode: true,\n    })\n  }\n\n  private async *listObjectsV2WithMetadataGen(\n    bucketName: string,\n    prefix: string,\n    delimiter: string,\n    startAfter: string,\n  ): AsyncIterable<BucketItemWithMetadata> {\n    let ended = false\n    let continuationToken = ''\n    do {\n      const result = await this.listObjectsV2WithMetadataQuery(\n        bucketName,\n        prefix,\n        continuationToken,\n        delimiter,\n        startAfter,\n      )\n      ended = !result.isTruncated\n      continuationToken = result.nextContinuationToken\n      for (const obj of result.objects) {\n        yield obj\n      }\n    } while (!ended)\n  }\n\n  private async listObjectsV2WithMetadataQuery(\n    bucketName: string,\n    prefix: string,\n    continuationToken: string,\n    delimiter: string,\n    startAfter: string,\n  ) {\n    const queries = []\n\n    // Call for listing objects v2 API\n    queries.push(`list-type=2`)\n    queries.push(`encoding-type=url`)\n    // escape every value in query string, except maxKeys\n    queries.push(`prefix=${uriEscape(prefix)}`)\n    queries.push(`delimiter=${uriEscape(delimiter)}`)\n    queries.push(`metadata=true`)\n\n    if (continuationToken) {\n      continuationToken = uriEscape(continuationToken)\n      queries.push(`continuation-token=${continuationToken}`)\n    }\n    // Set start-after\n    if (startAfter) {\n      startAfter = uriEscape(startAfter)\n      queries.push(`start-after=${startAfter}`)\n    }\n    queries.push(`max-keys=1000`)\n    queries.sort()\n    let query = ''\n    if (queries.length > 0) {\n      query = `${queries.join('&')}`\n    }\n    const method = 'GET'\n    const res = await this.client.makeRequestAsync({ method, bucketName, query })\n    return parseListObjectsV2WithMetadata(await readAsString(res))\n  }\n}\n"],"names":["stream","errors","isBoolean","isString","isValidBucketName","isValidPrefix","uriEscape","readAsString","parseListObjectsV2WithMetadata","Extensions","constructor","client","listObjectsV2WithMetadata","bucketName","prefix","recursive","startAfter","undefined","InvalidBucketNameError","InvalidPrefixError","TypeError","delimiter","Readable","from","listObjectsV2WithMetadataGen","objectMode","ended","continuationToken","result","listObjectsV2WithMetadataQuery","isTruncated","nextContinuationToken","obj","objects","queries","push","sort","query","length","join","method","res","makeRequestAsync"],"mappings":"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"}},
    {"offset": {"line": 2166, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/join-host-port.ts"],"sourcesContent":["/**\n * joinHostPort combines host and port into a network address of the\n * form \"host:port\". If host contains a colon, as found in literal\n * IPv6 addresses, then JoinHostPort returns \"[host]:port\".\n *\n * @param host\n * @param port\n * @returns Cleaned up host\n * @internal\n */\nexport function joinHostPort(host: string, port?: number): string {\n  if (port === undefined) {\n    return host\n  }\n\n  // We assume that host is a literal IPv6 address if host has\n  // colons.\n  if (host.includes(':')) {\n    return `[${host}]:${port.toString()}`\n  }\n\n  return `${host}:${port.toString()}`\n}\n"],"names":["joinHostPort","host","port","undefined","includes","toString"],"mappings":"AAAA;;;;;;;;;CASA;;;;AACO,SAASA,YAAYA,CAACC,IAAY,EAAEC,IAAa,EAAU;IAChE,IAAIA,IAAI,KAAKC,SAAS,EAAE;QACtB,OAAOF,IAAI;IACb;IAEA,4DAAA;IACA,UAAA;IACA,IAAIA,IAAI,CAACG,QAAQ,CAAC,GAAG,CAAC,EAAE;QACtB,OAAQ,CAAA,CAAA,EAAGH,IAAK,CAAA,EAAA,EAAIC,IAAI,CAACG,QAAQ,CAAC,CAAE,EAAC;IACvC;IAEA,OAAQ,GAAEJ,IAAK,CAAA,CAAA,EAAGC,IAAI,CAACG,QAAQ,CAAC,CAAE,EAAC;AACrC"}},
    {"offset": {"line": 2194, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/post-policy.ts"],"sourcesContent":["// Build PostPolicy object that can be signed by presignedPostPolicy\nimport * as errors from '../errors.ts'\nimport { isObject, isValidBucketName, isValidObjectName, isValidPrefix } from './helper.ts'\nimport type { ObjectMetaData } from './type.ts'\n\nexport class PostPolicy {\n  public policy: { conditions: (string | number)[][]; expiration?: string } = {\n    conditions: [],\n  }\n  public formData: Record<string, string> = {}\n\n  // set expiration date\n  setExpires(date: Date) {\n    if (!date) {\n      throw new errors.InvalidDateError('Invalid date: cannot be null')\n    }\n    this.policy.expiration = date.toISOString()\n  }\n\n  // set object name\n  setKey(objectName: string) {\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name : ${objectName}`)\n    }\n    this.policy.conditions.push(['eq', '$key', objectName])\n    this.formData.key = objectName\n  }\n\n  // set object name prefix, i.e policy allows any keys with this prefix\n  setKeyStartsWith(prefix: string) {\n    if (!isValidPrefix(prefix)) {\n      throw new errors.InvalidPrefixError(`Invalid prefix : ${prefix}`)\n    }\n    this.policy.conditions.push(['starts-with', '$key', prefix])\n    this.formData.key = prefix\n  }\n\n  // set bucket name\n  setBucket(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name : ${bucketName}`)\n    }\n    this.policy.conditions.push(['eq', '$bucket', bucketName])\n    this.formData.bucket = bucketName\n  }\n\n  // set Content-Type\n  setContentType(type: string) {\n    if (!type) {\n      throw new Error('content-type cannot be null')\n    }\n    this.policy.conditions.push(['eq', '$Content-Type', type])\n    this.formData['Content-Type'] = type\n  }\n\n  // set Content-Type prefix, i.e image/ allows any image\n  setContentTypeStartsWith(prefix: string) {\n    if (!prefix) {\n      throw new Error('content-type cannot be null')\n    }\n    this.policy.conditions.push(['starts-with', '$Content-Type', prefix])\n    this.formData['Content-Type'] = prefix\n  }\n\n  // set Content-Disposition\n  setContentDisposition(value: string) {\n    if (!value) {\n      throw new Error('content-disposition cannot be null')\n    }\n    this.policy.conditions.push(['eq', '$Content-Disposition', value])\n    this.formData['Content-Disposition'] = value\n  }\n\n  // set minimum/maximum length of what Content-Length can be.\n  setContentLengthRange(min: number, max: number) {\n    if (min > max) {\n      throw new Error('min cannot be more than max')\n    }\n    if (min < 0) {\n      throw new Error('min should be > 0')\n    }\n    if (max < 0) {\n      throw new Error('max should be > 0')\n    }\n    this.policy.conditions.push(['content-length-range', min, max])\n  }\n\n  // set user defined metadata\n  setUserMetaData(metaData: ObjectMetaData) {\n    if (!isObject(metaData)) {\n      throw new TypeError('metadata should be of type \"object\"')\n    }\n    Object.entries(metaData).forEach(([key, value]) => {\n      const amzMetaDataKey = `x-amz-meta-${key}`\n      this.policy.conditions.push(['eq', `$${amzMetaDataKey}`, value])\n      this.formData[amzMetaDataKey] = value.toString()\n    })\n  }\n}\n"],"names":["errors","isObject","isValidBucketName","isValidObjectName","isValidPrefix","PostPolicy","policy","conditions","formData","setExpires","date","InvalidDateError","expiration","toISOString","setKey","objectName","InvalidObjectNameError","push","key","setKeyStartsWith","prefix","InvalidPrefixError","setBucket","bucketName","InvalidBucketNameError","bucket","setContentType","type","Error","setContentTypeStartsWith","setContentDisposition","value","setContentLengthRange","min","max","setUserMetaData","metaData","TypeError","Object","entries","forEach","amzMetaDataKey","toString"],"mappings":"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"}},
    {"offset": {"line": 2324, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/request.ts"],"sourcesContent":["import type * as http from 'node:http'\nimport type * as https from 'node:https'\nimport type * as stream from 'node:stream'\nimport { pipeline } from 'node:stream'\nimport { promisify } from 'node:util'\n\nimport type { Transport } from './type.ts'\n\nconst pipelineAsync = promisify(pipeline)\n\nexport async function request(\n  transport: Transport,\n  opt: https.RequestOptions,\n  body: Buffer | string | stream.Readable | null = null,\n): Promise<http.IncomingMessage> {\n  return new Promise<http.IncomingMessage>((resolve, reject) => {\n    const requestObj = transport.request(opt, (response) => {\n      resolve(response)\n    })\n\n    requestObj.on('error', reject)\n\n    if (!body || Buffer.isBuffer(body) || typeof body === 'string') {\n      requestObj.end(body)\n    } else {\n      pipelineAsync(body, requestObj).catch(reject)\n    }\n  })\n}\n\nconst MAX_RETRIES = 10\nconst EXP_BACK_OFF_BASE_DELAY = 1000 // Base delay for exponential backoff\nconst ADDITIONAL_DELAY_FACTOR = 1.0 // to avoid synchronized retries\n\n// Retryable error codes for HTTP ( ref: minio-go)\nexport const retryHttpCodes: Record<string, boolean> = {\n  408: true,\n  429: true,\n  499: true,\n  500: true,\n  502: true,\n  503: true,\n  504: true,\n  520: true,\n}\n\nconst isHttpRetryable = (httpResCode: number) => {\n  return retryHttpCodes[httpResCode] !== undefined\n}\n\nconst sleep = (ms: number) => {\n  return new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nconst getExpBackOffDelay = (retryCount: number) => {\n  const backOffBy = EXP_BACK_OFF_BASE_DELAY * 2 ** retryCount\n  const additionalDelay = Math.random() * backOffBy * ADDITIONAL_DELAY_FACTOR\n  return backOffBy + additionalDelay\n}\n\nexport async function requestWithRetry(\n  transport: Transport,\n  opt: https.RequestOptions,\n  body: Buffer | string | stream.Readable | null = null,\n  maxRetries: number = MAX_RETRIES,\n): Promise<http.IncomingMessage> {\n  let attempt = 0\n  let isRetryable = false\n  while (attempt <= maxRetries) {\n    try {\n      const response = await request(transport, opt, body)\n      // Check if the HTTP status code is retryable\n      if (isHttpRetryable(response.statusCode as number)) {\n        isRetryable = true\n        throw new Error(`Retryable HTTP status: ${response.statusCode}`) // trigger retry attempt with calculated delay\n      }\n\n      return response // Success, return the raw response\n    } catch (err) {\n      if (isRetryable) {\n        attempt++\n        isRetryable = false\n\n        if (attempt > maxRetries) {\n          throw new Error(`Request failed after ${maxRetries} retries: ${err}`)\n        }\n        const delay = getExpBackOffDelay(attempt)\n        // eslint-disable-next-line no-console\n        console.warn(\n          `${new Date().toLocaleString()} Retrying request (attempt ${attempt}/${maxRetries}) after ${delay}ms due to: ${err}`,\n        )\n        await sleep(delay)\n      } else {\n        throw err // re-throw if any request, syntax errors\n      }\n    }\n  }\n\n  throw new Error(`${MAX_RETRIES} Retries exhausted, request failed.`)\n}\n"],"names":["pipeline","promisify","pipelineAsync","request","transport","opt","body","Promise","resolve","reject","requestObj","response","on","Buffer","isBuffer","end","catch","MAX_RETRIES","EXP_BACK_OFF_BASE_DELAY","ADDITIONAL_DELAY_FACTOR","retryHttpCodes","isHttpRetryable","httpResCode","undefined","sleep","ms","setTimeout","getExpBackOffDelay","retryCount","backOffBy","additionalDelay","Math","random","requestWithRetry","maxRetries","attempt","isRetryable","statusCode","Error","err","delay","console","warn","Date","toLocaleString"],"mappings":"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"}},
    {"offset": {"line": 2408, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/s3-endpoints.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015, 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isString } from './helper.ts'\n\n// List of currently supported endpoints.\nconst awsS3Endpoint = {\n  'af-south-1': 's3.af-south-1.amazonaws.com',\n  'ap-east-1': 's3.ap-east-1.amazonaws.com',\n  'ap-south-1': 's3.ap-south-1.amazonaws.com',\n  'ap-south-2': 's3.ap-south-2.amazonaws.com',\n  'ap-southeast-1': 's3.ap-southeast-1.amazonaws.com',\n  'ap-southeast-2': 's3.ap-southeast-2.amazonaws.com',\n  'ap-southeast-3': 's3.ap-southeast-3.amazonaws.com',\n  'ap-southeast-4': 's3.ap-southeast-4.amazonaws.com',\n  'ap-southeast-5': 's3.ap-southeast-5.amazonaws.com',\n  'ap-northeast-1': 's3.ap-northeast-1.amazonaws.com',\n  'ap-northeast-2': 's3.ap-northeast-2.amazonaws.com',\n  'ap-northeast-3': 's3.ap-northeast-3.amazonaws.com',\n  'ca-central-1': 's3.ca-central-1.amazonaws.com',\n  'ca-west-1': 's3.ca-west-1.amazonaws.com',\n  'cn-north-1': 's3.cn-north-1.amazonaws.com.cn',\n  'eu-central-1': 's3.eu-central-1.amazonaws.com',\n  'eu-central-2': 's3.eu-central-2.amazonaws.com',\n  'eu-north-1': 's3.eu-north-1.amazonaws.com',\n  'eu-south-1': 's3.eu-south-1.amazonaws.com',\n  'eu-south-2': 's3.eu-south-2.amazonaws.com',\n  'eu-west-1': 's3.eu-west-1.amazonaws.com',\n  'eu-west-2': 's3.eu-west-2.amazonaws.com',\n  'eu-west-3': 's3.eu-west-3.amazonaws.com',\n  'il-central-1': 's3.il-central-1.amazonaws.com',\n  'me-central-1': 's3.me-central-1.amazonaws.com',\n  'me-south-1': 's3.me-south-1.amazonaws.com',\n  'sa-east-1': 's3.sa-east-1.amazonaws.com',\n  'us-east-1': 's3.us-east-1.amazonaws.com',\n  'us-east-2': 's3.us-east-2.amazonaws.com',\n  'us-west-1': 's3.us-west-1.amazonaws.com',\n  'us-west-2': 's3.us-west-2.amazonaws.com',\n  'us-gov-east-1': 's3.us-gov-east-1.amazonaws.com',\n  'us-gov-west-1': 's3.us-gov-west-1.amazonaws.com',\n  // Add new endpoints here.\n}\n\nexport type Region = keyof typeof awsS3Endpoint | string\n\n// getS3Endpoint get relevant endpoint for the region.\nexport function getS3Endpoint(region: Region): string {\n  if (!isString(region)) {\n    throw new TypeError(`Invalid region: ${region}`)\n  }\n\n  const endpoint = (awsS3Endpoint as Record<string, string>)[region]\n  if (endpoint) {\n    return endpoint\n  }\n  return 's3.amazonaws.com'\n}\n"],"names":["isString","awsS3Endpoint","getS3Endpoint","region","TypeError","endpoint"],"mappings":"AAAA;;;;;;;;;;;;;;CAcA;;;;AAEA,SAASA,QAAQ,QAAQ,cAAa;;AAEtC,yCAAA;AACA,MAAMC,aAAa,GAAG;IACpB,YAAY,EAAE,6BAA6B;IAC3C,WAAW,EAAE,4BAA4B;IACzC,YAAY,EAAE,6BAA6B;IAC3C,YAAY,EAAE,6BAA6B;IAC3C,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,gBAAgB,EAAE,iCAAiC;IACnD,cAAc,EAAE,+BAA+B;IAC/C,WAAW,EAAE,4BAA4B;IACzC,YAAY,EAAE,gCAAgC;IAC9C,cAAc,EAAE,+BAA+B;IAC/C,cAAc,EAAE,+BAA+B;IAC/C,YAAY,EAAE,6BAA6B;IAC3C,YAAY,EAAE,6BAA6B;IAC3C,YAAY,EAAE,6BAA6B;IAC3C,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,cAAc,EAAE,+BAA+B;IAC/C,cAAc,EAAE,+BAA+B;IAC/C,YAAY,EAAE,6BAA6B;IAC3C,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,WAAW,EAAE,4BAA4B;IACzC,eAAe,EAAE,gCAAgC;IACjD,eAAe,EAAE;AAEnB,CAAC;AAKM,SAASC,aAAaA,CAACC,MAAc,EAAU;IACpD,IAAI,KAACH,yKAAQ,EAACG,MAAM,CAAC,EAAE;QACrB,MAAM,IAAIC,SAAS,CAAE,CAAA,gBAAA,EAAkBD,MAAO,EAAC,CAAC;IAClD;IAEA,MAAME,QAAQ,GAAIJ,aAAa,CAA4BE,MAAM,CAAC;IAClE,IAAIE,QAAQ,EAAE;QACZ,OAAOA,QAAQ;IACjB;IACA,OAAO,kBAAkB;AAC3B"}},
    {"offset": {"line": 2478, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/internal/client.ts"],"sourcesContent":["import * as crypto from 'node:crypto'\nimport * as fs from 'node:fs'\nimport type { IncomingHttpHeaders } from 'node:http'\nimport * as http from 'node:http'\nimport * as https from 'node:https'\nimport * as path from 'node:path'\nimport * as stream from 'node:stream'\n\nimport * as async from 'async'\nimport BlockStream2 from 'block-stream2'\nimport { isBrowser } from 'browser-or-node'\nimport _ from 'lodash'\nimport * as qs from 'query-string'\nimport xml2js from 'xml2js'\n\nimport { CredentialProvider } from '../CredentialProvider.ts'\nimport * as errors from '../errors.ts'\nimport type { SelectResults } from '../helpers.ts'\nimport {\n  CopyDestinationOptions,\n  CopySourceOptions,\n  DEFAULT_REGION,\n  LEGAL_HOLD_STATUS,\n  PRESIGN_EXPIRY_DAYS_MAX,\n  RETENTION_MODES,\n  RETENTION_VALIDITY_UNITS,\n} from '../helpers.ts'\nimport type { PostPolicyResult } from '../minio.ts'\nimport { postPresignSignatureV4, presignSignatureV4, signV4 } from '../signing.ts'\nimport { fsp, streamPromise } from './async.ts'\nimport { CopyConditions } from './copy-conditions.ts'\nimport { Extensions } from './extensions.ts'\nimport {\n  calculateEvenSplits,\n  extractMetadata,\n  getContentLength,\n  getScope,\n  getSourceVersionId,\n  getVersionId,\n  hashBinary,\n  insertContentType,\n  isAmazonEndpoint,\n  isBoolean,\n  isDefined,\n  isEmpty,\n  isNumber,\n  isObject,\n  isPlainObject,\n  isReadableStream,\n  isString,\n  isValidBucketName,\n  isValidEndpoint,\n  isValidObjectName,\n  isValidPort,\n  isValidPrefix,\n  isVirtualHostStyle,\n  makeDateLong,\n  PART_CONSTRAINTS,\n  partsRequired,\n  prependXAMZMeta,\n  readableStream,\n  sanitizeETag,\n  toMd5,\n  toSha256,\n  uriEscape,\n  uriResourceEscape,\n} from './helper.ts'\nimport { joinHostPort } from './join-host-port.ts'\nimport { PostPolicy } from './post-policy.ts'\nimport { requestWithRetry } from './request.ts'\nimport { drainResponse, readAsBuffer, readAsString } from './response.ts'\nimport type { Region } from './s3-endpoints.ts'\nimport { getS3Endpoint } from './s3-endpoints.ts'\nimport type {\n  Binary,\n  BucketItemFromList,\n  BucketItemStat,\n  BucketStream,\n  BucketVersioningConfiguration,\n  CopyObjectParams,\n  CopyObjectResult,\n  CopyObjectResultV2,\n  EncryptionConfig,\n  GetObjectLegalHoldOptions,\n  GetObjectOpts,\n  GetObjectRetentionOpts,\n  IncompleteUploadedBucketItem,\n  IRequest,\n  ItemBucketMetadata,\n  LifecycleConfig,\n  LifeCycleConfigParam,\n  ListObjectQueryOpts,\n  ListObjectQueryRes,\n  ObjectInfo,\n  ObjectLockConfigParam,\n  ObjectLockInfo,\n  ObjectMetaData,\n  ObjectRetentionInfo,\n  PreSignRequestParams,\n  PutObjectLegalHoldOptions,\n  PutTaggingParams,\n  RemoveObjectsParam,\n  RemoveObjectsRequestEntry,\n  RemoveObjectsResponse,\n  RemoveTaggingParams,\n  ReplicationConfig,\n  ReplicationConfigOpts,\n  RequestHeaders,\n  ResponseHeader,\n  ResultCallback,\n  Retention,\n  SelectOptions,\n  StatObjectOpts,\n  Tag,\n  TaggingOpts,\n  Tags,\n  Transport,\n  UploadedObjectInfo,\n  UploadPartConfig,\n} from './type.ts'\nimport type { ListMultipartResult, UploadedPart } from './xml-parser.ts'\nimport {\n  parseCompleteMultipart,\n  parseInitiateMultipart,\n  parseListObjects,\n  parseObjectLegalHoldConfig,\n  parseSelectObjectContentResponse,\n  uploadPartParser,\n} from './xml-parser.ts'\nimport * as xmlParsers from './xml-parser.ts'\n\nconst xml = new xml2js.Builder({ renderOpts: { pretty: false }, headless: true })\n\n// will be replaced by bundler.\nconst Package = { version: process.env.MINIO_JS_PACKAGE_VERSION || 'development' }\n\nconst requestOptionProperties = [\n  'agent',\n  'ca',\n  'cert',\n  'ciphers',\n  'clientCertEngine',\n  'crl',\n  'dhparam',\n  'ecdhCurve',\n  'family',\n  'honorCipherOrder',\n  'key',\n  'passphrase',\n  'pfx',\n  'rejectUnauthorized',\n  'secureOptions',\n  'secureProtocol',\n  'servername',\n  'sessionIdContext',\n] as const\n\nexport interface ClientOptions {\n  endPoint: string\n  accessKey?: string\n  secretKey?: string\n  useSSL?: boolean\n  port?: number\n  region?: Region\n  transport?: Transport\n  sessionToken?: string\n  partSize?: number\n  pathStyle?: boolean\n  credentialsProvider?: CredentialProvider\n  s3AccelerateEndpoint?: string\n  transportAgent?: http.Agent\n}\n\nexport type RequestOption = Partial<IRequest> & {\n  method: string\n  bucketName?: string\n  objectName?: string\n  query?: string\n  pathStyle?: boolean\n}\n\nexport type NoResultCallback = (error: unknown) => void\n\nexport interface MakeBucketOpt {\n  ObjectLocking?: boolean\n}\n\nexport interface RemoveOptions {\n  versionId?: string\n  governanceBypass?: boolean\n  forceDelete?: boolean\n}\n\ntype Part = {\n  part: number\n  etag: string\n}\n\nexport class TypedClient {\n  protected transport: Transport\n  protected host: string\n  protected port: number\n  protected protocol: string\n  protected accessKey: string\n  protected secretKey: string\n  protected sessionToken?: string\n  protected userAgent: string\n  protected anonymous: boolean\n  protected pathStyle: boolean\n  protected regionMap: Record<string, string>\n  public region?: string\n  protected credentialsProvider?: CredentialProvider\n  partSize: number = 64 * 1024 * 1024\n  protected overRidePartSize?: boolean\n\n  protected maximumPartSize = 5 * 1024 * 1024 * 1024\n  protected maxObjectSize = 5 * 1024 * 1024 * 1024 * 1024\n  public enableSHA256: boolean\n  protected s3AccelerateEndpoint?: string\n  protected reqOptions: Record<string, unknown>\n\n  protected transportAgent: http.Agent\n  private readonly clientExtensions: Extensions\n\n  constructor(params: ClientOptions) {\n    // @ts-expect-error deprecated property\n    if (params.secure !== undefined) {\n      throw new Error('\"secure\" option deprecated, \"useSSL\" should be used instead')\n    }\n    // Default values if not specified.\n    if (params.useSSL === undefined) {\n      params.useSSL = true\n    }\n    if (!params.port) {\n      params.port = 0\n    }\n    // Validate input params.\n    if (!isValidEndpoint(params.endPoint)) {\n      throw new errors.InvalidEndpointError(`Invalid endPoint : ${params.endPoint}`)\n    }\n    if (!isValidPort(params.port)) {\n      throw new errors.InvalidArgumentError(`Invalid port : ${params.port}`)\n    }\n    if (!isBoolean(params.useSSL)) {\n      throw new errors.InvalidArgumentError(\n        `Invalid useSSL flag type : ${params.useSSL}, expected to be of type \"boolean\"`,\n      )\n    }\n\n    // Validate region only if its set.\n    if (params.region) {\n      if (!isString(params.region)) {\n        throw new errors.InvalidArgumentError(`Invalid region : ${params.region}`)\n      }\n    }\n\n    const host = params.endPoint.toLowerCase()\n    let port = params.port\n    let protocol: string\n    let transport\n    let transportAgent: http.Agent\n    // Validate if configuration is not using SSL\n    // for constructing relevant endpoints.\n    if (params.useSSL) {\n      // Defaults to secure.\n      transport = https\n      protocol = 'https:'\n      port = port || 443\n      transportAgent = https.globalAgent\n    } else {\n      transport = http\n      protocol = 'http:'\n      port = port || 80\n      transportAgent = http.globalAgent\n    }\n\n    // if custom transport is set, use it.\n    if (params.transport) {\n      if (!isObject(params.transport)) {\n        throw new errors.InvalidArgumentError(\n          `Invalid transport type : ${params.transport}, expected to be type \"object\"`,\n        )\n      }\n      transport = params.transport\n    }\n\n    // if custom transport agent is set, use it.\n    if (params.transportAgent) {\n      if (!isObject(params.transportAgent)) {\n        throw new errors.InvalidArgumentError(\n          `Invalid transportAgent type: ${params.transportAgent}, expected to be type \"object\"`,\n        )\n      }\n\n      transportAgent = params.transportAgent\n    }\n\n    // User Agent should always following the below style.\n    // Please open an issue to discuss any new changes here.\n    //\n    //       MinIO (OS; ARCH) LIB/VER APP/VER\n    //\n    const libraryComments = `(${process.platform}; ${process.arch})`\n    const libraryAgent = `MinIO ${libraryComments} minio-js/${Package.version}`\n    // User agent block ends.\n\n    this.transport = transport\n    this.transportAgent = transportAgent\n    this.host = host\n    this.port = port\n    this.protocol = protocol\n    this.userAgent = `${libraryAgent}`\n\n    // Default path style is true\n    if (params.pathStyle === undefined) {\n      this.pathStyle = true\n    } else {\n      this.pathStyle = params.pathStyle\n    }\n\n    this.accessKey = params.accessKey ?? ''\n    this.secretKey = params.secretKey ?? ''\n    this.sessionToken = params.sessionToken\n    this.anonymous = !this.accessKey || !this.secretKey\n\n    if (params.credentialsProvider) {\n      this.anonymous = false\n      this.credentialsProvider = params.credentialsProvider\n    }\n\n    this.regionMap = {}\n    if (params.region) {\n      this.region = params.region\n    }\n\n    if (params.partSize) {\n      this.partSize = params.partSize\n      this.overRidePartSize = true\n    }\n    if (this.partSize < 5 * 1024 * 1024) {\n      throw new errors.InvalidArgumentError(`Part size should be greater than 5MB`)\n    }\n    if (this.partSize > 5 * 1024 * 1024 * 1024) {\n      throw new errors.InvalidArgumentError(`Part size should be less than 5GB`)\n    }\n\n    // SHA256 is enabled only for authenticated http requests. If the request is authenticated\n    // and the connection is https we use x-amz-content-sha256=UNSIGNED-PAYLOAD\n    // header for signature calculation.\n    this.enableSHA256 = !this.anonymous && !params.useSSL\n\n    this.s3AccelerateEndpoint = params.s3AccelerateEndpoint || undefined\n    this.reqOptions = {}\n    this.clientExtensions = new Extensions(this)\n  }\n  /**\n   * Minio extensions that aren't necessary present for Amazon S3 compatible storage servers\n   */\n  get extensions() {\n    return this.clientExtensions\n  }\n\n  /**\n   * @param endPoint - valid S3 acceleration end point\n   */\n  setS3TransferAccelerate(endPoint: string) {\n    this.s3AccelerateEndpoint = endPoint\n  }\n\n  /**\n   * Sets the supported request options.\n   */\n  public setRequestOptions(options: Pick<https.RequestOptions, (typeof requestOptionProperties)[number]>) {\n    if (!isObject(options)) {\n      throw new TypeError('request options should be of type \"object\"')\n    }\n    this.reqOptions = _.pick(options, requestOptionProperties)\n  }\n\n  /**\n   *  This is s3 Specific and does not hold validity in any other Object storage.\n   */\n  private getAccelerateEndPointIfSet(bucketName?: string, objectName?: string) {\n    if (!isEmpty(this.s3AccelerateEndpoint) && !isEmpty(bucketName) && !isEmpty(objectName)) {\n      // http://docs.aws.amazon.com/AmazonS3/latest/dev/transfer-acceleration.html\n      // Disable transfer acceleration for non-compliant bucket names.\n      if (bucketName.includes('.')) {\n        throw new Error(`Transfer Acceleration is not supported for non compliant bucket:${bucketName}`)\n      }\n      // If transfer acceleration is requested set new host.\n      // For more details about enabling transfer acceleration read here.\n      // http://docs.aws.amazon.com/AmazonS3/latest/dev/transfer-acceleration.html\n      return this.s3AccelerateEndpoint\n    }\n    return false\n  }\n\n  /**\n   *   Set application specific information.\n   *   Generates User-Agent in the following style.\n   *   MinIO (OS; ARCH) LIB/VER APP/VER\n   */\n  setAppInfo(appName: string, appVersion: string) {\n    if (!isString(appName)) {\n      throw new TypeError(`Invalid appName: ${appName}`)\n    }\n    if (appName.trim() === '') {\n      throw new errors.InvalidArgumentError('Input appName cannot be empty.')\n    }\n    if (!isString(appVersion)) {\n      throw new TypeError(`Invalid appVersion: ${appVersion}`)\n    }\n    if (appVersion.trim() === '') {\n      throw new errors.InvalidArgumentError('Input appVersion cannot be empty.')\n    }\n    this.userAgent = `${this.userAgent} ${appName}/${appVersion}`\n  }\n\n  /**\n   * returns options object that can be used with http.request()\n   * Takes care of constructing virtual-host-style or path-style hostname\n   */\n  protected getRequestOptions(\n    opts: RequestOption & {\n      region: string\n    },\n  ): IRequest & {\n    host: string\n    headers: Record<string, string>\n  } {\n    const method = opts.method\n    const region = opts.region\n    const bucketName = opts.bucketName\n    let objectName = opts.objectName\n    const headers = opts.headers\n    const query = opts.query\n\n    let reqOptions = {\n      method,\n      headers: {} as RequestHeaders,\n      protocol: this.protocol,\n      // If custom transportAgent was supplied earlier, we'll inject it here\n      agent: this.transportAgent,\n    }\n\n    // Verify if virtual host supported.\n    let virtualHostStyle\n    if (bucketName) {\n      virtualHostStyle = isVirtualHostStyle(this.host, this.protocol, bucketName, this.pathStyle)\n    }\n\n    let path = '/'\n    let host = this.host\n\n    let port: undefined | number\n    if (this.port) {\n      port = this.port\n    }\n\n    if (objectName) {\n      objectName = uriResourceEscape(objectName)\n    }\n\n    // For Amazon S3 endpoint, get endpoint based on region.\n    if (isAmazonEndpoint(host)) {\n      const accelerateEndPoint = this.getAccelerateEndPointIfSet(bucketName, objectName)\n      if (accelerateEndPoint) {\n        host = `${accelerateEndPoint}`\n      } else {\n        host = getS3Endpoint(region)\n      }\n    }\n\n    if (virtualHostStyle && !opts.pathStyle) {\n      // For all hosts which support virtual host style, `bucketName`\n      // is part of the hostname in the following format:\n      //\n      //  var host = 'bucketName.example.com'\n      //\n      if (bucketName) {\n        host = `${bucketName}.${host}`\n      }\n      if (objectName) {\n        path = `/${objectName}`\n      }\n    } else {\n      // For all S3 compatible storage services we will fallback to\n      // path style requests, where `bucketName` is part of the URI\n      // path.\n      if (bucketName) {\n        path = `/${bucketName}`\n      }\n      if (objectName) {\n        path = `/${bucketName}/${objectName}`\n      }\n    }\n\n    if (query) {\n      path += `?${query}`\n    }\n    reqOptions.headers.host = host\n    if ((reqOptions.protocol === 'http:' && port !== 80) || (reqOptions.protocol === 'https:' && port !== 443)) {\n      reqOptions.headers.host = joinHostPort(host, port)\n    }\n\n    reqOptions.headers['user-agent'] = this.userAgent\n    if (headers) {\n      // have all header keys in lower case - to make signing easy\n      for (const [k, v] of Object.entries(headers)) {\n        reqOptions.headers[k.toLowerCase()] = v\n      }\n    }\n\n    // Use any request option specified in minioClient.setRequestOptions()\n    reqOptions = Object.assign({}, this.reqOptions, reqOptions)\n\n    return {\n      ...reqOptions,\n      headers: _.mapValues(_.pickBy(reqOptions.headers, isDefined), (v) => v.toString()),\n      host,\n      port,\n      path,\n    } satisfies https.RequestOptions\n  }\n\n  public async setCredentialsProvider(credentialsProvider: CredentialProvider) {\n    if (!(credentialsProvider instanceof CredentialProvider)) {\n      throw new Error('Unable to get credentials. Expected instance of CredentialProvider')\n    }\n    this.credentialsProvider = credentialsProvider\n    await this.checkAndRefreshCreds()\n  }\n\n  private async checkAndRefreshCreds() {\n    if (this.credentialsProvider) {\n      try {\n        const credentialsConf = await this.credentialsProvider.getCredentials()\n        this.accessKey = credentialsConf.getAccessKey()\n        this.secretKey = credentialsConf.getSecretKey()\n        this.sessionToken = credentialsConf.getSessionToken()\n      } catch (e) {\n        throw new Error(`Unable to get credentials: ${e}`, { cause: e })\n      }\n    }\n  }\n\n  private logStream?: stream.Writable\n\n  /**\n   * log the request, response, error\n   */\n  private logHTTP(reqOptions: IRequest, response: http.IncomingMessage | null, err?: unknown) {\n    // if no logStream available return.\n    if (!this.logStream) {\n      return\n    }\n    if (!isObject(reqOptions)) {\n      throw new TypeError('reqOptions should be of type \"object\"')\n    }\n    if (response && !isReadableStream(response)) {\n      throw new TypeError('response should be of type \"Stream\"')\n    }\n    if (err && !(err instanceof Error)) {\n      throw new TypeError('err should be of type \"Error\"')\n    }\n    const logStream = this.logStream\n    const logHeaders = (headers: RequestHeaders) => {\n      Object.entries(headers).forEach(([k, v]) => {\n        if (k == 'authorization') {\n          if (isString(v)) {\n            const redactor = new RegExp('Signature=([0-9a-f]+)')\n            v = v.replace(redactor, 'Signature=**REDACTED**')\n          }\n        }\n        logStream.write(`${k}: ${v}\\n`)\n      })\n      logStream.write('\\n')\n    }\n    logStream.write(`REQUEST: ${reqOptions.method} ${reqOptions.path}\\n`)\n    logHeaders(reqOptions.headers)\n    if (response) {\n      this.logStream.write(`RESPONSE: ${response.statusCode}\\n`)\n      logHeaders(response.headers as RequestHeaders)\n    }\n    if (err) {\n      logStream.write('ERROR BODY:\\n')\n      const errJSON = JSON.stringify(err, null, '\\t')\n      logStream.write(`${errJSON}\\n`)\n    }\n  }\n\n  /**\n   * Enable tracing\n   */\n  public traceOn(stream?: stream.Writable) {\n    if (!stream) {\n      stream = process.stdout\n    }\n    this.logStream = stream\n  }\n\n  /**\n   * Disable tracing\n   */\n  public traceOff() {\n    this.logStream = undefined\n  }\n\n  /**\n   * makeRequest is the primitive used by the apis for making S3 requests.\n   * payload can be empty string in case of no payload.\n   * statusCode is the expected statusCode. If response.statusCode does not match\n   * we parse the XML error and call the callback with the error message.\n   *\n   * A valid region is passed by the calls - listBuckets, makeBucket and getBucketRegion.\n   *\n   * @internal\n   */\n  async makeRequestAsync(\n    options: RequestOption,\n    payload: Binary = '',\n    expectedCodes: number[] = [200],\n    region = '',\n  ): Promise<http.IncomingMessage> {\n    if (!isObject(options)) {\n      throw new TypeError('options should be of type \"object\"')\n    }\n    if (!isString(payload) && !isObject(payload)) {\n      // Buffer is of type 'object'\n      throw new TypeError('payload should be of type \"string\" or \"Buffer\"')\n    }\n    expectedCodes.forEach((statusCode) => {\n      if (!isNumber(statusCode)) {\n        throw new TypeError('statusCode should be of type \"number\"')\n      }\n    })\n    if (!isString(region)) {\n      throw new TypeError('region should be of type \"string\"')\n    }\n    if (!options.headers) {\n      options.headers = {}\n    }\n    if (options.method === 'POST' || options.method === 'PUT' || options.method === 'DELETE') {\n      options.headers['content-length'] = payload.length.toString()\n    }\n    const sha256sum = this.enableSHA256 ? toSha256(payload) : ''\n    return this.makeRequestStreamAsync(options, payload, sha256sum, expectedCodes, region)\n  }\n\n  /**\n   * new request with promise\n   *\n   * No need to drain response, response body is not valid\n   */\n  async makeRequestAsyncOmit(\n    options: RequestOption,\n    payload: Binary = '',\n    statusCodes: number[] = [200],\n    region = '',\n  ): Promise<Omit<http.IncomingMessage, 'on'>> {\n    const res = await this.makeRequestAsync(options, payload, statusCodes, region)\n    await drainResponse(res)\n    return res\n  }\n\n  /**\n   * makeRequestStream will be used directly instead of makeRequest in case the payload\n   * is available as a stream. for ex. putObject\n   *\n   * @internal\n   */\n  async makeRequestStreamAsync(\n    options: RequestOption,\n    body: stream.Readable | Binary,\n    sha256sum: string,\n    statusCodes: number[],\n    region: string,\n  ): Promise<http.IncomingMessage> {\n    if (!isObject(options)) {\n      throw new TypeError('options should be of type \"object\"')\n    }\n    if (!(Buffer.isBuffer(body) || typeof body === 'string' || isReadableStream(body))) {\n      throw new errors.InvalidArgumentError(\n        `stream should be a Buffer, string or readable Stream, got ${typeof body} instead`,\n      )\n    }\n    if (!isString(sha256sum)) {\n      throw new TypeError('sha256sum should be of type \"string\"')\n    }\n    statusCodes.forEach((statusCode) => {\n      if (!isNumber(statusCode)) {\n        throw new TypeError('statusCode should be of type \"number\"')\n      }\n    })\n    if (!isString(region)) {\n      throw new TypeError('region should be of type \"string\"')\n    }\n    // sha256sum will be empty for anonymous or https requests\n    if (!this.enableSHA256 && sha256sum.length !== 0) {\n      throw new errors.InvalidArgumentError(`sha256sum expected to be empty for anonymous or https requests`)\n    }\n    // sha256sum should be valid for non-anonymous http requests.\n    if (this.enableSHA256 && sha256sum.length !== 64) {\n      throw new errors.InvalidArgumentError(`Invalid sha256sum : ${sha256sum}`)\n    }\n\n    await this.checkAndRefreshCreds()\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    region = region || (await this.getBucketRegionAsync(options.bucketName!))\n\n    const reqOptions = this.getRequestOptions({ ...options, region })\n    if (!this.anonymous) {\n      // For non-anonymous https requests sha256sum is 'UNSIGNED-PAYLOAD' for signature calculation.\n      if (!this.enableSHA256) {\n        sha256sum = 'UNSIGNED-PAYLOAD'\n      }\n      const date = new Date()\n      reqOptions.headers['x-amz-date'] = makeDateLong(date)\n      reqOptions.headers['x-amz-content-sha256'] = sha256sum\n      if (this.sessionToken) {\n        reqOptions.headers['x-amz-security-token'] = this.sessionToken\n      }\n      reqOptions.headers.authorization = signV4(reqOptions, this.accessKey, this.secretKey, region, date, sha256sum)\n    }\n\n    const response = await requestWithRetry(this.transport, reqOptions, body)\n    if (!response.statusCode) {\n      throw new Error(\"BUG: response doesn't have a statusCode\")\n    }\n\n    if (!statusCodes.includes(response.statusCode)) {\n      // For an incorrect region, S3 server always sends back 400.\n      // But we will do cache invalidation for all errors so that,\n      // in future, if AWS S3 decides to send a different status code or\n      // XML error code we will still work fine.\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      delete this.regionMap[options.bucketName!]\n\n      const err = await xmlParsers.parseResponseError(response)\n      this.logHTTP(reqOptions, response, err)\n      throw err\n    }\n\n    this.logHTTP(reqOptions, response)\n\n    return response\n  }\n\n  /**\n   * gets the region of the bucket\n   *\n   * @param bucketName\n   *\n   */\n  async getBucketRegionAsync(bucketName: string): Promise<string> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name : ${bucketName}`)\n    }\n\n    // Region is set with constructor, return the region right here.\n    if (this.region) {\n      return this.region\n    }\n\n    const cached = this.regionMap[bucketName]\n    if (cached) {\n      return cached\n    }\n\n    const extractRegionAsync = async (response: http.IncomingMessage) => {\n      const body = await readAsString(response)\n      const region = xmlParsers.parseBucketRegion(body) || DEFAULT_REGION\n      this.regionMap[bucketName] = region\n      return region\n    }\n\n    const method = 'GET'\n    const query = 'location'\n    // `getBucketLocation` behaves differently in following ways for\n    // different environments.\n    //\n    // - For nodejs env we default to path style requests.\n    // - For browser env path style requests on buckets yields CORS\n    //   error. To circumvent this problem we make a virtual host\n    //   style request signed with 'us-east-1'. This request fails\n    //   with an error 'AuthorizationHeaderMalformed', additionally\n    //   the error XML also provides Region of the bucket. To validate\n    //   this region is proper we retry the same request with the newly\n    //   obtained region.\n    const pathStyle = this.pathStyle && !isBrowser\n    let region: string\n    try {\n      const res = await this.makeRequestAsync({ method, bucketName, query, pathStyle }, '', [200], DEFAULT_REGION)\n      return extractRegionAsync(res)\n    } catch (e) {\n      // make alignment with mc cli\n      if (e instanceof errors.S3Error) {\n        const errCode = e.code\n        const errRegion = e.region\n        if (errCode === 'AccessDenied' && !errRegion) {\n          return DEFAULT_REGION\n        }\n      }\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      if (!(e.name === 'AuthorizationHeaderMalformed')) {\n        throw e\n      }\n      // @ts-expect-error we set extra properties on error object\n      region = e.Region as string\n      if (!region) {\n        throw e\n      }\n    }\n\n    const res = await this.makeRequestAsync({ method, bucketName, query, pathStyle }, '', [200], region)\n    return await extractRegionAsync(res)\n  }\n\n  /**\n   * makeRequest is the primitive used by the apis for making S3 requests.\n   * payload can be empty string in case of no payload.\n   * statusCode is the expected statusCode. If response.statusCode does not match\n   * we parse the XML error and call the callback with the error message.\n   * A valid region is passed by the calls - listBuckets, makeBucket and\n   * getBucketRegion.\n   *\n   * @deprecated use `makeRequestAsync` instead\n   */\n  makeRequest(\n    options: RequestOption,\n    payload: Binary = '',\n    expectedCodes: number[] = [200],\n    region = '',\n    returnResponse: boolean,\n    cb: (cb: unknown, result: http.IncomingMessage) => void,\n  ) {\n    let prom: Promise<http.IncomingMessage>\n    if (returnResponse) {\n      prom = this.makeRequestAsync(options, payload, expectedCodes, region)\n    } else {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error compatible for old behaviour\n      prom = this.makeRequestAsyncOmit(options, payload, expectedCodes, region)\n    }\n\n    prom.then(\n      (result) => cb(null, result),\n      (err) => {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        cb(err)\n      },\n    )\n  }\n\n  /**\n   * makeRequestStream will be used directly instead of makeRequest in case the payload\n   * is available as a stream. for ex. putObject\n   *\n   * @deprecated use `makeRequestStreamAsync` instead\n   */\n  makeRequestStream(\n    options: RequestOption,\n    stream: stream.Readable | Buffer,\n    sha256sum: string,\n    statusCodes: number[],\n    region: string,\n    returnResponse: boolean,\n    cb: (cb: unknown, result: http.IncomingMessage) => void,\n  ) {\n    const executor = async () => {\n      const res = await this.makeRequestStreamAsync(options, stream, sha256sum, statusCodes, region)\n      if (!returnResponse) {\n        await drainResponse(res)\n      }\n\n      return res\n    }\n\n    executor().then(\n      (result) => cb(null, result),\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      (err) => cb(err),\n    )\n  }\n\n  /**\n   * @deprecated use `getBucketRegionAsync` instead\n   */\n  getBucketRegion(bucketName: string, cb: (err: unknown, region: string) => void) {\n    return this.getBucketRegionAsync(bucketName).then(\n      (result) => cb(null, result),\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      (err) => cb(err),\n    )\n  }\n\n  // Bucket operations\n\n  /**\n   * Creates the bucket `bucketName`.\n   *\n   */\n  async makeBucket(bucketName: string, region: Region = '', makeOpts?: MakeBucketOpt): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    // Backward Compatibility\n    if (isObject(region)) {\n      makeOpts = region\n      region = ''\n    }\n\n    if (!isString(region)) {\n      throw new TypeError('region should be of type \"string\"')\n    }\n    if (makeOpts && !isObject(makeOpts)) {\n      throw new TypeError('makeOpts should be of type \"object\"')\n    }\n\n    let payload = ''\n\n    // Region already set in constructor, validate if\n    // caller requested bucket location is same.\n    if (region && this.region) {\n      if (region !== this.region) {\n        throw new errors.InvalidArgumentError(`Configured region ${this.region}, requested ${region}`)\n      }\n    }\n    // sending makeBucket request with XML containing 'us-east-1' fails. For\n    // default region server expects the request without body\n    if (region && region !== DEFAULT_REGION) {\n      payload = xml.buildObject({\n        CreateBucketConfiguration: {\n          $: { xmlns: 'http://s3.amazonaws.com/doc/2006-03-01/' },\n          LocationConstraint: region,\n        },\n      })\n    }\n    const method = 'PUT'\n    const headers: RequestHeaders = {}\n\n    if (makeOpts && makeOpts.ObjectLocking) {\n      headers['x-amz-bucket-object-lock-enabled'] = true\n    }\n\n    // For custom region clients  default to custom region specified in client constructor\n    const finalRegion = this.region || region || DEFAULT_REGION\n\n    const requestOpt: RequestOption = { method, bucketName, headers }\n\n    try {\n      await this.makeRequestAsyncOmit(requestOpt, payload, [200], finalRegion)\n    } catch (err: unknown) {\n      if (region === '' || region === DEFAULT_REGION) {\n        if (err instanceof errors.S3Error) {\n          const errCode = err.code\n          const errRegion = err.region\n          if (errCode === 'AuthorizationHeaderMalformed' && errRegion !== '') {\n            // Retry with region returned as part of error\n            await this.makeRequestAsyncOmit(requestOpt, payload, [200], errCode)\n          }\n        }\n      }\n      throw err\n    }\n  }\n\n  /**\n   * To check if a bucket already exists.\n   */\n  async bucketExists(bucketName: string): Promise<boolean> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'HEAD'\n    try {\n      await this.makeRequestAsyncOmit({ method, bucketName })\n    } catch (err) {\n      // @ts-ignore\n      if (err.code === 'NoSuchBucket' || err.code === 'NotFound') {\n        return false\n      }\n      throw err\n    }\n\n    return true\n  }\n\n  async removeBucket(bucketName: string): Promise<void>\n\n  /**\n   * @deprecated use promise style API\n   */\n  removeBucket(bucketName: string, callback: NoResultCallback): void\n\n  async removeBucket(bucketName: string): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'DELETE'\n    await this.makeRequestAsyncOmit({ method, bucketName }, '', [204])\n    delete this.regionMap[bucketName]\n  }\n\n  /**\n   * Callback is called with readable stream of the object content.\n   */\n  async getObject(bucketName: string, objectName: string, getOpts?: GetObjectOpts): Promise<stream.Readable> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    return this.getPartialObject(bucketName, objectName, 0, 0, getOpts)\n  }\n\n  /**\n   * Callback is called with readable stream of the partial object content.\n   * @param bucketName\n   * @param objectName\n   * @param offset\n   * @param length - length of the object that will be read in the stream (optional, if not specified we read the rest of the file from the offset)\n   * @param getOpts\n   */\n  async getPartialObject(\n    bucketName: string,\n    objectName: string,\n    offset: number,\n    length = 0,\n    getOpts?: GetObjectOpts,\n  ): Promise<stream.Readable> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isNumber(offset)) {\n      throw new TypeError('offset should be of type \"number\"')\n    }\n    if (!isNumber(length)) {\n      throw new TypeError('length should be of type \"number\"')\n    }\n\n    let range = ''\n    if (offset || length) {\n      if (offset) {\n        range = `bytes=${+offset}-`\n      } else {\n        range = 'bytes=0-'\n        offset = 0\n      }\n      if (length) {\n        range += `${+length + offset - 1}`\n      }\n    }\n\n    let query = ''\n    let headers: RequestHeaders = {\n      ...(range !== '' && { range }),\n    }\n\n    if (getOpts) {\n      const sseHeaders: Record<string, string> = {\n        ...(getOpts.SSECustomerAlgorithm && {\n          'X-Amz-Server-Side-Encryption-Customer-Algorithm': getOpts.SSECustomerAlgorithm,\n        }),\n        ...(getOpts.SSECustomerKey && { 'X-Amz-Server-Side-Encryption-Customer-Key': getOpts.SSECustomerKey }),\n        ...(getOpts.SSECustomerKeyMD5 && {\n          'X-Amz-Server-Side-Encryption-Customer-Key-MD5': getOpts.SSECustomerKeyMD5,\n        }),\n      }\n      query = qs.stringify(getOpts)\n      headers = {\n        ...prependXAMZMeta(sseHeaders),\n        ...headers,\n      }\n    }\n\n    const expectedStatusCodes = [200]\n    if (range) {\n      expectedStatusCodes.push(206)\n    }\n    const method = 'GET'\n\n    return await this.makeRequestAsync({ method, bucketName, objectName, headers, query }, '', expectedStatusCodes)\n  }\n\n  /**\n   * download object content to a file.\n   * This method will create a temp file named `${filename}.${base64(etag)}.part.minio` when downloading.\n   *\n   * @param bucketName - name of the bucket\n   * @param objectName - name of the object\n   * @param filePath - path to which the object data will be written to\n   * @param getOpts - Optional object get option\n   */\n  async fGetObject(bucketName: string, objectName: string, filePath: string, getOpts?: GetObjectOpts): Promise<void> {\n    // Input validation.\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isString(filePath)) {\n      throw new TypeError('filePath should be of type \"string\"')\n    }\n\n    const downloadToTmpFile = async (): Promise<string> => {\n      let partFileStream: stream.Writable\n      const objStat = await this.statObject(bucketName, objectName, getOpts)\n      const encodedEtag = Buffer.from(objStat.etag).toString('base64')\n      const partFile = `${filePath}.${encodedEtag}.part.minio`\n\n      await fsp.mkdir(path.dirname(filePath), { recursive: true })\n\n      let offset = 0\n      try {\n        const stats = await fsp.stat(partFile)\n        if (objStat.size === stats.size) {\n          return partFile\n        }\n        offset = stats.size\n        partFileStream = fs.createWriteStream(partFile, { flags: 'a' })\n      } catch (e) {\n        if (e instanceof Error && (e as unknown as { code: string }).code === 'ENOENT') {\n          // file not exist\n          partFileStream = fs.createWriteStream(partFile, { flags: 'w' })\n        } else {\n          // other error, maybe access deny\n          throw e\n        }\n      }\n\n      const downloadStream = await this.getPartialObject(bucketName, objectName, offset, 0, getOpts)\n\n      await streamPromise.pipeline(downloadStream, partFileStream)\n      const stats = await fsp.stat(partFile)\n      if (stats.size === objStat.size) {\n        return partFile\n      }\n\n      throw new Error('Size mismatch between downloaded file and the object')\n    }\n\n    const partFile = await downloadToTmpFile()\n    await fsp.rename(partFile, filePath)\n  }\n\n  /**\n   * Stat information of the object.\n   */\n  async statObject(bucketName: string, objectName: string, statOpts?: StatObjectOpts): Promise<BucketItemStat> {\n    const statOptDef = statOpts || {}\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    if (!isObject(statOptDef)) {\n      throw new errors.InvalidArgumentError('statOpts should be of type \"object\"')\n    }\n\n    const query = qs.stringify(statOptDef)\n    const method = 'HEAD'\n    const res = await this.makeRequestAsyncOmit({ method, bucketName, objectName, query })\n\n    return {\n      size: parseInt(res.headers['content-length'] as string),\n      metaData: extractMetadata(res.headers as ResponseHeader),\n      lastModified: new Date(res.headers['last-modified'] as string),\n      versionId: getVersionId(res.headers as ResponseHeader),\n      etag: sanitizeETag(res.headers.etag),\n    }\n  }\n\n  async removeObject(bucketName: string, objectName: string, removeOpts?: RemoveOptions): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    if (removeOpts && !isObject(removeOpts)) {\n      throw new errors.InvalidArgumentError('removeOpts should be of type \"object\"')\n    }\n\n    const method = 'DELETE'\n\n    const headers: RequestHeaders = {}\n    if (removeOpts?.governanceBypass) {\n      headers['X-Amz-Bypass-Governance-Retention'] = true\n    }\n    if (removeOpts?.forceDelete) {\n      headers['x-minio-force-delete'] = true\n    }\n\n    const queryParams: Record<string, string> = {}\n    if (removeOpts?.versionId) {\n      queryParams.versionId = `${removeOpts.versionId}`\n    }\n    const query = qs.stringify(queryParams)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, objectName, headers, query }, '', [200, 204])\n  }\n\n  // Calls implemented below are related to multipart.\n\n  listIncompleteUploads(\n    bucket: string,\n    prefix: string,\n    recursive: boolean,\n  ): BucketStream<IncompleteUploadedBucketItem> {\n    if (prefix === undefined) {\n      prefix = ''\n    }\n    if (recursive === undefined) {\n      recursive = false\n    }\n    if (!isValidBucketName(bucket)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucket)\n    }\n    if (!isValidPrefix(prefix)) {\n      throw new errors.InvalidPrefixError(`Invalid prefix : ${prefix}`)\n    }\n    if (!isBoolean(recursive)) {\n      throw new TypeError('recursive should be of type \"boolean\"')\n    }\n    const delimiter = recursive ? '' : '/'\n    let keyMarker = ''\n    let uploadIdMarker = ''\n    const uploads: unknown[] = []\n    let ended = false\n\n    // TODO: refactor this with async/await and `stream.Readable.from`\n    const readStream = new stream.Readable({ objectMode: true })\n    readStream._read = () => {\n      // push one upload info per _read()\n      if (uploads.length) {\n        return readStream.push(uploads.shift())\n      }\n      if (ended) {\n        return readStream.push(null)\n      }\n      this.listIncompleteUploadsQuery(bucket, prefix, keyMarker, uploadIdMarker, delimiter).then(\n        (result) => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          result.prefixes.forEach((prefix) => uploads.push(prefix))\n          async.eachSeries(\n            result.uploads,\n            (upload, cb) => {\n              // for each incomplete upload add the sizes of its uploaded parts\n              // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n              // @ts-ignore\n              this.listParts(bucket, upload.key, upload.uploadId).then(\n                (parts: Part[]) => {\n                  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                  // @ts-ignore\n                  upload.size = parts.reduce((acc, item) => acc + item.size, 0)\n                  uploads.push(upload)\n                  cb()\n                },\n                (err: Error) => cb(err),\n              )\n            },\n            (err) => {\n              if (err) {\n                readStream.emit('error', err)\n                return\n              }\n              if (result.isTruncated) {\n                keyMarker = result.nextKeyMarker\n                uploadIdMarker = result.nextUploadIdMarker\n              } else {\n                ended = true\n              }\n\n              // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n              // @ts-ignore\n              readStream._read()\n            },\n          )\n        },\n        (e) => {\n          readStream.emit('error', e)\n        },\n      )\n    }\n    return readStream\n  }\n\n  /**\n   * Called by listIncompleteUploads to fetch a batch of incomplete uploads.\n   */\n  async listIncompleteUploadsQuery(\n    bucketName: string,\n    prefix: string,\n    keyMarker: string,\n    uploadIdMarker: string,\n    delimiter: string,\n  ): Promise<ListMultipartResult> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (!isString(keyMarker)) {\n      throw new TypeError('keyMarker should be of type \"string\"')\n    }\n    if (!isString(uploadIdMarker)) {\n      throw new TypeError('uploadIdMarker should be of type \"string\"')\n    }\n    if (!isString(delimiter)) {\n      throw new TypeError('delimiter should be of type \"string\"')\n    }\n    const queries = []\n    queries.push(`prefix=${uriEscape(prefix)}`)\n    queries.push(`delimiter=${uriEscape(delimiter)}`)\n\n    if (keyMarker) {\n      queries.push(`key-marker=${uriEscape(keyMarker)}`)\n    }\n    if (uploadIdMarker) {\n      queries.push(`upload-id-marker=${uploadIdMarker}`)\n    }\n\n    const maxUploads = 1000\n    queries.push(`max-uploads=${maxUploads}`)\n    queries.sort()\n    queries.unshift('uploads')\n    let query = ''\n    if (queries.length > 0) {\n      query = `${queries.join('&')}`\n    }\n    const method = 'GET'\n    const res = await this.makeRequestAsync({ method, bucketName, query })\n    const body = await readAsString(res)\n    return xmlParsers.parseListMultipart(body)\n  }\n\n  /**\n   * Initiate a new multipart upload.\n   * @internal\n   */\n  async initiateNewMultipartUpload(bucketName: string, objectName: string, headers: RequestHeaders): Promise<string> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isObject(headers)) {\n      throw new errors.InvalidObjectNameError('contentType should be of type \"object\"')\n    }\n    const method = 'POST'\n    const query = 'uploads'\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, query, headers })\n    const body = await readAsBuffer(res)\n    return parseInitiateMultipart(body.toString())\n  }\n\n  /**\n   * Internal Method to abort a multipart upload request in case of any errors.\n   *\n   * @param bucketName - Bucket Name\n   * @param objectName - Object Name\n   * @param uploadId - id of a multipart upload to cancel during compose object sequence.\n   */\n  async abortMultipartUpload(bucketName: string, objectName: string, uploadId: string): Promise<void> {\n    const method = 'DELETE'\n    const query = `uploadId=${uploadId}`\n\n    const requestOptions = { method, bucketName, objectName: objectName, query }\n    await this.makeRequestAsyncOmit(requestOptions, '', [204])\n  }\n\n  async findUploadId(bucketName: string, objectName: string): Promise<string | undefined> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    let latestUpload: ListMultipartResult['uploads'][number] | undefined\n    let keyMarker = ''\n    let uploadIdMarker = ''\n    for (;;) {\n      const result = await this.listIncompleteUploadsQuery(bucketName, objectName, keyMarker, uploadIdMarker, '')\n      for (const upload of result.uploads) {\n        if (upload.key === objectName) {\n          if (!latestUpload || upload.initiated.getTime() > latestUpload.initiated.getTime()) {\n            latestUpload = upload\n          }\n        }\n      }\n      if (result.isTruncated) {\n        keyMarker = result.nextKeyMarker\n        uploadIdMarker = result.nextUploadIdMarker\n        continue\n      }\n\n      break\n    }\n    return latestUpload?.uploadId\n  }\n\n  /**\n   * this call will aggregate the parts on the server into a single object.\n   */\n  async completeMultipartUpload(\n    bucketName: string,\n    objectName: string,\n    uploadId: string,\n    etags: {\n      part: number\n      etag?: string\n    }[],\n  ): Promise<{ etag: string; versionId: string | null }> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isString(uploadId)) {\n      throw new TypeError('uploadId should be of type \"string\"')\n    }\n    if (!isObject(etags)) {\n      throw new TypeError('etags should be of type \"Array\"')\n    }\n\n    if (!uploadId) {\n      throw new errors.InvalidArgumentError('uploadId cannot be empty')\n    }\n\n    const method = 'POST'\n    const query = `uploadId=${uriEscape(uploadId)}`\n\n    const builder = new xml2js.Builder()\n    const payload = builder.buildObject({\n      CompleteMultipartUpload: {\n        $: {\n          xmlns: 'http://s3.amazonaws.com/doc/2006-03-01/',\n        },\n        Part: etags.map((etag) => {\n          return {\n            PartNumber: etag.part,\n            ETag: etag.etag,\n          }\n        }),\n      },\n    })\n\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, query }, payload)\n    const body = await readAsBuffer(res)\n    const result = parseCompleteMultipart(body.toString())\n    if (!result) {\n      throw new Error('BUG: failed to parse server response')\n    }\n\n    if (result.errCode) {\n      // Multipart Complete API returns an error XML after a 200 http status\n      throw new errors.S3Error(result.errMessage)\n    }\n\n    return {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      etag: result.etag as string,\n      versionId: getVersionId(res.headers as ResponseHeader),\n    }\n  }\n\n  /**\n   * Get part-info of all parts of an incomplete upload specified by uploadId.\n   */\n  protected async listParts(bucketName: string, objectName: string, uploadId: string): Promise<UploadedPart[]> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isString(uploadId)) {\n      throw new TypeError('uploadId should be of type \"string\"')\n    }\n    if (!uploadId) {\n      throw new errors.InvalidArgumentError('uploadId cannot be empty')\n    }\n\n    const parts: UploadedPart[] = []\n    let marker = 0\n    let result\n    do {\n      result = await this.listPartsQuery(bucketName, objectName, uploadId, marker)\n      marker = result.marker\n      parts.push(...result.parts)\n    } while (result.isTruncated)\n\n    return parts\n  }\n\n  /**\n   * Called by listParts to fetch a batch of part-info\n   */\n  private async listPartsQuery(bucketName: string, objectName: string, uploadId: string, marker: number) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isString(uploadId)) {\n      throw new TypeError('uploadId should be of type \"string\"')\n    }\n    if (!isNumber(marker)) {\n      throw new TypeError('marker should be of type \"number\"')\n    }\n    if (!uploadId) {\n      throw new errors.InvalidArgumentError('uploadId cannot be empty')\n    }\n\n    let query = `uploadId=${uriEscape(uploadId)}`\n    if (marker) {\n      query += `&part-number-marker=${marker}`\n    }\n\n    const method = 'GET'\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, query })\n    return xmlParsers.parseListParts(await readAsString(res))\n  }\n\n  async listBuckets(): Promise<BucketItemFromList[]> {\n    const method = 'GET'\n    const regionConf = this.region || DEFAULT_REGION\n    const httpRes = await this.makeRequestAsync({ method }, '', [200], regionConf)\n    const xmlResult = await readAsString(httpRes)\n    return xmlParsers.parseListBucket(xmlResult)\n  }\n\n  /**\n   * Calculate part size given the object size. Part size will be atleast this.partSize\n   */\n  calculatePartSize(size: number) {\n    if (!isNumber(size)) {\n      throw new TypeError('size should be of type \"number\"')\n    }\n    if (size > this.maxObjectSize) {\n      throw new TypeError(`size should not be more than ${this.maxObjectSize}`)\n    }\n    if (this.overRidePartSize) {\n      return this.partSize\n    }\n    let partSize = this.partSize\n    for (;;) {\n      // while(true) {...} throws linting error.\n      // If partSize is big enough to accomodate the object size, then use it.\n      if (partSize * 10000 > size) {\n        return partSize\n      }\n      // Try part sizes as 64MB, 80MB, 96MB etc.\n      partSize += 16 * 1024 * 1024\n    }\n  }\n\n  /**\n   * Uploads the object using contents from a file\n   */\n  async fPutObject(bucketName: string, objectName: string, filePath: string, metaData?: ObjectMetaData) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    if (!isString(filePath)) {\n      throw new TypeError('filePath should be of type \"string\"')\n    }\n    if (metaData && !isObject(metaData)) {\n      throw new TypeError('metaData should be of type \"object\"')\n    }\n\n    // Inserts correct `content-type` attribute based on metaData and filePath\n    metaData = insertContentType(metaData || {}, filePath)\n    const stat = await fsp.stat(filePath)\n    return await this.putObject(bucketName, objectName, fs.createReadStream(filePath), stat.size, metaData)\n  }\n\n  /**\n   *  Uploading a stream, \"Buffer\" or \"string\".\n   *  It's recommended to pass `size` argument with stream.\n   */\n  async putObject(\n    bucketName: string,\n    objectName: string,\n    stream: stream.Readable | Buffer | string,\n    size?: number,\n    metaData?: ItemBucketMetadata,\n  ): Promise<UploadedObjectInfo> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    // We'll need to shift arguments to the left because of metaData\n    // and size being optional.\n    if (isObject(size)) {\n      metaData = size\n    }\n    // Ensures Metadata has appropriate prefix for A3 API\n    const headers = prependXAMZMeta(metaData)\n    if (typeof stream === 'string' || stream instanceof Buffer) {\n      // Adapts the non-stream interface into a stream.\n      size = stream.length\n      stream = readableStream(stream)\n    } else if (!isReadableStream(stream)) {\n      throw new TypeError('third argument should be of type \"stream.Readable\" or \"Buffer\" or \"string\"')\n    }\n\n    if (isNumber(size) && size < 0) {\n      throw new errors.InvalidArgumentError(`size cannot be negative, given size: ${size}`)\n    }\n\n    // Get the part size and forward that to the BlockStream. Default to the\n    // largest block size possible if necessary.\n    if (!isNumber(size)) {\n      size = this.maxObjectSize\n    }\n\n    // Get the part size and forward that to the BlockStream. Default to the\n    // largest block size possible if necessary.\n    if (size === undefined) {\n      const statSize = await getContentLength(stream)\n      if (statSize !== null) {\n        size = statSize\n      }\n    }\n\n    if (!isNumber(size)) {\n      // Backward compatibility\n      size = this.maxObjectSize\n    }\n    if (size === 0) {\n      return this.uploadBuffer(bucketName, objectName, headers, Buffer.from(''))\n    }\n\n    const partSize = this.calculatePartSize(size)\n    if (typeof stream === 'string' || Buffer.isBuffer(stream) || size <= partSize) {\n      const buf = isReadableStream(stream) ? await readAsBuffer(stream) : Buffer.from(stream)\n      return this.uploadBuffer(bucketName, objectName, headers, buf)\n    }\n\n    return this.uploadStream(bucketName, objectName, headers, stream, partSize)\n  }\n\n  /**\n   * method to upload buffer in one call\n   * @private\n   */\n  private async uploadBuffer(\n    bucketName: string,\n    objectName: string,\n    headers: RequestHeaders,\n    buf: Buffer,\n  ): Promise<UploadedObjectInfo> {\n    const { md5sum, sha256sum } = hashBinary(buf, this.enableSHA256)\n    headers['Content-Length'] = buf.length\n    if (!this.enableSHA256) {\n      headers['Content-MD5'] = md5sum\n    }\n    const res = await this.makeRequestStreamAsync(\n      {\n        method: 'PUT',\n        bucketName,\n        objectName,\n        headers,\n      },\n      buf,\n      sha256sum,\n      [200],\n      '',\n    )\n    await drainResponse(res)\n    return {\n      etag: sanitizeETag(res.headers.etag),\n      versionId: getVersionId(res.headers as ResponseHeader),\n    }\n  }\n\n  /**\n   * upload stream with MultipartUpload\n   * @private\n   */\n  private async uploadStream(\n    bucketName: string,\n    objectName: string,\n    headers: RequestHeaders,\n    body: stream.Readable,\n    partSize: number,\n  ): Promise<UploadedObjectInfo> {\n    // A map of the previously uploaded chunks, for resuming a file upload. This\n    // will be null if we aren't resuming an upload.\n    const oldParts: Record<number, Part> = {}\n\n    // Keep track of the etags for aggregating the chunks together later. Each\n    // etag represents a single chunk of the file.\n    const eTags: Part[] = []\n\n    const previousUploadId = await this.findUploadId(bucketName, objectName)\n    let uploadId: string\n    if (!previousUploadId) {\n      uploadId = await this.initiateNewMultipartUpload(bucketName, objectName, headers)\n    } else {\n      uploadId = previousUploadId\n      const oldTags = await this.listParts(bucketName, objectName, previousUploadId)\n      oldTags.forEach((e) => {\n        oldParts[e.part] = e\n      })\n    }\n\n    const chunkier = new BlockStream2({ size: partSize, zeroPadding: false })\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [_, o] = await Promise.all([\n      new Promise((resolve, reject) => {\n        body.pipe(chunkier).on('error', reject)\n        chunkier.on('end', resolve).on('error', reject)\n      }),\n      (async () => {\n        let partNumber = 1\n\n        for await (const chunk of chunkier) {\n          const md5 = crypto.createHash('md5').update(chunk).digest()\n\n          const oldPart = oldParts[partNumber]\n          if (oldPart) {\n            if (oldPart.etag === md5.toString('hex')) {\n              eTags.push({ part: partNumber, etag: oldPart.etag })\n              partNumber++\n              continue\n            }\n          }\n\n          partNumber++\n\n          // now start to upload missing part\n          const options: RequestOption = {\n            method: 'PUT',\n            query: qs.stringify({ partNumber, uploadId }),\n            headers: {\n              'Content-Length': chunk.length,\n              'Content-MD5': md5.toString('base64'),\n            },\n            bucketName,\n            objectName,\n          }\n\n          const response = await this.makeRequestAsyncOmit(options, chunk)\n\n          let etag = response.headers.etag\n          if (etag) {\n            etag = etag.replace(/^\"/, '').replace(/\"$/, '')\n          } else {\n            etag = ''\n          }\n\n          eTags.push({ part: partNumber, etag })\n        }\n\n        return await this.completeMultipartUpload(bucketName, objectName, uploadId, eTags)\n      })(),\n    ])\n\n    return o\n  }\n\n  async removeBucketReplication(bucketName: string): Promise<void>\n  removeBucketReplication(bucketName: string, callback: NoResultCallback): void\n  async removeBucketReplication(bucketName: string): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'DELETE'\n    const query = 'replication'\n    await this.makeRequestAsyncOmit({ method, bucketName, query }, '', [200, 204], '')\n  }\n\n  setBucketReplication(bucketName: string, replicationConfig: ReplicationConfigOpts): void\n  async setBucketReplication(bucketName: string, replicationConfig: ReplicationConfigOpts): Promise<void>\n  async setBucketReplication(bucketName: string, replicationConfig: ReplicationConfigOpts) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isObject(replicationConfig)) {\n      throw new errors.InvalidArgumentError('replicationConfig should be of type \"object\"')\n    } else {\n      if (_.isEmpty(replicationConfig.role)) {\n        throw new errors.InvalidArgumentError('Role cannot be empty')\n      } else if (replicationConfig.role && !isString(replicationConfig.role)) {\n        throw new errors.InvalidArgumentError('Invalid value for role', replicationConfig.role)\n      }\n      if (_.isEmpty(replicationConfig.rules)) {\n        throw new errors.InvalidArgumentError('Minimum one replication rule must be specified')\n      }\n    }\n    const method = 'PUT'\n    const query = 'replication'\n    const headers: Record<string, string> = {}\n\n    const replicationParamsConfig = {\n      ReplicationConfiguration: {\n        Role: replicationConfig.role,\n        Rule: replicationConfig.rules,\n      },\n    }\n\n    const builder = new xml2js.Builder({ renderOpts: { pretty: false }, headless: true })\n    const payload = builder.buildObject(replicationParamsConfig)\n    headers['Content-MD5'] = toMd5(payload)\n    await this.makeRequestAsyncOmit({ method, bucketName, query, headers }, payload)\n  }\n\n  getBucketReplication(bucketName: string): void\n  async getBucketReplication(bucketName: string): Promise<ReplicationConfig>\n  async getBucketReplication(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'GET'\n    const query = 'replication'\n\n    const httpRes = await this.makeRequestAsync({ method, bucketName, query }, '', [200, 204])\n    const xmlResult = await readAsString(httpRes)\n    return xmlParsers.parseReplicationConfig(xmlResult)\n  }\n\n  getObjectLegalHold(\n    bucketName: string,\n    objectName: string,\n    getOpts?: GetObjectLegalHoldOptions,\n    callback?: ResultCallback<LEGAL_HOLD_STATUS>,\n  ): Promise<LEGAL_HOLD_STATUS>\n  async getObjectLegalHold(\n    bucketName: string,\n    objectName: string,\n    getOpts?: GetObjectLegalHoldOptions,\n  ): Promise<LEGAL_HOLD_STATUS> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    if (getOpts) {\n      if (!isObject(getOpts)) {\n        throw new TypeError('getOpts should be of type \"Object\"')\n      } else if (Object.keys(getOpts).length > 0 && getOpts.versionId && !isString(getOpts.versionId)) {\n        throw new TypeError('versionId should be of type string.:', getOpts.versionId)\n      }\n    }\n\n    const method = 'GET'\n    let query = 'legal-hold'\n\n    if (getOpts?.versionId) {\n      query += `&versionId=${getOpts.versionId}`\n    }\n\n    const httpRes = await this.makeRequestAsync({ method, bucketName, objectName, query }, '', [200])\n    const strRes = await readAsString(httpRes)\n    return parseObjectLegalHoldConfig(strRes)\n  }\n\n  setObjectLegalHold(bucketName: string, objectName: string, setOpts?: PutObjectLegalHoldOptions): void\n  async setObjectLegalHold(\n    bucketName: string,\n    objectName: string,\n    setOpts = {\n      status: LEGAL_HOLD_STATUS.ENABLED,\n    } as PutObjectLegalHoldOptions,\n  ): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    if (!isObject(setOpts)) {\n      throw new TypeError('setOpts should be of type \"Object\"')\n    } else {\n      if (![LEGAL_HOLD_STATUS.ENABLED, LEGAL_HOLD_STATUS.DISABLED].includes(setOpts?.status)) {\n        throw new TypeError('Invalid status: ' + setOpts.status)\n      }\n      if (setOpts.versionId && !setOpts.versionId.length) {\n        throw new TypeError('versionId should be of type string.:' + setOpts.versionId)\n      }\n    }\n\n    const method = 'PUT'\n    let query = 'legal-hold'\n\n    if (setOpts.versionId) {\n      query += `&versionId=${setOpts.versionId}`\n    }\n\n    const config = {\n      Status: setOpts.status,\n    }\n\n    const builder = new xml2js.Builder({ rootName: 'LegalHold', renderOpts: { pretty: false }, headless: true })\n    const payload = builder.buildObject(config)\n    const headers: Record<string, string> = {}\n    headers['Content-MD5'] = toMd5(payload)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, objectName, query, headers }, payload)\n  }\n\n  /**\n   * Get Tags associated with a Bucket\n   */\n  async getBucketTagging(bucketName: string): Promise<Tag[]> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n\n    const method = 'GET'\n    const query = 'tagging'\n    const requestOptions = { method, bucketName, query }\n\n    const response = await this.makeRequestAsync(requestOptions)\n    const body = await readAsString(response)\n    return xmlParsers.parseTagging(body)\n  }\n\n  /**\n   *  Get the tags associated with a bucket OR an object\n   */\n  async getObjectTagging(bucketName: string, objectName: string, getOpts?: GetObjectOpts): Promise<Tag[]> {\n    const method = 'GET'\n    let query = 'tagging'\n\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidBucketNameError('Invalid object name: ' + objectName)\n    }\n    if (getOpts && !isObject(getOpts)) {\n      throw new errors.InvalidArgumentError('getOpts should be of type \"object\"')\n    }\n\n    if (getOpts && getOpts.versionId) {\n      query = `${query}&versionId=${getOpts.versionId}`\n    }\n    const requestOptions: RequestOption = { method, bucketName, query }\n    if (objectName) {\n      requestOptions['objectName'] = objectName\n    }\n\n    const response = await this.makeRequestAsync(requestOptions)\n    const body = await readAsString(response)\n    return xmlParsers.parseTagging(body)\n  }\n\n  /**\n   *  Set the policy on a bucket or an object prefix.\n   */\n  async setBucketPolicy(bucketName: string, policy: string): Promise<void> {\n    // Validate arguments.\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isString(policy)) {\n      throw new errors.InvalidBucketPolicyError(`Invalid bucket policy: ${policy} - must be \"string\"`)\n    }\n\n    const query = 'policy'\n\n    let method = 'DELETE'\n    if (policy) {\n      method = 'PUT'\n    }\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query }, policy, [204], '')\n  }\n\n  /**\n   * Get the policy on a bucket or an object prefix.\n   */\n  async getBucketPolicy(bucketName: string): Promise<string> {\n    // Validate arguments.\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n\n    const method = 'GET'\n    const query = 'policy'\n    const res = await this.makeRequestAsync({ method, bucketName, query })\n    return await readAsString(res)\n  }\n\n  async putObjectRetention(bucketName: string, objectName: string, retentionOpts: Retention = {}): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!isObject(retentionOpts)) {\n      throw new errors.InvalidArgumentError('retentionOpts should be of type \"object\"')\n    } else {\n      if (retentionOpts.governanceBypass && !isBoolean(retentionOpts.governanceBypass)) {\n        throw new errors.InvalidArgumentError(`Invalid value for governanceBypass: ${retentionOpts.governanceBypass}`)\n      }\n      if (\n        retentionOpts.mode &&\n        ![RETENTION_MODES.COMPLIANCE, RETENTION_MODES.GOVERNANCE].includes(retentionOpts.mode)\n      ) {\n        throw new errors.InvalidArgumentError(`Invalid object retention mode: ${retentionOpts.mode}`)\n      }\n      if (retentionOpts.retainUntilDate && !isString(retentionOpts.retainUntilDate)) {\n        throw new errors.InvalidArgumentError(`Invalid value for retainUntilDate: ${retentionOpts.retainUntilDate}`)\n      }\n      if (retentionOpts.versionId && !isString(retentionOpts.versionId)) {\n        throw new errors.InvalidArgumentError(`Invalid value for versionId: ${retentionOpts.versionId}`)\n      }\n    }\n\n    const method = 'PUT'\n    let query = 'retention'\n\n    const headers: RequestHeaders = {}\n    if (retentionOpts.governanceBypass) {\n      headers['X-Amz-Bypass-Governance-Retention'] = true\n    }\n\n    const builder = new xml2js.Builder({ rootName: 'Retention', renderOpts: { pretty: false }, headless: true })\n    const params: Record<string, string> = {}\n\n    if (retentionOpts.mode) {\n      params.Mode = retentionOpts.mode\n    }\n    if (retentionOpts.retainUntilDate) {\n      params.RetainUntilDate = retentionOpts.retainUntilDate\n    }\n    if (retentionOpts.versionId) {\n      query += `&versionId=${retentionOpts.versionId}`\n    }\n\n    const payload = builder.buildObject(params)\n\n    headers['Content-MD5'] = toMd5(payload)\n    await this.makeRequestAsyncOmit({ method, bucketName, objectName, query, headers }, payload, [200, 204])\n  }\n\n  getObjectLockConfig(bucketName: string, callback: ResultCallback<ObjectLockInfo>): void\n  getObjectLockConfig(bucketName: string): void\n  async getObjectLockConfig(bucketName: string): Promise<ObjectLockInfo>\n  async getObjectLockConfig(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'GET'\n    const query = 'object-lock'\n\n    const httpRes = await this.makeRequestAsync({ method, bucketName, query })\n    const xmlResult = await readAsString(httpRes)\n    return xmlParsers.parseObjectLockConfig(xmlResult)\n  }\n\n  setObjectLockConfig(bucketName: string, lockConfigOpts: Omit<ObjectLockInfo, 'objectLockEnabled'>): void\n  async setObjectLockConfig(\n    bucketName: string,\n    lockConfigOpts: Omit<ObjectLockInfo, 'objectLockEnabled'>,\n  ): Promise<void>\n  async setObjectLockConfig(bucketName: string, lockConfigOpts: Omit<ObjectLockInfo, 'objectLockEnabled'>) {\n    const retentionModes = [RETENTION_MODES.COMPLIANCE, RETENTION_MODES.GOVERNANCE]\n    const validUnits = [RETENTION_VALIDITY_UNITS.DAYS, RETENTION_VALIDITY_UNITS.YEARS]\n\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n\n    if (lockConfigOpts.mode && !retentionModes.includes(lockConfigOpts.mode)) {\n      throw new TypeError(`lockConfigOpts.mode should be one of ${retentionModes}`)\n    }\n    if (lockConfigOpts.unit && !validUnits.includes(lockConfigOpts.unit)) {\n      throw new TypeError(`lockConfigOpts.unit should be one of ${validUnits}`)\n    }\n    if (lockConfigOpts.validity && !isNumber(lockConfigOpts.validity)) {\n      throw new TypeError(`lockConfigOpts.validity should be a number`)\n    }\n\n    const method = 'PUT'\n    const query = 'object-lock'\n\n    const config: ObjectLockConfigParam = {\n      ObjectLockEnabled: 'Enabled',\n    }\n    const configKeys = Object.keys(lockConfigOpts)\n\n    const isAllKeysSet = ['unit', 'mode', 'validity'].every((lck) => configKeys.includes(lck))\n    // Check if keys are present and all keys are present.\n    if (configKeys.length > 0) {\n      if (!isAllKeysSet) {\n        throw new TypeError(\n          `lockConfigOpts.mode,lockConfigOpts.unit,lockConfigOpts.validity all the properties should be specified.`,\n        )\n      } else {\n        config.Rule = {\n          DefaultRetention: {},\n        }\n        if (lockConfigOpts.mode) {\n          config.Rule.DefaultRetention.Mode = lockConfigOpts.mode\n        }\n        if (lockConfigOpts.unit === RETENTION_VALIDITY_UNITS.DAYS) {\n          config.Rule.DefaultRetention.Days = lockConfigOpts.validity\n        } else if (lockConfigOpts.unit === RETENTION_VALIDITY_UNITS.YEARS) {\n          config.Rule.DefaultRetention.Years = lockConfigOpts.validity\n        }\n      }\n    }\n\n    const builder = new xml2js.Builder({\n      rootName: 'ObjectLockConfiguration',\n      renderOpts: { pretty: false },\n      headless: true,\n    })\n    const payload = builder.buildObject(config)\n\n    const headers: RequestHeaders = {}\n    headers['Content-MD5'] = toMd5(payload)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query, headers }, payload)\n  }\n\n  async getBucketVersioning(bucketName: string): Promise<BucketVersioningConfiguration> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'GET'\n    const query = 'versioning'\n\n    const httpRes = await this.makeRequestAsync({ method, bucketName, query })\n    const xmlResult = await readAsString(httpRes)\n    return await xmlParsers.parseBucketVersioningConfig(xmlResult)\n  }\n\n  async setBucketVersioning(bucketName: string, versionConfig: BucketVersioningConfiguration): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!Object.keys(versionConfig).length) {\n      throw new errors.InvalidArgumentError('versionConfig should be of type \"object\"')\n    }\n\n    const method = 'PUT'\n    const query = 'versioning'\n    const builder = new xml2js.Builder({\n      rootName: 'VersioningConfiguration',\n      renderOpts: { pretty: false },\n      headless: true,\n    })\n    const payload = builder.buildObject(versionConfig)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query }, payload)\n  }\n\n  private async setTagging(taggingParams: PutTaggingParams): Promise<void> {\n    const { bucketName, objectName, tags, putOpts } = taggingParams\n    const method = 'PUT'\n    let query = 'tagging'\n\n    if (putOpts && putOpts?.versionId) {\n      query = `${query}&versionId=${putOpts.versionId}`\n    }\n    const tagsList = []\n    for (const [key, value] of Object.entries(tags)) {\n      tagsList.push({ Key: key, Value: value })\n    }\n    const taggingConfig = {\n      Tagging: {\n        TagSet: {\n          Tag: tagsList,\n        },\n      },\n    }\n    const headers = {} as RequestHeaders\n    const builder = new xml2js.Builder({ headless: true, renderOpts: { pretty: false } })\n    const payloadBuf = Buffer.from(builder.buildObject(taggingConfig))\n    const requestOptions = {\n      method,\n      bucketName,\n      query,\n      headers,\n\n      ...(objectName && { objectName: objectName }),\n    }\n\n    headers['Content-MD5'] = toMd5(payloadBuf)\n\n    await this.makeRequestAsyncOmit(requestOptions, payloadBuf)\n  }\n\n  private async removeTagging({ bucketName, objectName, removeOpts }: RemoveTaggingParams): Promise<void> {\n    const method = 'DELETE'\n    let query = 'tagging'\n\n    if (removeOpts && Object.keys(removeOpts).length && removeOpts.versionId) {\n      query = `${query}&versionId=${removeOpts.versionId}`\n    }\n    const requestOptions = { method, bucketName, objectName, query }\n\n    if (objectName) {\n      requestOptions['objectName'] = objectName\n    }\n    await this.makeRequestAsync(requestOptions, '', [200, 204])\n  }\n\n  async setBucketTagging(bucketName: string, tags: Tags): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isPlainObject(tags)) {\n      throw new errors.InvalidArgumentError('tags should be of type \"object\"')\n    }\n    if (Object.keys(tags).length > 10) {\n      throw new errors.InvalidArgumentError('maximum tags allowed is 10\"')\n    }\n\n    await this.setTagging({ bucketName, tags })\n  }\n\n  async removeBucketTagging(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    await this.removeTagging({ bucketName })\n  }\n\n  async setObjectTagging(bucketName: string, objectName: string, tags: Tags, putOpts?: TaggingOpts) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidBucketNameError('Invalid object name: ' + objectName)\n    }\n\n    if (!isPlainObject(tags)) {\n      throw new errors.InvalidArgumentError('tags should be of type \"object\"')\n    }\n    if (Object.keys(tags).length > 10) {\n      throw new errors.InvalidArgumentError('Maximum tags allowed is 10\"')\n    }\n\n    await this.setTagging({ bucketName, objectName, tags, putOpts })\n  }\n\n  async removeObjectTagging(bucketName: string, objectName: string, removeOpts: TaggingOpts) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidBucketNameError('Invalid object name: ' + objectName)\n    }\n    if (removeOpts && Object.keys(removeOpts).length && !isObject(removeOpts)) {\n      throw new errors.InvalidArgumentError('removeOpts should be of type \"object\"')\n    }\n\n    await this.removeTagging({ bucketName, objectName, removeOpts })\n  }\n\n  async selectObjectContent(\n    bucketName: string,\n    objectName: string,\n    selectOpts: SelectOptions,\n  ): Promise<SelectResults | undefined> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (!_.isEmpty(selectOpts)) {\n      if (!isString(selectOpts.expression)) {\n        throw new TypeError('sqlExpression should be of type \"string\"')\n      }\n      if (!_.isEmpty(selectOpts.inputSerialization)) {\n        if (!isObject(selectOpts.inputSerialization)) {\n          throw new TypeError('inputSerialization should be of type \"object\"')\n        }\n      } else {\n        throw new TypeError('inputSerialization is required')\n      }\n      if (!_.isEmpty(selectOpts.outputSerialization)) {\n        if (!isObject(selectOpts.outputSerialization)) {\n          throw new TypeError('outputSerialization should be of type \"object\"')\n        }\n      } else {\n        throw new TypeError('outputSerialization is required')\n      }\n    } else {\n      throw new TypeError('valid select configuration is required')\n    }\n\n    const method = 'POST'\n    const query = `select&select-type=2`\n\n    const config: Record<string, unknown>[] = [\n      {\n        Expression: selectOpts.expression,\n      },\n      {\n        ExpressionType: selectOpts.expressionType || 'SQL',\n      },\n      {\n        InputSerialization: [selectOpts.inputSerialization],\n      },\n      {\n        OutputSerialization: [selectOpts.outputSerialization],\n      },\n    ]\n\n    // Optional\n    if (selectOpts.requestProgress) {\n      config.push({ RequestProgress: selectOpts?.requestProgress })\n    }\n    // Optional\n    if (selectOpts.scanRange) {\n      config.push({ ScanRange: selectOpts.scanRange })\n    }\n\n    const builder = new xml2js.Builder({\n      rootName: 'SelectObjectContentRequest',\n      renderOpts: { pretty: false },\n      headless: true,\n    })\n    const payload = builder.buildObject(config)\n\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, query }, payload)\n    const body = await readAsBuffer(res)\n    return parseSelectObjectContentResponse(body)\n  }\n\n  private async applyBucketLifecycle(bucketName: string, policyConfig: LifeCycleConfigParam): Promise<void> {\n    const method = 'PUT'\n    const query = 'lifecycle'\n\n    const headers: RequestHeaders = {}\n    const builder = new xml2js.Builder({\n      rootName: 'LifecycleConfiguration',\n      headless: true,\n      renderOpts: { pretty: false },\n    })\n    const payload = builder.buildObject(policyConfig)\n    headers['Content-MD5'] = toMd5(payload)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query, headers }, payload)\n  }\n\n  async removeBucketLifecycle(bucketName: string): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'DELETE'\n    const query = 'lifecycle'\n    await this.makeRequestAsyncOmit({ method, bucketName, query }, '', [204])\n  }\n\n  async setBucketLifecycle(bucketName: string, lifeCycleConfig: LifeCycleConfigParam): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (_.isEmpty(lifeCycleConfig)) {\n      await this.removeBucketLifecycle(bucketName)\n    } else {\n      await this.applyBucketLifecycle(bucketName, lifeCycleConfig)\n    }\n  }\n\n  async getBucketLifecycle(bucketName: string): Promise<LifecycleConfig | null> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'GET'\n    const query = 'lifecycle'\n\n    const res = await this.makeRequestAsync({ method, bucketName, query })\n    const body = await readAsString(res)\n    return xmlParsers.parseLifecycleConfig(body)\n  }\n\n  async setBucketEncryption(bucketName: string, encryptionConfig?: EncryptionConfig): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!_.isEmpty(encryptionConfig) && encryptionConfig.Rule.length > 1) {\n      throw new errors.InvalidArgumentError('Invalid Rule length. Only one rule is allowed.: ' + encryptionConfig.Rule)\n    }\n\n    let encryptionObj = encryptionConfig\n    if (_.isEmpty(encryptionConfig)) {\n      encryptionObj = {\n        // Default MinIO Server Supported Rule\n        Rule: [\n          {\n            ApplyServerSideEncryptionByDefault: {\n              SSEAlgorithm: 'AES256',\n            },\n          },\n        ],\n      }\n    }\n\n    const method = 'PUT'\n    const query = 'encryption'\n    const builder = new xml2js.Builder({\n      rootName: 'ServerSideEncryptionConfiguration',\n      renderOpts: { pretty: false },\n      headless: true,\n    })\n    const payload = builder.buildObject(encryptionObj)\n\n    const headers: RequestHeaders = {}\n    headers['Content-MD5'] = toMd5(payload)\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query, headers }, payload)\n  }\n\n  async getBucketEncryption(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'GET'\n    const query = 'encryption'\n\n    const res = await this.makeRequestAsync({ method, bucketName, query })\n    const body = await readAsString(res)\n    return xmlParsers.parseBucketEncryptionConfig(body)\n  }\n\n  async removeBucketEncryption(bucketName: string) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    const method = 'DELETE'\n    const query = 'encryption'\n\n    await this.makeRequestAsyncOmit({ method, bucketName, query }, '', [204])\n  }\n\n  async getObjectRetention(\n    bucketName: string,\n    objectName: string,\n    getOpts?: GetObjectRetentionOpts,\n  ): Promise<ObjectRetentionInfo | null | undefined> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    if (getOpts && !isObject(getOpts)) {\n      throw new errors.InvalidArgumentError('getOpts should be of type \"object\"')\n    } else if (getOpts?.versionId && !isString(getOpts.versionId)) {\n      throw new errors.InvalidArgumentError('versionId should be of type \"string\"')\n    }\n\n    const method = 'GET'\n    let query = 'retention'\n    if (getOpts?.versionId) {\n      query += `&versionId=${getOpts.versionId}`\n    }\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, query })\n    const body = await readAsString(res)\n    return xmlParsers.parseObjectRetentionConfig(body)\n  }\n\n  async removeObjects(bucketName: string, objectsList: RemoveObjectsParam): Promise<RemoveObjectsResponse[]> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!Array.isArray(objectsList)) {\n      throw new errors.InvalidArgumentError('objectsList should be a list')\n    }\n\n    const runDeleteObjects = async (batch: RemoveObjectsParam): Promise<RemoveObjectsResponse[]> => {\n      const delObjects: RemoveObjectsRequestEntry[] = batch.map((value) => {\n        return isObject(value) ? { Key: value.name, VersionId: value.versionId } : { Key: value }\n      })\n\n      const remObjects = { Delete: { Quiet: true, Object: delObjects } }\n      const payload = Buffer.from(new xml2js.Builder({ headless: true }).buildObject(remObjects))\n      const headers: RequestHeaders = { 'Content-MD5': toMd5(payload) }\n\n      const res = await this.makeRequestAsync({ method: 'POST', bucketName, query: 'delete', headers }, payload)\n      const body = await readAsString(res)\n      return xmlParsers.removeObjectsParser(body)\n    }\n\n    const maxEntries = 1000 // max entries accepted in server for DeleteMultipleObjects API.\n    // Client side batching\n    const batches = []\n    for (let i = 0; i < objectsList.length; i += maxEntries) {\n      batches.push(objectsList.slice(i, i + maxEntries))\n    }\n\n    const batchResults = await Promise.all(batches.map(runDeleteObjects))\n    return batchResults.flat()\n  }\n\n  async removeIncompleteUpload(bucketName: string, objectName: string): Promise<void> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.IsValidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n    const removeUploadId = await this.findUploadId(bucketName, objectName)\n    const method = 'DELETE'\n    const query = `uploadId=${removeUploadId}`\n    await this.makeRequestAsyncOmit({ method, bucketName, objectName, query }, '', [204])\n  }\n\n  private async copyObjectV1(\n    targetBucketName: string,\n    targetObjectName: string,\n    sourceBucketNameAndObjectName: string,\n    conditions?: null | CopyConditions,\n  ) {\n    if (typeof conditions == 'function') {\n      conditions = null\n    }\n\n    if (!isValidBucketName(targetBucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + targetBucketName)\n    }\n    if (!isValidObjectName(targetObjectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${targetObjectName}`)\n    }\n    if (!isString(sourceBucketNameAndObjectName)) {\n      throw new TypeError('sourceBucketNameAndObjectName should be of type \"string\"')\n    }\n    if (sourceBucketNameAndObjectName === '') {\n      throw new errors.InvalidPrefixError(`Empty source prefix`)\n    }\n\n    if (conditions != null && !(conditions instanceof CopyConditions)) {\n      throw new TypeError('conditions should be of type \"CopyConditions\"')\n    }\n\n    const headers: RequestHeaders = {}\n    headers['x-amz-copy-source'] = uriResourceEscape(sourceBucketNameAndObjectName)\n\n    if (conditions) {\n      if (conditions.modified !== '') {\n        headers['x-amz-copy-source-if-modified-since'] = conditions.modified\n      }\n      if (conditions.unmodified !== '') {\n        headers['x-amz-copy-source-if-unmodified-since'] = conditions.unmodified\n      }\n      if (conditions.matchETag !== '') {\n        headers['x-amz-copy-source-if-match'] = conditions.matchETag\n      }\n      if (conditions.matchETagExcept !== '') {\n        headers['x-amz-copy-source-if-none-match'] = conditions.matchETagExcept\n      }\n    }\n\n    const method = 'PUT'\n\n    const res = await this.makeRequestAsync({\n      method,\n      bucketName: targetBucketName,\n      objectName: targetObjectName,\n      headers,\n    })\n    const body = await readAsString(res)\n    return xmlParsers.parseCopyObject(body)\n  }\n\n  private async copyObjectV2(\n    sourceConfig: CopySourceOptions,\n    destConfig: CopyDestinationOptions,\n  ): Promise<CopyObjectResultV2> {\n    if (!(sourceConfig instanceof CopySourceOptions)) {\n      throw new errors.InvalidArgumentError('sourceConfig should of type CopySourceOptions ')\n    }\n    if (!(destConfig instanceof CopyDestinationOptions)) {\n      throw new errors.InvalidArgumentError('destConfig should of type CopyDestinationOptions ')\n    }\n    if (!destConfig.validate()) {\n      return Promise.reject()\n    }\n    if (!destConfig.validate()) {\n      return Promise.reject()\n    }\n\n    const headers = Object.assign({}, sourceConfig.getHeaders(), destConfig.getHeaders())\n\n    const bucketName = destConfig.Bucket\n    const objectName = destConfig.Object\n\n    const method = 'PUT'\n\n    const res = await this.makeRequestAsync({ method, bucketName, objectName, headers })\n    const body = await readAsString(res)\n    const copyRes = xmlParsers.parseCopyObject(body)\n    const resHeaders: IncomingHttpHeaders = res.headers\n\n    const sizeHeaderValue = resHeaders && resHeaders['content-length']\n    const size = typeof sizeHeaderValue === 'number' ? sizeHeaderValue : undefined\n\n    return {\n      Bucket: destConfig.Bucket,\n      Key: destConfig.Object,\n      LastModified: copyRes.lastModified,\n      MetaData: extractMetadata(resHeaders as ResponseHeader),\n      VersionId: getVersionId(resHeaders as ResponseHeader),\n      SourceVersionId: getSourceVersionId(resHeaders as ResponseHeader),\n      Etag: sanitizeETag(resHeaders.etag),\n      Size: size,\n    }\n  }\n\n  async copyObject(source: CopySourceOptions, dest: CopyDestinationOptions): Promise<CopyObjectResult>\n  async copyObject(\n    targetBucketName: string,\n    targetObjectName: string,\n    sourceBucketNameAndObjectName: string,\n    conditions?: CopyConditions,\n  ): Promise<CopyObjectResult>\n  async copyObject(...allArgs: CopyObjectParams): Promise<CopyObjectResult> {\n    if (typeof allArgs[0] === 'string') {\n      const [targetBucketName, targetObjectName, sourceBucketNameAndObjectName, conditions] = allArgs as [\n        string,\n        string,\n        string,\n        CopyConditions?,\n      ]\n      return await this.copyObjectV1(targetBucketName, targetObjectName, sourceBucketNameAndObjectName, conditions)\n    }\n    const [source, dest] = allArgs as [CopySourceOptions, CopyDestinationOptions]\n    return await this.copyObjectV2(source, dest)\n  }\n\n  async uploadPart(\n    partConfig: {\n      bucketName: string\n      objectName: string\n      uploadID: string\n      partNumber: number\n      headers: RequestHeaders\n    },\n    payload?: Binary,\n  ) {\n    const { bucketName, objectName, uploadID, partNumber, headers } = partConfig\n\n    const method = 'PUT'\n    const query = `uploadId=${uploadID}&partNumber=${partNumber}`\n    const requestOptions = { method, bucketName, objectName: objectName, query, headers }\n    const res = await this.makeRequestAsync(requestOptions, payload)\n    const body = await readAsString(res)\n    const partRes = uploadPartParser(body)\n    return {\n      etag: sanitizeETag(partRes.ETag),\n      key: objectName,\n      part: partNumber,\n    }\n  }\n\n  async composeObject(\n    destObjConfig: CopyDestinationOptions,\n    sourceObjList: CopySourceOptions[],\n  ): Promise<boolean | { etag: string; versionId: string | null } | Promise<void> | CopyObjectResult> {\n    const sourceFilesLength = sourceObjList.length\n\n    if (!Array.isArray(sourceObjList)) {\n      throw new errors.InvalidArgumentError('sourceConfig should an array of CopySourceOptions ')\n    }\n    if (!(destObjConfig instanceof CopyDestinationOptions)) {\n      throw new errors.InvalidArgumentError('destConfig should of type CopyDestinationOptions ')\n    }\n\n    if (sourceFilesLength < 1 || sourceFilesLength > PART_CONSTRAINTS.MAX_PARTS_COUNT) {\n      throw new errors.InvalidArgumentError(\n        `\"There must be as least one and up to ${PART_CONSTRAINTS.MAX_PARTS_COUNT} source objects.`,\n      )\n    }\n\n    for (let i = 0; i < sourceFilesLength; i++) {\n      const sObj = sourceObjList[i] as CopySourceOptions\n      if (!sObj.validate()) {\n        return false\n      }\n    }\n\n    if (!(destObjConfig as CopyDestinationOptions).validate()) {\n      return false\n    }\n\n    const getStatOptions = (srcConfig: CopySourceOptions) => {\n      let statOpts = {}\n      if (!_.isEmpty(srcConfig.VersionID)) {\n        statOpts = {\n          versionId: srcConfig.VersionID,\n        }\n      }\n      return statOpts\n    }\n    const srcObjectSizes: number[] = []\n    let totalSize = 0\n    let totalParts = 0\n\n    const sourceObjStats = sourceObjList.map((srcItem) =>\n      this.statObject(srcItem.Bucket, srcItem.Object, getStatOptions(srcItem)),\n    )\n\n    const srcObjectInfos = await Promise.all(sourceObjStats)\n\n    const validatedStats = srcObjectInfos.map((resItemStat, index) => {\n      const srcConfig: CopySourceOptions | undefined = sourceObjList[index]\n\n      let srcCopySize = resItemStat.size\n      // Check if a segment is specified, and if so, is the\n      // segment within object bounds?\n      if (srcConfig && srcConfig.MatchRange) {\n        // Since range is specified,\n        //    0 <= src.srcStart <= src.srcEnd\n        // so only invalid case to check is:\n        const srcStart = srcConfig.Start\n        const srcEnd = srcConfig.End\n        if (srcEnd >= srcCopySize || srcStart < 0) {\n          throw new errors.InvalidArgumentError(\n            `CopySrcOptions ${index} has invalid segment-to-copy [${srcStart}, ${srcEnd}] (size is ${srcCopySize})`,\n          )\n        }\n        srcCopySize = srcEnd - srcStart + 1\n      }\n\n      // Only the last source may be less than `absMinPartSize`\n      if (srcCopySize < PART_CONSTRAINTS.ABS_MIN_PART_SIZE && index < sourceFilesLength - 1) {\n        throw new errors.InvalidArgumentError(\n          `CopySrcOptions ${index} is too small (${srcCopySize}) and it is not the last part.`,\n        )\n      }\n\n      // Is data to copy too large?\n      totalSize += srcCopySize\n      if (totalSize > PART_CONSTRAINTS.MAX_MULTIPART_PUT_OBJECT_SIZE) {\n        throw new errors.InvalidArgumentError(`Cannot compose an object of size ${totalSize} (> 5TiB)`)\n      }\n\n      // record source size\n      srcObjectSizes[index] = srcCopySize\n\n      // calculate parts needed for current source\n      totalParts += partsRequired(srcCopySize)\n      // Do we need more parts than we are allowed?\n      if (totalParts > PART_CONSTRAINTS.MAX_PARTS_COUNT) {\n        throw new errors.InvalidArgumentError(\n          `Your proposed compose object requires more than ${PART_CONSTRAINTS.MAX_PARTS_COUNT} parts`,\n        )\n      }\n\n      return resItemStat\n    })\n\n    if ((totalParts === 1 && totalSize <= PART_CONSTRAINTS.MAX_PART_SIZE) || totalSize === 0) {\n      return await this.copyObject(sourceObjList[0] as CopySourceOptions, destObjConfig) // use copyObjectV2\n    }\n\n    // preserve etag to avoid modification of object while copying.\n    for (let i = 0; i < sourceFilesLength; i++) {\n      ;(sourceObjList[i] as CopySourceOptions).MatchETag = (validatedStats[i] as BucketItemStat).etag\n    }\n\n    const splitPartSizeList = validatedStats.map((resItemStat, idx) => {\n      return calculateEvenSplits(srcObjectSizes[idx] as number, sourceObjList[idx] as CopySourceOptions)\n    })\n\n    const getUploadPartConfigList = (uploadId: string) => {\n      const uploadPartConfigList: UploadPartConfig[] = []\n\n      splitPartSizeList.forEach((splitSize, splitIndex: number) => {\n        if (splitSize) {\n          const { startIndex: startIdx, endIndex: endIdx, objInfo: objConfig } = splitSize\n\n          const partIndex = splitIndex + 1 // part index starts from 1.\n          const totalUploads = Array.from(startIdx)\n\n          const headers = (sourceObjList[splitIndex] as CopySourceOptions).getHeaders()\n\n          totalUploads.forEach((splitStart, upldCtrIdx) => {\n            const splitEnd = endIdx[upldCtrIdx]\n\n            const sourceObj = `${objConfig.Bucket}/${objConfig.Object}`\n            headers['x-amz-copy-source'] = `${sourceObj}`\n            headers['x-amz-copy-source-range'] = `bytes=${splitStart}-${splitEnd}`\n\n            const uploadPartConfig = {\n              bucketName: destObjConfig.Bucket,\n              objectName: destObjConfig.Object,\n              uploadID: uploadId,\n              partNumber: partIndex,\n              headers: headers,\n              sourceObj: sourceObj,\n            }\n\n            uploadPartConfigList.push(uploadPartConfig)\n          })\n        }\n      })\n\n      return uploadPartConfigList\n    }\n\n    const uploadAllParts = async (uploadList: UploadPartConfig[]) => {\n      const partUploads = uploadList.map(async (item) => {\n        return this.uploadPart(item)\n      })\n      // Process results here if needed\n      return await Promise.all(partUploads)\n    }\n\n    const performUploadParts = async (uploadId: string) => {\n      const uploadList = getUploadPartConfigList(uploadId)\n      const partsRes = await uploadAllParts(uploadList)\n      return partsRes.map((partCopy) => ({ etag: partCopy.etag, part: partCopy.part }))\n    }\n\n    const newUploadHeaders = destObjConfig.getHeaders()\n\n    const uploadId = await this.initiateNewMultipartUpload(destObjConfig.Bucket, destObjConfig.Object, newUploadHeaders)\n    try {\n      const partsDone = await performUploadParts(uploadId)\n      return await this.completeMultipartUpload(destObjConfig.Bucket, destObjConfig.Object, uploadId, partsDone)\n    } catch (err) {\n      return await this.abortMultipartUpload(destObjConfig.Bucket, destObjConfig.Object, uploadId)\n    }\n  }\n\n  async presignedUrl(\n    method: string,\n    bucketName: string,\n    objectName: string,\n    expires?: number | PreSignRequestParams | undefined,\n    reqParams?: PreSignRequestParams | Date,\n    requestDate?: Date,\n  ): Promise<string> {\n    if (this.anonymous) {\n      throw new errors.AnonymousRequestError(`Presigned ${method} url cannot be generated for anonymous requests`)\n    }\n\n    if (!expires) {\n      expires = PRESIGN_EXPIRY_DAYS_MAX\n    }\n    if (!reqParams) {\n      reqParams = {}\n    }\n    if (!requestDate) {\n      requestDate = new Date()\n    }\n\n    // Type assertions\n    if (expires && typeof expires !== 'number') {\n      throw new TypeError('expires should be of type \"number\"')\n    }\n    if (reqParams && typeof reqParams !== 'object') {\n      throw new TypeError('reqParams should be of type \"object\"')\n    }\n    if ((requestDate && !(requestDate instanceof Date)) || (requestDate && isNaN(requestDate?.getTime()))) {\n      throw new TypeError('requestDate should be of type \"Date\" and valid')\n    }\n\n    const query = reqParams ? qs.stringify(reqParams) : undefined\n\n    try {\n      const region = await this.getBucketRegionAsync(bucketName)\n      await this.checkAndRefreshCreds()\n      const reqOptions = this.getRequestOptions({ method, region, bucketName, objectName, query })\n\n      return presignSignatureV4(\n        reqOptions,\n        this.accessKey,\n        this.secretKey,\n        this.sessionToken,\n        region,\n        requestDate,\n        expires,\n      )\n    } catch (err) {\n      if (err instanceof errors.InvalidBucketNameError) {\n        throw new errors.InvalidArgumentError(`Unable to get bucket region for ${bucketName}.`)\n      }\n\n      throw err\n    }\n  }\n\n  async presignedGetObject(\n    bucketName: string,\n    objectName: string,\n    expires?: number,\n    respHeaders?: PreSignRequestParams | Date,\n    requestDate?: Date,\n  ): Promise<string> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    const validRespHeaders = [\n      'response-content-type',\n      'response-content-language',\n      'response-expires',\n      'response-cache-control',\n      'response-content-disposition',\n      'response-content-encoding',\n    ]\n    validRespHeaders.forEach((header) => {\n      // @ts-ignore\n      if (respHeaders !== undefined && respHeaders[header] !== undefined && !isString(respHeaders[header])) {\n        throw new TypeError(`response header ${header} should be of type \"string\"`)\n      }\n    })\n    return this.presignedUrl('GET', bucketName, objectName, expires, respHeaders, requestDate)\n  }\n\n  async presignedPutObject(bucketName: string, objectName: string, expires?: number): Promise<string> {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isValidObjectName(objectName)) {\n      throw new errors.InvalidObjectNameError(`Invalid object name: ${objectName}`)\n    }\n\n    return this.presignedUrl('PUT', bucketName, objectName, expires)\n  }\n\n  newPostPolicy(): PostPolicy {\n    return new PostPolicy()\n  }\n\n  async presignedPostPolicy(postPolicy: PostPolicy): Promise<PostPolicyResult> {\n    if (this.anonymous) {\n      throw new errors.AnonymousRequestError('Presigned POST policy cannot be generated for anonymous requests')\n    }\n    if (!isObject(postPolicy)) {\n      throw new TypeError('postPolicy should be of type \"object\"')\n    }\n    const bucketName = postPolicy.formData.bucket as string\n    try {\n      const region = await this.getBucketRegionAsync(bucketName)\n\n      const date = new Date()\n      const dateStr = makeDateLong(date)\n      await this.checkAndRefreshCreds()\n\n      if (!postPolicy.policy.expiration) {\n        // 'expiration' is mandatory field for S3.\n        // Set default expiration date of 7 days.\n        const expires = new Date()\n        expires.setSeconds(PRESIGN_EXPIRY_DAYS_MAX)\n        postPolicy.setExpires(expires)\n      }\n\n      postPolicy.policy.conditions.push(['eq', '$x-amz-date', dateStr])\n      postPolicy.formData['x-amz-date'] = dateStr\n\n      postPolicy.policy.conditions.push(['eq', '$x-amz-algorithm', 'AWS4-HMAC-SHA256'])\n      postPolicy.formData['x-amz-algorithm'] = 'AWS4-HMAC-SHA256'\n\n      postPolicy.policy.conditions.push(['eq', '$x-amz-credential', this.accessKey + '/' + getScope(region, date)])\n      postPolicy.formData['x-amz-credential'] = this.accessKey + '/' + getScope(region, date)\n\n      if (this.sessionToken) {\n        postPolicy.policy.conditions.push(['eq', '$x-amz-security-token', this.sessionToken])\n        postPolicy.formData['x-amz-security-token'] = this.sessionToken\n      }\n\n      const policyBase64 = Buffer.from(JSON.stringify(postPolicy.policy)).toString('base64')\n\n      postPolicy.formData.policy = policyBase64\n\n      postPolicy.formData['x-amz-signature'] = postPresignSignatureV4(region, date, this.secretKey, policyBase64)\n      const opts = {\n        region: region,\n        bucketName: bucketName,\n        method: 'POST',\n      }\n      const reqOptions = this.getRequestOptions(opts)\n      const portStr = this.port == 80 || this.port === 443 ? '' : `:${this.port.toString()}`\n      const urlStr = `${reqOptions.protocol}//${reqOptions.host}${portStr}${reqOptions.path}`\n      return { postURL: urlStr, formData: postPolicy.formData }\n    } catch (err) {\n      if (err instanceof errors.InvalidBucketNameError) {\n        throw new errors.InvalidArgumentError(`Unable to get bucket region for ${bucketName}.`)\n      }\n\n      throw err\n    }\n  }\n  // list a batch of objects\n  async listObjectsQuery(bucketName: string, prefix?: string, marker?: string, listQueryOpts?: ListObjectQueryOpts) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (marker && !isString(marker)) {\n      throw new TypeError('marker should be of type \"string\"')\n    }\n\n    if (listQueryOpts && !isObject(listQueryOpts)) {\n      throw new TypeError('listQueryOpts should be of type \"object\"')\n    }\n    let { Delimiter, MaxKeys, IncludeVersion, versionIdMarker, keyMarker } = listQueryOpts as ListObjectQueryOpts\n\n    if (!isString(Delimiter)) {\n      throw new TypeError('Delimiter should be of type \"string\"')\n    }\n    if (!isNumber(MaxKeys)) {\n      throw new TypeError('MaxKeys should be of type \"number\"')\n    }\n\n    const queries = []\n    // escape every value in query string, except maxKeys\n    queries.push(`prefix=${uriEscape(prefix)}`)\n    queries.push(`delimiter=${uriEscape(Delimiter)}`)\n    queries.push(`encoding-type=url`)\n\n    if (IncludeVersion) {\n      queries.push(`versions`)\n    }\n\n    if (IncludeVersion) {\n      // v1 version listing..\n      if (keyMarker) {\n        queries.push(`key-marker=${keyMarker}`)\n      }\n      if (versionIdMarker) {\n        queries.push(`version-id-marker=${versionIdMarker}`)\n      }\n    } else if (marker) {\n      marker = uriEscape(marker)\n      queries.push(`marker=${marker}`)\n    }\n\n    // no need to escape maxKeys\n    if (MaxKeys) {\n      if (MaxKeys >= 1000) {\n        MaxKeys = 1000\n      }\n      queries.push(`max-keys=${MaxKeys}`)\n    }\n    queries.sort()\n    let query = ''\n    if (queries.length > 0) {\n      query = `${queries.join('&')}`\n    }\n\n    const method = 'GET'\n    const res = await this.makeRequestAsync({ method, bucketName, query })\n    const body = await readAsString(res)\n    const listQryList = parseListObjects(body)\n    return listQryList\n  }\n\n  listObjects(\n    bucketName: string,\n    prefix?: string,\n    recursive?: boolean,\n    listOpts?: ListObjectQueryOpts | undefined,\n  ): BucketStream<ObjectInfo> {\n    if (prefix === undefined) {\n      prefix = ''\n    }\n    if (recursive === undefined) {\n      recursive = false\n    }\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidPrefix(prefix)) {\n      throw new errors.InvalidPrefixError(`Invalid prefix : ${prefix}`)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (!isBoolean(recursive)) {\n      throw new TypeError('recursive should be of type \"boolean\"')\n    }\n    if (listOpts && !isObject(listOpts)) {\n      throw new TypeError('listOpts should be of type \"object\"')\n    }\n    let marker: string | undefined = ''\n    let keyMarker: string | undefined = ''\n    let versionIdMarker: string | undefined = ''\n    let objects: ObjectInfo[] = []\n    let ended = false\n    const readStream: stream.Readable = new stream.Readable({ objectMode: true })\n    readStream._read = async () => {\n      // push one object per _read()\n      if (objects.length) {\n        readStream.push(objects.shift())\n        return\n      }\n      if (ended) {\n        return readStream.push(null)\n      }\n\n      try {\n        const listQueryOpts = {\n          Delimiter: recursive ? '' : '/', // if recursive is false set delimiter to '/'\n          MaxKeys: 1000,\n          IncludeVersion: listOpts?.IncludeVersion,\n          // version listing specific options\n          keyMarker: keyMarker,\n          versionIdMarker: versionIdMarker,\n        }\n\n        const result: ListObjectQueryRes = await this.listObjectsQuery(bucketName, prefix, marker, listQueryOpts)\n        if (result.isTruncated) {\n          marker = result.nextMarker || undefined\n          if (result.keyMarker) {\n            keyMarker = result.keyMarker\n          }\n          if (result.versionIdMarker) {\n            versionIdMarker = result.versionIdMarker\n          }\n        } else {\n          ended = true\n        }\n        if (result.objects) {\n          objects = result.objects\n        }\n        // @ts-ignore\n        readStream._read()\n      } catch (err) {\n        readStream.emit('error', err)\n      }\n    }\n    return readStream\n  }\n}\n"],"names":["crypto","fs","http","https","path","stream","async","BlockStream2","isBrowser","_","qs","xml2js","CredentialProvider","errors","CopyDestinationOptions","CopySourceOptions","DEFAULT_REGION","LEGAL_HOLD_STATUS","PRESIGN_EXPIRY_DAYS_MAX","RETENTION_MODES","RETENTION_VALIDITY_UNITS","postPresignSignatureV4","presignSignatureV4","signV4","fsp","streamPromise","CopyConditions","Extensions","calculateEvenSplits","extractMetadata","getContentLength","getScope","getSourceVersionId","getVersionId","hashBinary","insertContentType","isAmazonEndpoint","isBoolean","isDefined","isEmpty","isNumber","isObject","isPlainObject","isReadableStream","isString","isValidBucketName","isValidEndpoint","isValidObjectName","isValidPort","isValidPrefix","isVirtualHostStyle","makeDateLong","PART_CONSTRAINTS","partsRequired","prependXAMZMeta","readableStream","sanitizeETag","toMd5","toSha256","uriEscape","uriResourceEscape","joinHostPort","PostPolicy","requestWithRetry","drainResponse","readAsBuffer","readAsString","getS3Endpoint","parseCompleteMultipart","parseInitiateMultipart","parseListObjects","parseObjectLegalHoldConfig","parseSelectObjectContentResponse","uploadPartParser","xmlParsers","xml","Builder","renderOpts","pretty","headless","Package","version","requestOptionProperties","TypedClient","partSize","maximumPartSize","maxObjectSize","constructor","params","secure","undefined","Error","useSSL","port","endPoint","InvalidEndpointError","InvalidArgumentError","region","host","toLowerCase","protocol","transport","transportAgent","globalAgent","libraryComments","process","platform","arch","libraryAgent","userAgent","pathStyle","accessKey","secretKey","sessionToken","anonymous","credentialsProvider","regionMap","overRidePartSize","enableSHA256","s3AccelerateEndpoint","reqOptions","clientExtensions","extensions","setS3TransferAccelerate","setRequestOptions","options","TypeError","pick","getAccelerateEndPointIfSet","bucketName","objectName","includes","setAppInfo","appName","appVersion","trim","getRequestOptions","opts","method","headers","query","agent","virtualHostStyle","accelerateEndPoint","k","v","Object","entries","assign","mapValues","pickBy","toString","setCredentialsProvider","checkAndRefreshCreds","credentialsConf","getCredentials","getAccessKey","getSecretKey","getSessionToken","e","cause","logHTTP","response","err","logStream","logHeaders","forEach","redactor","RegExp","replace","write","statusCode","errJSON","JSON","stringify","traceOn","stdout","traceOff","makeRequestAsync","payload","expectedCodes","length","sha256sum","makeRequestStreamAsync","makeRequestAsyncOmit","statusCodes","res","body","Buffer","isBuffer","getBucketRegionAsync","date","Date","authorization","parseResponseError","InvalidBucketNameError","cached","extractRegionAsync","parseBucketRegion","S3Error","errCode","code","errRegion","name","Region","makeRequest","returnResponse","cb","prom","then","result","makeRequestStream","executor","getBucketRegion","makeBucket","makeOpts","buildObject","CreateBucketConfiguration","$","xmlns","LocationConstraint","ObjectLocking","finalRegion","requestOpt","bucketExists","removeBucket","getObject","getOpts","InvalidObjectNameError","getPartialObject","offset","range","sseHeaders","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","expectedStatusCodes","push","fGetObject","filePath","downloadToTmpFile","partFileStream","objStat","statObject","encodedEtag","from","etag","partFile","mkdir","dirname","recursive","stats","stat","size","createWriteStream","flags","downloadStream","pipeline","rename","statOpts","statOptDef","parseInt","metaData","lastModified","versionId","removeObject","removeOpts","governanceBypass","forceDelete","queryParams","listIncompleteUploads","bucket","prefix","InvalidPrefixError","delimiter","keyMarker","uploadIdMarker","uploads","ended","readStream","Readable","objectMode","_read","shift","listIncompleteUploadsQuery","prefixes","eachSeries","upload","listParts","key","uploadId","parts","reduce","acc","item","emit","isTruncated","nextKeyMarker","nextUploadIdMarker","queries","maxUploads","sort","unshift","join","parseListMultipart","initiateNewMultipartUpload","abortMultipartUpload","requestOptions","findUploadId","_latestUpload","latestUpload","initiated","getTime","completeMultipartUpload","etags","builder","CompleteMultipartUpload","Part","map","PartNumber","part","ETag","errMessage","marker","listPartsQuery","parseListParts","listBuckets","regionConf","httpRes","xmlResult","parseListBucket","calculatePartSize","fPutObject","putObject","createReadStream","statSize","uploadBuffer","buf","uploadStream","md5sum","oldParts","eTags","previousUploadId","oldTags","chunkier","zeroPadding","o","Promise","all","resolve","reject","pipe","on","partNumber","chunk","md5","createHash","update","digest","oldPart","removeBucketReplication","setBucketReplication","replicationConfig","role","rules","replicationParamsConfig","ReplicationConfiguration","Role","Rule","getBucketReplication","parseReplicationConfig","getObjectLegalHold","keys","strRes","setObjectLegalHold","setOpts","status","ENABLED","DISABLED","config","Status","rootName","getBucketTagging","parseTagging","getObjectTagging","setBucketPolicy","policy","InvalidBucketPolicyError","getBucketPolicy","putObjectRetention","retentionOpts","mode","COMPLIANCE","GOVERNANCE","retainUntilDate","Mode","RetainUntilDate","getObjectLockConfig","parseObjectLockConfig","setObjectLockConfig","lockConfigOpts","retentionModes","validUnits","DAYS","YEARS","unit","validity","ObjectLockEnabled","configKeys","isAllKeysSet","every","lck","DefaultRetention","Days","Years","getBucketVersioning","parseBucketVersioningConfig","setBucketVersioning","versionConfig","setTagging","taggingParams","tags","putOpts","tagsList","value","Key","Value","taggingConfig","Tagging","TagSet","Tag","payloadBuf","removeTagging","setBucketTagging","removeBucketTagging","setObjectTagging","removeObjectTagging","selectObjectContent","selectOpts","expression","inputSerialization","outputSerialization","Expression","ExpressionType","expressionType","InputSerialization","OutputSerialization","requestProgress","RequestProgress","scanRange","ScanRange","applyBucketLifecycle","policyConfig","removeBucketLifecycle","setBucketLifecycle","lifeCycleConfig","getBucketLifecycle","parseLifecycleConfig","setBucketEncryption","encryptionConfig","encryptionObj","ApplyServerSideEncryptionByDefault","SSEAlgorithm","getBucketEncryption","parseBucketEncryptionConfig","removeBucketEncryption","getObjectRetention","parseObjectRetentionConfig","removeObjects","objectsList","Array","isArray","runDeleteObjects","batch","delObjects","VersionId","remObjects","Delete","Quiet","removeObjectsParser","maxEntries","batches","i","slice","batchResults","flat","removeIncompleteUpload","IsValidBucketNameError","removeUploadId","copyObjectV1","targetBucketName","targetObjectName","sourceBucketNameAndObjectName","conditions","modified","unmodified","matchETag","matchETagExcept","parseCopyObject","copyObjectV2","sourceConfig","destConfig","validate","getHeaders","Bucket","copyRes","resHeaders","sizeHeaderValue","LastModified","MetaData","SourceVersionId","Etag","Size","copyObject","allArgs","source","dest","uploadPart","partConfig","uploadID","partRes","composeObject","destObjConfig","sourceObjList","sourceFilesLength","MAX_PARTS_COUNT","sObj","getStatOptions","srcConfig","VersionID","srcObjectSizes","totalSize","totalParts","sourceObjStats","srcItem","srcObjectInfos","validatedStats","resItemStat","index","srcCopySize","MatchRange","srcStart","Start","srcEnd","End","ABS_MIN_PART_SIZE","MAX_MULTIPART_PUT_OBJECT_SIZE","MAX_PART_SIZE","MatchETag","splitPartSizeList","idx","getUploadPartConfigList","uploadPartConfigList","splitSize","splitIndex","startIndex","startIdx","endIndex","endIdx","objInfo","objConfig","partIndex","totalUploads","splitStart","upldCtrIdx","splitEnd","sourceObj","uploadPartConfig","uploadAllParts","uploadList","partUploads","performUploadParts","partsRes","partCopy","newUploadHeaders","partsDone","presignedUrl","expires","reqParams","requestDate","_requestDate","AnonymousRequestError","isNaN","presignedGetObject","respHeaders","validRespHeaders","header","presignedPutObject","newPostPolicy","presignedPostPolicy","postPolicy","formData","dateStr","expiration","setSeconds","setExpires","policyBase64","portStr","urlStr","postURL","listObjectsQuery","listQueryOpts","Delimiter","MaxKeys","IncludeVersion","versionIdMarker","listQryList","listObjects","listOpts","objects","nextMarker"],"mappings":"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"}},
    {"offset": {"line": 5317, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/notification.ts"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'eventemitter3'\nimport jsonLineParser from 'stream-json/jsonl/Parser.js'\n\nimport { DEFAULT_REGION } from './helpers.ts'\nimport type { TypedClient } from './internal/client.ts'\nimport { pipesetup, uriEscape } from './internal/helper.ts'\n\n// TODO: type this\n\ntype Event = unknown\n\n// Base class for three supported configs.\nexport class TargetConfig {\n  private Filter?: { S3Key: { FilterRule: { Name: string; Value: string }[] } }\n  private Event?: Event[]\n  private Id: unknown\n\n  setId(id: unknown) {\n    this.Id = id\n  }\n\n  addEvent(newevent: Event) {\n    if (!this.Event) {\n      this.Event = []\n    }\n    this.Event.push(newevent)\n  }\n\n  addFilterSuffix(suffix: string) {\n    if (!this.Filter) {\n      this.Filter = { S3Key: { FilterRule: [] } }\n    }\n    this.Filter.S3Key.FilterRule.push({ Name: 'suffix', Value: suffix })\n  }\n\n  addFilterPrefix(prefix: string) {\n    if (!this.Filter) {\n      this.Filter = { S3Key: { FilterRule: [] } }\n    }\n    this.Filter.S3Key.FilterRule.push({ Name: 'prefix', Value: prefix })\n  }\n}\n\n// 1. Topic (simple notification service)\nexport class TopicConfig extends TargetConfig {\n  private Topic: string\n\n  constructor(arn: string) {\n    super()\n    this.Topic = arn\n  }\n}\n\n// 2. Queue (simple queue service)\nexport class QueueConfig extends TargetConfig {\n  private Queue: string\n\n  constructor(arn: string) {\n    super()\n    this.Queue = arn\n  }\n}\n\n// 3. CloudFront (lambda function)\nexport class CloudFunctionConfig extends TargetConfig {\n  private CloudFunction: string\n\n  constructor(arn: string) {\n    super()\n    this.CloudFunction = arn\n  }\n}\n\n// Notification config - array of target configs.\n// Target configs can be\n// 1. Topic (simple notification service)\n// 2. Queue (simple queue service)\n// 3. CloudFront (lambda function)\nexport class NotificationConfig {\n  private TopicConfiguration?: TargetConfig[]\n  private CloudFunctionConfiguration?: TargetConfig[]\n  private QueueConfiguration?: TargetConfig[]\n\n  add(target: TargetConfig) {\n    let instance: TargetConfig[] | undefined\n    if (target instanceof TopicConfig) {\n      instance = this.TopicConfiguration ??= []\n    }\n    if (target instanceof QueueConfig) {\n      instance = this.QueueConfiguration ??= []\n    }\n    if (target instanceof CloudFunctionConfig) {\n      instance = this.CloudFunctionConfiguration ??= []\n    }\n    if (instance) {\n      instance.push(target)\n    }\n  }\n}\n\nexport const buildARN = (partition: string, service: string, region: string, accountId: string, resource: string) => {\n  return 'arn:' + partition + ':' + service + ':' + region + ':' + accountId + ':' + resource\n}\nexport const ObjectCreatedAll = 's3:ObjectCreated:*'\nexport const ObjectCreatedPut = 's3:ObjectCreated:Put'\nexport const ObjectCreatedPost = 's3:ObjectCreated:Post'\nexport const ObjectCreatedCopy = 's3:ObjectCreated:Copy'\nexport const ObjectCreatedCompleteMultipartUpload = 's3:ObjectCreated:CompleteMultipartUpload'\nexport const ObjectRemovedAll = 's3:ObjectRemoved:*'\nexport const ObjectRemovedDelete = 's3:ObjectRemoved:Delete'\nexport const ObjectRemovedDeleteMarkerCreated = 's3:ObjectRemoved:DeleteMarkerCreated'\nexport const ObjectReducedRedundancyLostObject = 's3:ReducedRedundancyLostObject'\nexport type NotificationEvent =\n  | 's3:ObjectCreated:*'\n  | 's3:ObjectCreated:Put'\n  | 's3:ObjectCreated:Post'\n  | 's3:ObjectCreated:Copy'\n  | 's3:ObjectCreated:CompleteMultipartUpload'\n  | 's3:ObjectRemoved:*'\n  | 's3:ObjectRemoved:Delete'\n  | 's3:ObjectRemoved:DeleteMarkerCreated'\n  | 's3:ReducedRedundancyLostObject'\n  | 's3:TestEvent'\n  | 's3:ObjectRestore:Post'\n  | 's3:ObjectRestore:Completed'\n  | 's3:Replication:OperationFailedReplication'\n  | 's3:Replication:OperationMissedThreshold'\n  | 's3:Replication:OperationReplicatedAfterThreshold'\n  | 's3:Replication:OperationNotTracked'\n  | string // put string at least so auto-complete could work\n\n// TODO: type this\nexport type NotificationRecord = unknown\n// Poll for notifications, used in #listenBucketNotification.\n// Listening constitutes repeatedly requesting s3 whether or not any\n// changes have occurred.\nexport class NotificationPoller extends EventEmitter<{\n  notification: (event: NotificationRecord) => void\n  error: (error: unknown) => void\n}> {\n  private client: TypedClient\n  private bucketName: string\n  private prefix: string\n  private suffix: string\n  private events: NotificationEvent[]\n  private ending: boolean\n\n  constructor(client: TypedClient, bucketName: string, prefix: string, suffix: string, events: NotificationEvent[]) {\n    super()\n\n    this.client = client\n    this.bucketName = bucketName\n    this.prefix = prefix\n    this.suffix = suffix\n    this.events = events\n\n    this.ending = false\n  }\n\n  // Starts the polling.\n  start() {\n    this.ending = false\n\n    process.nextTick(() => {\n      this.checkForChanges()\n    })\n  }\n\n  // Stops the polling.\n  stop() {\n    this.ending = true\n  }\n\n  checkForChanges() {\n    // Don't continue if we're looping again but are cancelled.\n    if (this.ending) {\n      return\n    }\n\n    const method = 'GET'\n    const queries = []\n    if (this.prefix) {\n      const prefix = uriEscape(this.prefix)\n      queries.push(`prefix=${prefix}`)\n    }\n    if (this.suffix) {\n      const suffix = uriEscape(this.suffix)\n      queries.push(`suffix=${suffix}`)\n    }\n    if (this.events) {\n      this.events.forEach((s3event) => queries.push('events=' + uriEscape(s3event)))\n    }\n    queries.sort()\n\n    let query = ''\n    if (queries.length > 0) {\n      query = `${queries.join('&')}`\n    }\n    const region = this.client.region || DEFAULT_REGION\n\n    this.client.makeRequestAsync({ method, bucketName: this.bucketName, query }, '', [200], region).then(\n      (response) => {\n        const asm = jsonLineParser.make()\n\n        pipesetup(response, asm)\n          .on('data', (data) => {\n            // Data is flushed periodically (every 5 seconds), so we should\n            // handle it after flushing from the JSON parser.\n            let records = data.value.Records\n            // If null (= no records), change to an empty array.\n            if (!records) {\n              records = []\n            }\n\n            // Iterate over the notifications and emit them individually.\n            records.forEach((record: NotificationRecord) => {\n              this.emit('notification', record)\n            })\n\n            // If we're done, stop.\n            if (this.ending) {\n              response?.destroy()\n            }\n          })\n          .on('error', (e) => this.emit('error', e))\n          .on('end', () => {\n            // Do it again, if we haven't cancelled yet.\n            process.nextTick(() => {\n              this.checkForChanges()\n            })\n          })\n      },\n      (e) => {\n        return this.emit('error', e)\n      },\n    )\n  }\n}\n"],"names":["EventEmitter","jsonLineParser","DEFAULT_REGION","pipesetup","uriEscape","TargetConfig","setId","id","Id","addEvent","newevent","Event","push","addFilterSuffix","suffix","Filter","S3Key","FilterRule","Name","Value","addFilterPrefix","prefix","TopicConfig","constructor","arn","Topic","QueueConfig","Queue","CloudFunctionConfig","CloudFunction","NotificationConfig","add","target","instance","TopicConfiguration","QueueConfiguration","CloudFunctionConfiguration","buildARN","partition","service","region","accountId","resource","ObjectCreatedAll","ObjectCreatedPut","ObjectCreatedPost","ObjectCreatedCopy","ObjectCreatedCompleteMultipartUpload","ObjectRemovedAll","ObjectRemovedDelete","ObjectRemovedDeleteMarkerCreated","ObjectReducedRedundancyLostObject","NotificationPoller","client","bucketName","events","ending","start","process","nextTick","checkForChanges","stop","method","queries","forEach","s3event","sort","query","length","join","makeRequestAsync","then","response","asm","make","on","data","records","value","Records","record","emit","destroy","e"],"mappings":"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"}},
    {"offset": {"line": 5542, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/promisify.js"],"sourcesContent":["// Returns a wrapper function that will promisify a given callback function.\n// It will preserve 'this'.\nexport function promisify(fn) {\n  return function () {\n    // If the last argument is a function, assume its the callback.\n    let callback = arguments[arguments.length - 1]\n\n    // If the callback is given, don't promisify, just pass straight in.\n    if (typeof callback === 'function') {\n      return fn.apply(this, arguments)\n    }\n\n    // Otherwise, create a new set of arguments, and wrap\n    // it in a promise.\n    let args = [...arguments]\n\n    return new Promise((resolve, reject) => {\n      // Add the callback function.\n      args.push((err, value) => {\n        if (err) {\n          return reject(err)\n        }\n\n        resolve(value)\n      })\n\n      // Call the function with our special adaptor callback added.\n      fn.apply(this, args)\n    })\n  }\n}\n"],"names":["promisify","fn","callback","arguments","length","apply","args","Promise","resolve","reject","push","err","value"],"mappings":"AAAA,4EAAA;AACA,2BAAA;;;;;AACO,SAASA,SAASA,CAACC,EAAE,EAAE;IAC5B,OAAO,YAAY;QACjB,+DAAA;QACA,IAAIC,QAAQ,GAAGC,SAAS,CAACA,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC;QAE9C,oEAAA;QACA,IAAI,OAAOF,QAAQ,KAAK,UAAU,EAAE;YAClC,OAAOD,EAAE,CAACI,KAAK,CAAC,IAAI,EAAEF,SAAS,CAAC;QAClC;QAEA,qDAAA;QACA,mBAAA;QACA,IAAIG,IAAI,GAAG,CAAC;eAAGH,SAAS;SAAC;QAEzB,OAAO,IAAII,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;YACtC,6BAAA;YACAH,IAAI,CAACI,IAAI,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;gBACxB,IAAID,GAAG,EAAE;oBACP,OAAOF,MAAM,CAACE,GAAG,CAAC;gBACpB;gBAEAH,OAAO,CAACI,KAAK,CAAC;YAChB,CAAC,CAAC;YAEF,6DAAA;YACAX,EAAE,CAACI,KAAK,CAAC,IAAI,EAAEC,IAAI,CAAC;QACtB,CAAC,CAAC;IACJ,CAAC;AACH"}},
    {"offset": {"line": 5578, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/xml-parsers.js"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as errors from './errors.ts'\nimport { parseXml, sanitizeETag, sanitizeObjectKey, toArray } from './internal/helper.ts'\n\n// parse XML response for bucket notification\nexport function parseBucketNotification(xml) {\n  var result = {\n    TopicConfiguration: [],\n    QueueConfiguration: [],\n    CloudFunctionConfiguration: [],\n  }\n  // Parse the events list\n  var genEvents = function (events) {\n    var result = []\n    if (events) {\n      toArray(events).forEach((s3event) => {\n        result.push(s3event)\n      })\n    }\n    return result\n  }\n  // Parse all filter rules\n  var genFilterRules = function (filters) {\n    var result = []\n    if (filters) {\n      filters = toArray(filters)\n      if (filters[0].S3Key) {\n        filters[0].S3Key = toArray(filters[0].S3Key)\n        if (filters[0].S3Key[0].FilterRule) {\n          toArray(filters[0].S3Key[0].FilterRule).forEach((rule) => {\n            var Name = toArray(rule.Name)[0]\n            var Value = toArray(rule.Value)[0]\n            result.push({ Name, Value })\n          })\n        }\n      }\n    }\n    return result\n  }\n\n  var xmlobj = parseXml(xml)\n  xmlobj = xmlobj.NotificationConfiguration\n\n  // Parse all topic configurations in the xml\n  if (xmlobj.TopicConfiguration) {\n    toArray(xmlobj.TopicConfiguration).forEach((config) => {\n      var Id = toArray(config.Id)[0]\n      var Topic = toArray(config.Topic)[0]\n      var Event = genEvents(config.Event)\n      var Filter = genFilterRules(config.Filter)\n      result.TopicConfiguration.push({ Id, Topic, Event, Filter })\n    })\n  }\n  // Parse all topic configurations in the xml\n  if (xmlobj.QueueConfiguration) {\n    toArray(xmlobj.QueueConfiguration).forEach((config) => {\n      var Id = toArray(config.Id)[0]\n      var Queue = toArray(config.Queue)[0]\n      var Event = genEvents(config.Event)\n      var Filter = genFilterRules(config.Filter)\n      result.QueueConfiguration.push({ Id, Queue, Event, Filter })\n    })\n  }\n  // Parse all QueueConfiguration arrays\n  if (xmlobj.CloudFunctionConfiguration) {\n    toArray(xmlobj.CloudFunctionConfiguration).forEach((config) => {\n      var Id = toArray(config.Id)[0]\n      var CloudFunction = toArray(config.CloudFunction)[0]\n      var Event = genEvents(config.Event)\n      var Filter = genFilterRules(config.Filter)\n      result.CloudFunctionConfiguration.push({ Id, CloudFunction, Event, Filter })\n    })\n  }\n\n  return result\n}\n\n// parse XML response for list objects v2 in a bucket\nexport function parseListObjectsV2(xml) {\n  var result = {\n    objects: [],\n    isTruncated: false,\n  }\n  var xmlobj = parseXml(xml)\n  if (!xmlobj.ListBucketResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListBucketResult\"')\n  }\n  xmlobj = xmlobj.ListBucketResult\n  if (xmlobj.IsTruncated) {\n    result.isTruncated = xmlobj.IsTruncated\n  }\n  if (xmlobj.NextContinuationToken) {\n    result.nextContinuationToken = xmlobj.NextContinuationToken\n  }\n  if (xmlobj.Contents) {\n    toArray(xmlobj.Contents).forEach((content) => {\n      var name = sanitizeObjectKey(toArray(content.Key)[0])\n      var lastModified = new Date(content.LastModified)\n      var etag = sanitizeETag(content.ETag)\n      var size = content.Size\n      result.objects.push({ name, lastModified, etag, size })\n    })\n  }\n  if (xmlobj.CommonPrefixes) {\n    toArray(xmlobj.CommonPrefixes).forEach((commonPrefix) => {\n      result.objects.push({ prefix: sanitizeObjectKey(toArray(commonPrefix.Prefix)[0]), size: 0 })\n    })\n  }\n  return result\n}\n\n// parse XML response for list objects v2 with metadata in a bucket\nexport function parseListObjectsV2WithMetadata(xml) {\n  var result = {\n    objects: [],\n    isTruncated: false,\n  }\n  var xmlobj = parseXml(xml)\n  if (!xmlobj.ListBucketResult) {\n    throw new errors.InvalidXMLError('Missing tag: \"ListBucketResult\"')\n  }\n  xmlobj = xmlobj.ListBucketResult\n  if (xmlobj.IsTruncated) {\n    result.isTruncated = xmlobj.IsTruncated\n  }\n  if (xmlobj.NextContinuationToken) {\n    result.nextContinuationToken = xmlobj.NextContinuationToken\n  }\n\n  if (xmlobj.Contents) {\n    toArray(xmlobj.Contents).forEach((content) => {\n      var name = sanitizeObjectKey(content.Key)\n      var lastModified = new Date(content.LastModified)\n      var etag = sanitizeETag(content.ETag)\n      var size = content.Size\n      var metadata\n      if (content.UserMetadata != null) {\n        metadata = toArray(content.UserMetadata)[0]\n      } else {\n        metadata = null\n      }\n      result.objects.push({ name, lastModified, etag, size, metadata })\n    })\n  }\n\n  if (xmlobj.CommonPrefixes) {\n    toArray(xmlobj.CommonPrefixes).forEach((commonPrefix) => {\n      result.objects.push({ prefix: sanitizeObjectKey(toArray(commonPrefix.Prefix)[0]), size: 0 })\n    })\n  }\n  return result\n}\n"],"names":["errors","parseXml","sanitizeETag","sanitizeObjectKey","toArray","parseBucketNotification","xml","result","TopicConfiguration","QueueConfiguration","CloudFunctionConfiguration","genEvents","events","forEach","s3event","push","genFilterRules","filters","S3Key","FilterRule","rule","Name","Value","xmlobj","NotificationConfiguration","config","Id","Topic","Event","Filter","Queue","CloudFunction","parseListObjectsV2","objects","isTruncated","ListBucketResult","InvalidXMLError","IsTruncated","NextContinuationToken","nextContinuationToken","Contents","content","name","Key","lastModified","Date","LastModified","etag","ETag","size","Size","CommonPrefixes","commonPrefix","prefix","Prefix","parseListObjectsV2WithMetadata","metadata","UserMetadata"],"mappings":"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"}},
    {"offset": {"line": 5781, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/transformers.js"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015, 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Crypto from 'node:crypto'\n\nimport Through2 from 'through2'\n\nimport { isFunction } from './internal/helper.ts'\nimport * as xmlParsers from './xml-parsers.js'\n\n// getConcater returns a stream that concatenates the input and emits\n// the concatenated output when 'end' has reached. If an optional\n// parser function is passed upon reaching the 'end' of the stream,\n// `parser(concatenated_data)` will be emitted.\nexport function getConcater(parser, emitError) {\n  var objectMode = false\n  var bufs = []\n\n  if (parser && !isFunction(parser)) {\n    throw new TypeError('parser should be of type \"function\"')\n  }\n\n  if (parser) {\n    objectMode = true\n  }\n\n  return Through2(\n    { objectMode },\n    function (chunk, enc, cb) {\n      bufs.push(chunk)\n      cb()\n    },\n    function (cb) {\n      if (emitError) {\n        cb(parser(Buffer.concat(bufs).toString()))\n        // cb(e) would mean we have to emit 'end' by explicitly calling this.push(null)\n        this.push(null)\n        return\n      }\n      if (bufs.length) {\n        if (parser) {\n          try {\n            this.push(parser(Buffer.concat(bufs).toString()))\n          } catch (e) {\n            cb(e)\n            return\n          }\n        } else {\n          this.push(Buffer.concat(bufs))\n        }\n      }\n      cb()\n    },\n  )\n}\n\n// A through stream that calculates md5sum and sha256sum\nexport function getHashSummer(enableSHA256) {\n  var md5 = Crypto.createHash('md5')\n  var sha256 = Crypto.createHash('sha256')\n\n  return Through2.obj(\n    function (chunk, enc, cb) {\n      if (enableSHA256) {\n        sha256.update(chunk)\n      } else {\n        md5.update(chunk)\n      }\n      cb()\n    },\n    function (cb) {\n      var md5sum = ''\n      var sha256sum = ''\n      if (enableSHA256) {\n        sha256sum = sha256.digest('hex')\n      } else {\n        md5sum = md5.digest('base64')\n      }\n      var hashData = { md5sum, sha256sum }\n      this.push(hashData)\n      this.push(null)\n      cb()\n    },\n  )\n}\n\n// Following functions return a stream object that parses XML\n// and emits suitable Javascript objects.\n\n// Parses listObjects response.\nexport function getListObjectsV2Transformer() {\n  return getConcater(xmlParsers.parseListObjectsV2)\n}\n\n// Parses listObjects with metadata response.\nexport function getListObjectsV2WithMetadataTransformer() {\n  return getConcater(xmlParsers.parseListObjectsV2WithMetadata)\n}\n\n// Parses GET/SET BucketNotification response\nexport function getBucketNotificationTransformer() {\n  return getConcater(xmlParsers.parseBucketNotification)\n}\n"],"names":["Crypto","Through2","isFunction","xmlParsers","getConcater","parser","emitError","objectMode","bufs","TypeError","chunk","enc","cb","push","Buffer","concat","toString","length","e","getHashSummer","enableSHA256","md5","createHash","sha256","obj","update","md5sum","sha256sum","digest","hashData","getListObjectsV2Transformer","parseListObjectsV2","getListObjectsV2WithMetadataTransformer","parseListObjectsV2WithMetadata","getBucketNotificationTransformer","parseBucketNotification"],"mappings":"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"}},
    {"offset": {"line": 5891, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/node_modules/minio/dist/esm/minio.js"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Stream from 'node:stream'\n\nimport xml2js from 'xml2js'\n\nimport * as errors from './errors.ts'\nimport { callbackify } from './internal/callbackify.js'\nimport { TypedClient } from './internal/client.ts'\nimport { CopyConditions } from './internal/copy-conditions.ts'\nimport {\n  isBoolean,\n  isFunction,\n  isNumber,\n  isObject,\n  isString,\n  isValidBucketName,\n  isValidPrefix,\n  pipesetup,\n  uriEscape,\n} from './internal/helper.ts'\nimport { PostPolicy } from './internal/post-policy.ts'\nimport { NotificationConfig, NotificationPoller } from './notification.ts'\nimport { promisify } from './promisify.js'\nimport * as transformers from './transformers.js'\n\nexport * from './errors.ts'\nexport * from './helpers.ts'\nexport * from './notification.ts'\nexport { CopyConditions, PostPolicy }\n\nexport class Client extends TypedClient {\n  //\n  // __Arguments__\n  // * `appName` _string_ - Application name.\n  // * `appVersion` _string_ - Application version.\n\n  // listObjectsV2Query - (List Objects V2) - List some or all (up to 1000) of the objects in a bucket.\n  //\n  // You can use the request parameters as selection criteria to return a subset of the objects in a bucket.\n  // request parameters :-\n  // * `bucketName` _string_: name of the bucket\n  // * `prefix` _string_: Limits the response to keys that begin with the specified prefix.\n  // * `continuation-token` _string_: Used to continue iterating over a set of objects.\n  // * `delimiter` _string_: A delimiter is a character you use to group keys.\n  // * `max-keys` _number_: Sets the maximum number of keys returned in the response body.\n  // * `start-after` _string_: Specifies the key to start after when listing objects in a bucket.\n  listObjectsV2Query(bucketName, prefix, continuationToken, delimiter, maxKeys, startAfter) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (!isString(continuationToken)) {\n      throw new TypeError('continuationToken should be of type \"string\"')\n    }\n    if (!isString(delimiter)) {\n      throw new TypeError('delimiter should be of type \"string\"')\n    }\n    if (!isNumber(maxKeys)) {\n      throw new TypeError('maxKeys should be of type \"number\"')\n    }\n    if (!isString(startAfter)) {\n      throw new TypeError('startAfter should be of type \"string\"')\n    }\n    var queries = []\n\n    // Call for listing objects v2 API\n    queries.push(`list-type=2`)\n    queries.push(`encoding-type=url`)\n\n    // escape every value in query string, except maxKeys\n    queries.push(`prefix=${uriEscape(prefix)}`)\n    queries.push(`delimiter=${uriEscape(delimiter)}`)\n\n    if (continuationToken) {\n      continuationToken = uriEscape(continuationToken)\n      queries.push(`continuation-token=${continuationToken}`)\n    }\n    // Set start-after\n    if (startAfter) {\n      startAfter = uriEscape(startAfter)\n      queries.push(`start-after=${startAfter}`)\n    }\n    // no need to escape maxKeys\n    if (maxKeys) {\n      if (maxKeys >= 1000) {\n        maxKeys = 1000\n      }\n      queries.push(`max-keys=${maxKeys}`)\n    }\n    queries.sort()\n    var query = ''\n    if (queries.length > 0) {\n      query = `${queries.join('&')}`\n    }\n    var method = 'GET'\n    var transformer = transformers.getListObjectsV2Transformer()\n    this.makeRequest({ method, bucketName, query }, '', [200], '', true, (e, response) => {\n      if (e) {\n        return transformer.emit('error', e)\n      }\n      pipesetup(response, transformer)\n    })\n    return transformer\n  }\n\n  // List the objects in the bucket using S3 ListObjects V2\n  //\n  // __Arguments__\n  // * `bucketName` _string_: name of the bucket\n  // * `prefix` _string_: the prefix of the objects that should be listed (optional, default `''`)\n  // * `recursive` _bool_: `true` indicates recursive style listing and `false` indicates directory style listing delimited by '/'. (optional, default `false`)\n  // * `startAfter` _string_: Specifies the key to start after when listing objects in a bucket. (optional, default `''`)\n  //\n  // __Return Value__\n  // * `stream` _Stream_: stream emitting the objects in the bucket, the object is of the format:\n  //   * `obj.name` _string_: name of the object\n  //   * `obj.prefix` _string_: name of the object prefix\n  //   * `obj.size` _number_: size of the object\n  //   * `obj.etag` _string_: etag of the object\n  //   * `obj.lastModified` _Date_: modified time stamp\n  listObjectsV2(bucketName, prefix, recursive, startAfter) {\n    if (prefix === undefined) {\n      prefix = ''\n    }\n    if (recursive === undefined) {\n      recursive = false\n    }\n    if (startAfter === undefined) {\n      startAfter = ''\n    }\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isValidPrefix(prefix)) {\n      throw new errors.InvalidPrefixError(`Invalid prefix : ${prefix}`)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix should be of type \"string\"')\n    }\n    if (!isBoolean(recursive)) {\n      throw new TypeError('recursive should be of type \"boolean\"')\n    }\n    if (!isString(startAfter)) {\n      throw new TypeError('startAfter should be of type \"string\"')\n    }\n    // if recursive is false set delimiter to '/'\n    var delimiter = recursive ? '' : '/'\n    var continuationToken = ''\n    var objects = []\n    var ended = false\n    var readStream = Stream.Readable({ objectMode: true })\n    readStream._read = () => {\n      // push one object per _read()\n      if (objects.length) {\n        readStream.push(objects.shift())\n        return\n      }\n      if (ended) {\n        return readStream.push(null)\n      }\n      // if there are no objects to push do query for the next batch of objects\n      this.listObjectsV2Query(bucketName, prefix, continuationToken, delimiter, 1000, startAfter)\n        .on('error', (e) => readStream.emit('error', e))\n        .on('data', (result) => {\n          if (result.isTruncated) {\n            continuationToken = result.nextContinuationToken\n          } else {\n            ended = true\n          }\n          objects = result.objects\n          readStream._read()\n        })\n    }\n    return readStream\n  }\n\n  // Remove all the notification configurations in the S3 provider\n  setBucketNotification(bucketName, config, cb) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isObject(config)) {\n      throw new TypeError('notification config should be of type \"Object\"')\n    }\n    if (!isFunction(cb)) {\n      throw new TypeError('callback should be of type \"function\"')\n    }\n    var method = 'PUT'\n    var query = 'notification'\n    var builder = new xml2js.Builder({\n      rootName: 'NotificationConfiguration',\n      renderOpts: { pretty: false },\n      headless: true,\n    })\n    var payload = builder.buildObject(config)\n    this.makeRequest({ method, bucketName, query }, payload, [200], '', false, cb)\n  }\n\n  removeAllBucketNotification(bucketName, cb) {\n    this.setBucketNotification(bucketName, new NotificationConfig(), cb)\n  }\n\n  // Return the list of notification configurations stored\n  // in the S3 provider\n  getBucketNotification(bucketName, cb) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError('Invalid bucket name: ' + bucketName)\n    }\n    if (!isFunction(cb)) {\n      throw new TypeError('callback should be of type \"function\"')\n    }\n    var method = 'GET'\n    var query = 'notification'\n    this.makeRequest({ method, bucketName, query }, '', [200], '', true, (e, response) => {\n      if (e) {\n        return cb(e)\n      }\n      var transformer = transformers.getBucketNotificationTransformer()\n      var bucketNotification\n      pipesetup(response, transformer)\n        .on('data', (result) => (bucketNotification = result))\n        .on('error', (e) => cb(e))\n        .on('end', () => cb(null, bucketNotification))\n    })\n  }\n\n  // Listens for bucket notifications. Returns an EventEmitter.\n  listenBucketNotification(bucketName, prefix, suffix, events) {\n    if (!isValidBucketName(bucketName)) {\n      throw new errors.InvalidBucketNameError(`Invalid bucket name: ${bucketName}`)\n    }\n    if (!isString(prefix)) {\n      throw new TypeError('prefix must be of type string')\n    }\n    if (!isString(suffix)) {\n      throw new TypeError('suffix must be of type string')\n    }\n    if (!Array.isArray(events)) {\n      throw new TypeError('events must be of type Array')\n    }\n    let listener = new NotificationPoller(this, bucketName, prefix, suffix, events)\n    listener.start()\n\n    return listener\n  }\n}\n\nClient.prototype.getBucketNotification = promisify(Client.prototype.getBucketNotification)\nClient.prototype.setBucketNotification = promisify(Client.prototype.setBucketNotification)\nClient.prototype.removeAllBucketNotification = promisify(Client.prototype.removeAllBucketNotification)\n\n// refactored API use promise internally\nClient.prototype.makeBucket = callbackify(Client.prototype.makeBucket)\nClient.prototype.bucketExists = callbackify(Client.prototype.bucketExists)\nClient.prototype.removeBucket = callbackify(Client.prototype.removeBucket)\nClient.prototype.listBuckets = callbackify(Client.prototype.listBuckets)\n\nClient.prototype.getObject = callbackify(Client.prototype.getObject)\nClient.prototype.fGetObject = callbackify(Client.prototype.fGetObject)\nClient.prototype.getPartialObject = callbackify(Client.prototype.getPartialObject)\nClient.prototype.statObject = callbackify(Client.prototype.statObject)\nClient.prototype.putObjectRetention = callbackify(Client.prototype.putObjectRetention)\nClient.prototype.putObject = callbackify(Client.prototype.putObject)\nClient.prototype.fPutObject = callbackify(Client.prototype.fPutObject)\nClient.prototype.removeObject = callbackify(Client.prototype.removeObject)\n\nClient.prototype.removeBucketReplication = callbackify(Client.prototype.removeBucketReplication)\nClient.prototype.setBucketReplication = callbackify(Client.prototype.setBucketReplication)\nClient.prototype.getBucketReplication = callbackify(Client.prototype.getBucketReplication)\nClient.prototype.getObjectLegalHold = callbackify(Client.prototype.getObjectLegalHold)\nClient.prototype.setObjectLegalHold = callbackify(Client.prototype.setObjectLegalHold)\nClient.prototype.setObjectLockConfig = callbackify(Client.prototype.setObjectLockConfig)\nClient.prototype.getObjectLockConfig = callbackify(Client.prototype.getObjectLockConfig)\nClient.prototype.getBucketPolicy = callbackify(Client.prototype.getBucketPolicy)\nClient.prototype.setBucketPolicy = callbackify(Client.prototype.setBucketPolicy)\nClient.prototype.getBucketTagging = callbackify(Client.prototype.getBucketTagging)\nClient.prototype.getObjectTagging = callbackify(Client.prototype.getObjectTagging)\nClient.prototype.setBucketTagging = callbackify(Client.prototype.setBucketTagging)\nClient.prototype.removeBucketTagging = callbackify(Client.prototype.removeBucketTagging)\nClient.prototype.setObjectTagging = callbackify(Client.prototype.setObjectTagging)\nClient.prototype.removeObjectTagging = callbackify(Client.prototype.removeObjectTagging)\nClient.prototype.getBucketVersioning = callbackify(Client.prototype.getBucketVersioning)\nClient.prototype.setBucketVersioning = callbackify(Client.prototype.setBucketVersioning)\nClient.prototype.selectObjectContent = callbackify(Client.prototype.selectObjectContent)\nClient.prototype.setBucketLifecycle = callbackify(Client.prototype.setBucketLifecycle)\nClient.prototype.getBucketLifecycle = callbackify(Client.prototype.getBucketLifecycle)\nClient.prototype.removeBucketLifecycle = callbackify(Client.prototype.removeBucketLifecycle)\nClient.prototype.setBucketEncryption = callbackify(Client.prototype.setBucketEncryption)\nClient.prototype.getBucketEncryption = callbackify(Client.prototype.getBucketEncryption)\nClient.prototype.removeBucketEncryption = callbackify(Client.prototype.removeBucketEncryption)\nClient.prototype.getObjectRetention = callbackify(Client.prototype.getObjectRetention)\nClient.prototype.removeObjects = callbackify(Client.prototype.removeObjects)\nClient.prototype.removeIncompleteUpload = callbackify(Client.prototype.removeIncompleteUpload)\nClient.prototype.copyObject = callbackify(Client.prototype.copyObject)\nClient.prototype.composeObject = callbackify(Client.prototype.composeObject)\nClient.prototype.presignedUrl = callbackify(Client.prototype.presignedUrl)\nClient.prototype.presignedGetObject = callbackify(Client.prototype.presignedGetObject)\nClient.prototype.presignedPutObject = callbackify(Client.prototype.presignedPutObject)\nClient.prototype.presignedPostPolicy = callbackify(Client.prototype.presignedPostPolicy)\n"],"names":["Stream","xml2js","errors","callbackify","TypedClient","CopyConditions","isBoolean","isFunction","isNumber","isObject","isString","isValidBucketName","isValidPrefix","pipesetup","uriEscape","PostPolicy","NotificationConfig","NotificationPoller","promisify","transformers","Client","listObjectsV2Query","bucketName","prefix","continuationToken","delimiter","maxKeys","startAfter","InvalidBucketNameError","TypeError","queries","push","sort","query","length","join","method","transformer","getListObjectsV2Transformer","makeRequest","e","response","emit","listObjectsV2","recursive","undefined","InvalidPrefixError","objects","ended","readStream","Readable","objectMode","_read","shift","on","result","isTruncated","nextContinuationToken","setBucketNotification","config","cb","builder","Builder","rootName","renderOpts","pretty","headless","payload","buildObject","removeAllBucketNotification","getBucketNotification","getBucketNotificationTransformer","bucketNotification","listenBucketNotification","suffix","events","Array","isArray","listener","start","prototype","makeBucket","bucketExists","removeBucket","listBuckets","getObject","fGetObject","getPartialObject","statObject","putObjectRetention","putObject","fPutObject","removeObject","removeBucketReplication","setBucketReplication","getBucketReplication","getObjectLegalHold","setObjectLegalHold","setObjectLockConfig","getObjectLockConfig","getBucketPolicy","setBucketPolicy","getBucketTagging","getObjectTagging","setBucketTagging","removeBucketTagging","setObjectTagging","removeObjectTagging","getBucketVersioning","setBucketVersioning","selectObjectContent","setBucketLifecycle","getBucketLifecycle","removeBucketLifecycle","setBucketEncryption","getBucketEncryption","removeBucketEncryption","getObjectRetention","removeObjects","removeIncompleteUpload","copyObject","composeObject","presignedUrl","presignedGetObject","presignedPutObject","presignedPostPolicy"],"mappings":"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"}}]
}