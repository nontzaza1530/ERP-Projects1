{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/src/app/api/accounting/receipts/%5Bid%5D/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nexport async function GET(request, { params }) {\r\n    const { id } = params;\r\n\r\n    // --- จำลองข้อมูล (Mock Data) ---\r\n    // ในอนาคตคุณค่อยเปลี่ยนตรงนี้เป็นการดึงจาก Database จริง (เช่น Prisma, MySQL)\r\n    \r\n    // 1. จำลองหัวบิล (Receipt Info)\r\n    const receipt = {\r\n        id: id,\r\n        doc_number: `RC-202402-${id.padStart(3, '0')}`, // รันเลขตาม ID\r\n        ref_doc_number: `INV-202402-${id.padStart(3, '0')}`, // อ้างอิงใบแจ้งหนี้\r\n        doc_date: new Date().toISOString(),\r\n        due_date: new Date().toISOString(),\r\n        customer_name: \"บริษัท ลูกค้าตัวอย่าง จำกัด (มหาชน)\",\r\n        customer_address: \"99/9 ชั้น 30 อาคารตัวอย่าง ถ.สุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110\",\r\n        customer_tax_id: \"0105551234567\",\r\n        subtotal: 0, // เดี๋ยวคำนวณใหม่ข้างล่าง\r\n        vat_amount: 0,\r\n        grand_total: 0,\r\n    };\r\n\r\n    // 2. จำลองรายการสินค้า (Items) - สร้างมา 15 รายการ เพื่อเทสแบ่งหน้า\r\n    const items = Array.from({ length: 15 }, (_, i) => ({\r\n        description: `ค่าบริการทำระบบ งวดที่ ${i + 1} (Service Fee)`,\r\n        quantity: 1,\r\n        unit_price: 5000.00,\r\n        total: 5000.00\r\n    }));\r\n\r\n    // 3. คำนวณยอดเงินรวม (ให้สมจริง)\r\n    const subtotal = items.reduce((sum, item) => sum + item.total, 0);\r\n    const vat = subtotal * 0.07;\r\n    const grandTotal = subtotal + vat;\r\n\r\n    // อัปเดตยอดเงินกลับเข้าไปใน object\r\n    receipt.subtotal = subtotal;\r\n    receipt.vat_amount = vat;\r\n    receipt.grand_total = grandTotal;\r\n\r\n    // --- ส่งข้อมูลกลับไปที่ Frontend ---\r\n    return NextResponse.json({\r\n        receipt: receipt,\r\n        items: items\r\n    });\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAO,EAAE,EAAE,MAAM,EAAE;IACzC,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,kCAAkC;IAClC,8EAA8E;IAE9E,gCAAgC;IAChC,MAAM,UAAU;QACZ,IAAI;QACJ,YAAY,CAAC,UAAU,EAAE,GAAG,QAAQ,CAAC,GAAG,MAAM;QAC9C,gBAAgB,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,GAAG,MAAM;QACnD,UAAU,IAAI,OAAO,WAAW;QAChC,UAAU,IAAI,OAAO,WAAW;QAChC,eAAe;QACf,kBAAkB;QAClB,iBAAiB;QACjB,UAAU;QACV,YAAY;QACZ,aAAa;IACjB;IAEA,oEAAoE;IACpE,MAAM,QAAQ,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAG,GAAG,CAAC,GAAG,IAAM,CAAC;YAChD,aAAa,CAAC,uBAAuB,EAAE,IAAI,EAAE,cAAc,CAAC;YAC5D,UAAU;YACV,YAAY;YACZ,OAAO;QACX,CAAC;IAED,iCAAiC;IACjC,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,EAAE;IAC/D,MAAM,MAAM,WAAW;IACvB,MAAM,aAAa,WAAW;IAE9B,mCAAmC;IACnC,QAAQ,QAAQ,GAAG;IACnB,QAAQ,UAAU,GAAG;IACrB,QAAQ,WAAW,GAAG;IAEtB,sCAAsC;IACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;QACrB,SAAS;QACT,OAAO;IACX;AACJ"}}]
}