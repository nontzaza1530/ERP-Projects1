{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/src/app/api/production/projects/%5Bid%5D/documents/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport mysql from 'mysql2/promise';\r\n\r\nexport async function GET(req, { params }) {\r\n    try {\r\n        // ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∏‡∏î‡∏ï‡∏≤‡∏¢: ‡πÉ‡∏™‡πà await ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ params ‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Å‡πà‡∏≠‡∏ô (Next.js 15+)\r\n        const resolvedParams = await params;\r\n        const id = resolvedParams.id; \r\n\r\n        console.log(\"üìÇ Fetching documents for Project ID:\", id); \r\n\r\n        if (!id) {\r\n            return NextResponse.json({ error: \"Project ID is missing\" }, { status: 400 });\r\n        }\r\n\r\n        const connection = await mysql.createConnection({\r\n            host: process.env.DB_HOST || '127.0.0.1',\r\n            user: process.env.DB_USER || 'root',\r\n            password: process.env.DB_PASSWORD || '',\r\n            database: process.env.DB_NAME || 'erp_project',\r\n            port: process.env.DB_PORT ? parseInt(process.env.DB_PORT) : 3306,\r\n            connectTimeout: 10000\r\n        });\r\n\r\n        // ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ id ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (‡∏ã‡∏∂‡πà‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô) ‡πÑ‡∏õ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô DB\r\n        const [rows] = await connection.execute(\r\n            'SELECT * FROM project_documents WHERE project_id = ? ORDER BY created_at DESC',\r\n            [id]\r\n        );\r\n\r\n        await connection.end();\r\n\r\n        console.log(\"‚úÖ Documents Found:\", rows.length);\r\n        return NextResponse.json({ files: rows });\r\n\r\n    } catch (error) {\r\n        console.error(\"‚ùå GET ERROR DETAIL:\", error);\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAG,EAAE,EAAE,MAAM,EAAE;IACrC,IAAI;QACA,6EAA6E;QAC7E,MAAM,iBAAiB,MAAM;QAC7B,MAAM,KAAK,eAAe,EAAE;QAE5B,QAAQ,GAAG,CAAC,yCAAyC;QAErD,IAAI,CAAC,IAAI;YACL,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,aAAa,MAAM,8IAAK,CAAC,gBAAgB,CAAC;YAC5C,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;YAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;YAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;YACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;YACjC,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;YAC5D,gBAAgB;QACpB;QAEA,4DAA4D;QAC5D,MAAM,CAAC,KAAK,GAAG,MAAM,WAAW,OAAO,CACnC,iFACA;YAAC;SAAG;QAGR,MAAM,WAAW,GAAG;QAEpB,QAAQ,GAAG,CAAC,sBAAsB,KAAK,MAAM;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAK;IAE3C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrE;AACJ"}}]
}