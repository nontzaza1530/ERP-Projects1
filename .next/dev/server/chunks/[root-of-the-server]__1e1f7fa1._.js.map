{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/erp_project/src/app/api/accounting/receipts/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport pool from '@/lib/db';\r\n\r\nexport async function GET() {\r\n    try {\r\n        // ✅ ดึงใบเสร็จ + ชื่อลูกค้า (โดยเชื่อมกับตาราง invoices)\r\n        const sql = `\r\n            SELECT \r\n                r.id, \r\n                r.doc_number, \r\n                r.doc_date, \r\n                r.amount as grand_total, \r\n                'completed' as status,\r\n                i.customer_name \r\n            FROM receipts r\r\n            JOIN invoices i ON r.invoice_id = i.id\r\n            ORDER BY r.id DESC\r\n        `;\r\n        \r\n        const [rows] = await pool.query(sql);\r\n        \r\n        return NextResponse.json({ receipts: rows });\r\n    } catch (error) {\r\n        console.error(\"DB Error:\", error);\r\n        return NextResponse.json({ error: \"Failed to fetch data\" }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;;;;;;;;AAGO,eAAe;IAClB,IAAI;QACA,yDAAyD;QACzD,MAAM,MAAM,CAAC;;;;;;;;;;;QAWb,CAAC;QAED,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC;QAEhC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAK;IAC9C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,aAAa;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACJ"}}]
}